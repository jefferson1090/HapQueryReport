import{c as Ss,g as wh,k as zc,b as Zc,s as eO,r as F,_ as tO,j as N,a as sO,p as iO,T as rO,u as nO,R as oO,E as EO,X as Gn,C as lO,P as kl,d as zi,e as Wl,D as yn,A as xn,m as Zi,f as Xl,M as aO,h as Kl,i as $l,S as Jl,l as TO,n as Hn,o as hO,F as AO,q as RO,t as SO,v as cO,w as Ql,y as OO}from"./index-BATq0WAH.js";const NO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ql=Ss("activity",NO);const IO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fO=Ss("eye",IO);const uO=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],dO=Ss("minimize-2",uO);const CO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],_O=Ss("panel-right-close",CO);const LO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],pO=Ss("panel-right-open",LO);const mO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],DO=Ss("play",mO);const gO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],jl=Ss("zap",gO),d=i=>i.flatMap(PO),PO=i=>pr(UO(i)).map(MO),MO=i=>i.replace(/ +/g," ").trim(),UO=i=>({type:"mandatory_block",items:VE(i,0)[0]}),VE=(i,e,t)=>{const s=[];for(;i[e];){const[r,n]=bO(i,e);if(s.push(r),e=n,i[e]==="|")e++;else if(i[e]==="}"||i[e]==="]"){if(t!==i[e])throw new Error(`Unbalanced parenthesis in: ${i}`);return e++,[s,e]}else if(e===i.length){if(t)throw new Error(`Unbalanced parenthesis in: ${i}`);return[s,e]}else throw new Error(`Unexpected "${i[e]}"`)}return[s,e]},bO=(i,e)=>{const t=[];for(;;){const[s,r]=BO(i,e);if(s)t.push(s),e=r;else break}return t.length===1?[t[0],e]:[{type:"concatenation",items:t},e]},BO=(i,e)=>{if(i[e]==="{")return GO(i,e+1);if(i[e]==="[")return yO(i,e+1);{let t="";for(;i[e]&&/[A-Za-z0-9_ ]/.test(i[e]);)t+=i[e],e++;return[t,e]}},GO=(i,e)=>{const[t,s]=VE(i,e,"}");return[{type:"mandatory_block",items:t},s]},yO=(i,e)=>{const[t,s]=VE(i,e,"]");return[{type:"optional_block",items:t},s]},pr=i=>{if(typeof i=="string")return[i];if(i.type==="concatenation")return i.items.map(pr).reduce(xO,[""]);if(i.type==="mandatory_block")return i.items.flatMap(pr);if(i.type==="optional_block")return["",...i.items.flatMap(pr)];throw new Error(`Unknown node type: ${i}`)},xO=(i,e)=>{const t=[];for(const s of i)for(const r of e)t.push(s+r);return t};var D;(function(i){i.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",i.IDENTIFIER="IDENTIFIER",i.STRING="STRING",i.VARIABLE="VARIABLE",i.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",i.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",i.RESERVED_KEYWORD="RESERVED_KEYWORD",i.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",i.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",i.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",i.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",i.RESERVED_CLAUSE="RESERVED_CLAUSE",i.RESERVED_SELECT="RESERVED_SELECT",i.RESERVED_JOIN="RESERVED_JOIN",i.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",i.ARRAY_KEYWORD="ARRAY_KEYWORD",i.CASE="CASE",i.END="END",i.WHEN="WHEN",i.ELSE="ELSE",i.THEN="THEN",i.LIMIT="LIMIT",i.BETWEEN="BETWEEN",i.AND="AND",i.OR="OR",i.XOR="XOR",i.OPERATOR="OPERATOR",i.COMMA="COMMA",i.ASTERISK="ASTERISK",i.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",i.OPEN_PAREN="OPEN_PAREN",i.CLOSE_PAREN="CLOSE_PAREN",i.LINE_COMMENT="LINE_COMMENT",i.BLOCK_COMMENT="BLOCK_COMMENT",i.DISABLE_COMMENT="DISABLE_COMMENT",i.NUMBER="NUMBER",i.NAMED_PARAMETER="NAMED_PARAMETER",i.QUOTED_PARAMETER="QUOTED_PARAMETER",i.NUMBERED_PARAMETER="NUMBERED_PARAMETER",i.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",i.CUSTOM_PARAMETER="CUSTOM_PARAMETER",i.DELIMITER="DELIMITER",i.EOF="EOF"})(D=D||(D={}));const Vh=i=>({type:D.EOF,raw:"«EOF»",text:"«EOF»",start:i}),Gs=Vh(1/0),fs=i=>e=>e.type===i.type&&e.text===i.text,ls={ARRAY:fs({text:"ARRAY",type:D.RESERVED_DATA_TYPE}),BY:fs({text:"BY",type:D.RESERVED_KEYWORD}),SET:fs({text:"SET",type:D.RESERVED_CLAUSE}),STRUCT:fs({text:"STRUCT",type:D.RESERVED_DATA_TYPE}),WINDOW:fs({text:"WINDOW",type:D.RESERVED_CLAUSE}),VALUES:fs({text:"VALUES",type:D.RESERVED_CLAUSE})},kh=i=>i===D.RESERVED_DATA_TYPE||i===D.RESERVED_KEYWORD||i===D.RESERVED_FUNCTION_NAME||i===D.RESERVED_KEYWORD_PHRASE||i===D.RESERVED_DATA_TYPE_PHRASE||i===D.RESERVED_CLAUSE||i===D.RESERVED_SELECT||i===D.RESERVED_SET_OPERATION||i===D.RESERVED_JOIN||i===D.ARRAY_KEYWORD||i===D.CASE||i===D.END||i===D.WHEN||i===D.ELSE||i===D.THEN||i===D.LIMIT||i===D.BETWEEN||i===D.AND||i===D.OR||i===D.XOR,HO=i=>i===D.AND||i===D.OR||i===D.XOR,FO=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"],YO=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],vO=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"],wO=d(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),VO=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),zl=d(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),Fn=d(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),kO=d(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),WO=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),XO=d(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),KO=d([]),$O={name:"bigquery",tokenizerOptions:{reservedSelect:wO,reservedClauses:[...VO,...Fn,...zl],reservedSetOperations:kO,reservedJoins:WO,reservedKeywordPhrases:XO,reservedDataTypePhrases:KO,reservedKeywords:YO,reservedDataTypes:vO,reservedFunctionNames:FO,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:JO},formatOptions:{onelineClauses:[...zl,...Fn],tabularOnelineClauses:Fn}};function JO(i){return QO(qO(i))}function QO(i){let e=Gs;return i.map(t=>t.text==="OFFSET"&&e.text==="["?(e=t,Object.assign(Object.assign({},t),{type:D.RESERVED_FUNCTION_NAME})):(e=t,t))}function qO(i){var e;const t=[];for(let s=0;s<i.length;s++){const r=i[s];if((ls.ARRAY(r)||ls.STRUCT(r))&&((e=i[s+1])===null||e===void 0?void 0:e.text)==="<"){const n=jO(i,s+1),o=i.slice(s,n+1);t.push({type:D.IDENTIFIER,raw:o.map(Zl("raw")).join(""),text:o.map(Zl("text")).join(""),start:r.start}),s=n}else t.push(r)}return t}const Zl=i=>e=>e.type===D.IDENTIFIER||e.type===D.COMMA?e[i]+" ":e[i];function jO(i,e){let t=0;for(let s=e;s<i.length;s++){const r=i[s];if(r.text==="<"?t++:r.text===">"?t--:r.text===">>"&&(t-=2),t===0)return s}return i.length-1}const zO=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"],ZO=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],eN=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"],tN=d(["SELECT [ALL | DISTINCT]"]),sN=d(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),ea=d(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),Yn=d(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),iN=d(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),rN=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),nN=d(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),oN=d([]),EN={name:"db2",tokenizerOptions:{reservedSelect:tN,reservedClauses:[...sN,...ea,...Yn],reservedSetOperations:iN,reservedJoins:rN,reservedKeywordPhrases:nN,reservedDataTypePhrases:oN,reservedKeywords:ZO,reservedDataTypes:eN,reservedFunctionNames:zO,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","¬=","¬>","¬<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...ea,...Yn],tabularOnelineClauses:Yn}},lN=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"],aN=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],TN=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"],hN=d(["SELECT [ALL | DISTINCT]"]),AN=d(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),ta=d(["CREATE [OR REPLACE] TABLE"]),vn=d(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),RN=d(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),SN=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),cN=d(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),ON=d([]),NN={name:"db2i",tokenizerOptions:{reservedSelect:hN,reservedClauses:[...AN,...ta,...vn],reservedSetOperations:RN,reservedJoins:SN,reservedKeywordPhrases:cN,reservedDataTypePhrases:ON,reservedKeywords:aN,reservedDataTypes:TN,reservedFunctionNames:lN,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","¬=","¬>","¬<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...ta,...vn],tabularOnelineClauses:vn}},IN=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"],fN=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],uN=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"],dN=d(["SELECT [ALL | DISTINCT]"]),CN=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),sa=d(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),wn=d(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),_N=d(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),LN=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),pN=d(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),mN=d(["TIMESTAMP WITH TIME ZONE"]),DN={name:"duckdb",tokenizerOptions:{reservedSelect:dN,reservedClauses:[...CN,...sa,...wn],reservedSetOperations:_N,reservedJoins:LN,reservedKeywordPhrases:pN,reservedDataTypePhrases:mN,supportsXor:!0,reservedKeywords:fN,reservedDataTypes:uN,reservedFunctionNames:IN,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...sa,...wn],tabularOnelineClauses:wn}},gN=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"],PN=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],MN=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"],UN=d(["SELECT [ALL | DISTINCT]"]),bN=d(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),ia=d(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),Vn=d(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),BN=d(["UNION [ALL | DISTINCT]"]),GN=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),yN=d(["{ROWS | RANGE} BETWEEN"]),xN=d([]),HN={name:"hive",tokenizerOptions:{reservedSelect:UN,reservedClauses:[...bN,...ia,...Vn],reservedSetOperations:BN,reservedJoins:GN,reservedKeywordPhrases:yN,reservedDataTypePhrases:xN,reservedKeywords:PN,reservedDataTypes:MN,reservedFunctionNames:gN,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...ia,...Vn],tabularOnelineClauses:Vn}};function cn(i){return i.map((e,t)=>{const s=i[t+1]||Gs;if(ls.SET(e)&&s.text==="(")return Object.assign(Object.assign({},e),{type:D.RESERVED_FUNCTION_NAME});const r=i[t-1]||Gs;return ls.VALUES(e)&&r.text==="="?Object.assign(Object.assign({},e),{type:D.RESERVED_FUNCTION_NAME}):e})}const FN=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],YN=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],vN=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"],wN=d(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),VN=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),ra=d(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),kn=d(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),kN=d(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),WN=d(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),XN=d(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),KN=d([]),$N={name:"mariadb",tokenizerOptions:{reservedSelect:wN,reservedClauses:[...VN,...ra,...kn],reservedSetOperations:kN,reservedJoins:WN,reservedKeywordPhrases:XN,reservedDataTypePhrases:KN,supportsXor:!0,reservedKeywords:FN,reservedDataTypes:YN,reservedFunctionNames:vN,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:cn},formatOptions:{onelineClauses:[...ra,...kn],tabularOnelineClauses:kn}},JN=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],QN=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],qN=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"],jN=d(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),zN=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),na=d(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Wn=d(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),ZN=d(["UNION [ALL | DISTINCT]"]),eI=d(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),tI=d(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),sI=d([]),iI={name:"mysql",tokenizerOptions:{reservedSelect:jN,reservedClauses:[...zN,...na,...Wn],reservedSetOperations:ZN,reservedJoins:eI,reservedKeywordPhrases:tI,reservedDataTypePhrases:sI,supportsXor:!0,reservedKeywords:JN,reservedDataTypes:QN,reservedFunctionNames:qN,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:cn},formatOptions:{onelineClauses:[...na,...Wn],tabularOnelineClauses:Wn}},rI=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],nI=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"],oI=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"],EI=d(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),lI=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),oa=d(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Xn=d(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),aI=d(["UNION [ALL | DISTINCT]"]),TI=d(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),hI=d(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),AI=d([]),RI={name:"tidb",tokenizerOptions:{reservedSelect:EI,reservedClauses:[...lI,...oa,...Xn],reservedSetOperations:aI,reservedJoins:TI,reservedKeywordPhrases:hI,reservedDataTypePhrases:AI,supportsXor:!0,reservedKeywords:rI,reservedDataTypes:nI,reservedFunctionNames:oI,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:cn},formatOptions:{onelineClauses:[...oa,...Xn],tabularOnelineClauses:Xn}},SI=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"],cI=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],OI=[],NI=d(["SELECT [ALL | DISTINCT]"]),II=d(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),Ea=d(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),fI=d(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),uI=d(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),dI=d(["{ROWS | RANGE | GROUPS} BETWEEN"]),CI=d([]),_I={name:"n1ql",tokenizerOptions:{reservedSelect:NI,reservedClauses:[...II,...Ea],reservedSetOperations:fI,reservedJoins:uI,reservedKeywordPhrases:dI,reservedDataTypePhrases:CI,supportsXor:!0,reservedKeywords:cI,reservedDataTypes:OI,reservedFunctionNames:SI,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:Ea}},LI=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],pI=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"],mI=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"],DI=d(["SELECT [ALL | DISTINCT | UNIQUE]"]),gI=d(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),la=d(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),Kn=d(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),PI=d(["UNION [ALL]","MINUS","INTERSECT"]),MI=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),UI=d(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),bI=d([]),BI={name:"plsql",tokenizerOptions:{reservedSelect:DI,reservedClauses:[...gI,...la,...Kn],reservedSetOperations:PI,reservedJoins:MI,reservedKeywordPhrases:UI,reservedDataTypePhrases:bI,supportsXor:!0,reservedKeywords:LI,reservedDataTypes:pI,reservedFunctionNames:mI,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:GI},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...la,...Kn],tabularOnelineClauses:Kn}};function GI(i){let e=Gs;return i.map(t=>ls.SET(t)&&ls.BY(e)?Object.assign(Object.assign({},t),{type:D.RESERVED_KEYWORD}):(kh(t.type)&&(e=t),t))}const yI=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"],xI=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],HI=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"],FI=d(["SELECT [ALL | DISTINCT]"]),YI=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),aa=d(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),$n=d(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),vI=d(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),wI=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),VI=d(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),kI=d(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),WI={name:"postgresql",tokenizerOptions:{reservedSelect:FI,reservedClauses:[...YI,...aa,...$n],reservedSetOperations:vI,reservedJoins:wI,reservedKeywordPhrases:VI,reservedDataTypePhrases:kI,reservedKeywords:xI,reservedDataTypes:HI,reservedFunctionNames:yI,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...aa,...$n],tabularOnelineClauses:$n}},XI=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"],KI=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],$I=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"],JI=d(["SELECT [ALL | DISTINCT]"]),QI=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),Ta=d(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),Jn=d(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),qI=d(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),jI=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),zI=d(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),ZI=d([]),ef={name:"redshift",tokenizerOptions:{reservedSelect:JI,reservedClauses:[...QI,...Ta,...Jn],reservedSetOperations:qI,reservedJoins:jI,reservedKeywordPhrases:zI,reservedDataTypePhrases:ZI,reservedKeywords:KI,reservedDataTypes:$I,reservedFunctionNames:XI,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Ta,...Jn],tabularOnelineClauses:Jn}},tf=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],sf=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"],rf=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"],nf=d(["SELECT [ALL | DISTINCT]"]),of=d(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),ha=d(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),Qn=d(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),Ef=d(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),lf=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),af=d(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),Tf=d([]),hf={name:"spark",tokenizerOptions:{reservedSelect:nf,reservedClauses:[...of,...ha,...Qn],reservedSetOperations:Ef,reservedJoins:lf,reservedKeywordPhrases:af,reservedDataTypePhrases:Tf,supportsXor:!0,reservedKeywords:tf,reservedDataTypes:sf,reservedFunctionNames:rf,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:Af},formatOptions:{onelineClauses:[...ha,...Qn],tabularOnelineClauses:Qn}};function Af(i){return i.map((e,t)=>{const s=i[t-1]||Gs,r=i[t+1]||Gs;return ls.WINDOW(e)&&r.type===D.OPEN_PAREN?Object.assign(Object.assign({},e),{type:D.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===D.RESERVED_KEYWORD&&!(s.text==="COLLECTION"&&r.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:D.IDENTIFIER,text:e.raw}):e})}const Rf=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"],Sf=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],cf=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"],Of=d(["SELECT [ALL | DISTINCT]"]),Nf=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),Aa=d(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),qn=d(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),If=d(["UNION [ALL]","EXCEPT","INTERSECT"]),ff=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),uf=d(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),df=d([]),Cf={name:"sqlite",tokenizerOptions:{reservedSelect:Of,reservedClauses:[...Nf,...Aa,...qn],reservedSetOperations:If,reservedJoins:ff,reservedKeywordPhrases:uf,reservedDataTypePhrases:df,reservedKeywords:Sf,reservedDataTypes:cf,reservedFunctionNames:Rf,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...Aa,...qn],tabularOnelineClauses:qn}},_f=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"],Lf=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],pf=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"],mf=d(["SELECT [ALL | DISTINCT]"]),Df=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),Ra=d(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),jn=d(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),gf=d(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),Pf=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),Mf=d(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),Uf=d([]),bf={name:"sql",tokenizerOptions:{reservedSelect:mf,reservedClauses:[...Df,...Ra,...jn],reservedSetOperations:gf,reservedJoins:Pf,reservedKeywordPhrases:Mf,reservedDataTypePhrases:Uf,reservedKeywords:Lf,reservedDataTypes:pf,reservedFunctionNames:_f,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...Ra,...jn],tabularOnelineClauses:jn}},Bf=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"],Gf=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],yf=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"],xf=d(["SELECT [ALL | DISTINCT]"]),Hf=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),Sa=d(["CREATE TABLE [IF NOT EXISTS]"]),zn=d(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),Ff=d(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),Yf=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),vf=d(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),wf=d([]),Vf={name:"trino",tokenizerOptions:{reservedSelect:xf,reservedClauses:[...Hf,...Sa,...zn],reservedSetOperations:Ff,reservedJoins:Yf,reservedKeywordPhrases:vf,reservedDataTypePhrases:wf,reservedKeywords:Gf,reservedDataTypes:yf,reservedFunctionNames:Bf,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...Sa,...zn],tabularOnelineClauses:zn}},kf=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"],Wf=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],Xf=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"],Kf=d(["SELECT [ALL | DISTINCT]"]),$f=d(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),ca=d(["CREATE TABLE"]),Zn=d(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),Jf=d(["UNION [ALL]","EXCEPT","INTERSECT"]),Qf=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),qf=d(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),jf=d([]),zf={name:"transactsql",tokenizerOptions:{reservedSelect:Kf,reservedClauses:[...$f,...ca,...Zn],reservedSetOperations:Jf,reservedJoins:Qf,reservedKeywordPhrases:qf,reservedDataTypePhrases:jf,reservedKeywords:Wf,reservedDataTypes:Xf,reservedFunctionNames:kf,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...ca,...Zn],tabularOnelineClauses:Zn}},Zf=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],eu=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"],tu=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"],su=d(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),iu=d(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),Oa=d(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),eo=d(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),ru=d(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),nu=d(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),ou=d(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Eu=d([]),lu={name:"singlestoredb",tokenizerOptions:{reservedSelect:su,reservedClauses:[...iu,...Oa,...eo],reservedSetOperations:ru,reservedJoins:nu,reservedKeywordPhrases:ou,reservedDataTypePhrases:Eu,reservedKeywords:Zf,reservedDataTypes:eu,reservedFunctionNames:tu,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:cn},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...Oa,...eo],tabularOnelineClauses:eo}},au=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER — Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"],Tu=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],hu=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"],Au=d(["SELECT [ALL | DISTINCT]"]),Ru=d(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),Na=d(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),to=d(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),Su=d(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),cu=d(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),Ou=d(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),Nu=d([]),Iu={name:"snowflake",tokenizerOptions:{reservedSelect:Au,reservedClauses:[...Ru,...Na,...to],reservedSetOperations:Su,reservedJoins:cu,reservedKeywordPhrases:Ou,reservedDataTypePhrases:Nu,reservedKeywords:Tu,reservedDataTypes:hu,reservedFunctionNames:au,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Na,...to],tabularOnelineClauses:to}},fu=Object.freeze(Object.defineProperty({__proto__:null,bigquery:$O,db2:EN,db2i:NN,duckdb:DN,hive:HN,mariadb:$N,mysql:iI,n1ql:_I,plsql:BI,postgresql:WI,redshift:ef,singlestoredb:lu,snowflake:Iu,spark:hf,sql:bf,sqlite:Cf,tidb:RI,transactsql:zf,trino:Vf},Symbol.toStringTag,{value:"Module"})),ai=i=>i[i.length-1],Wh=i=>i.sort((e,t)=>t.length-e.length||e.localeCompare(t)),mr=i=>i.replace(/\s+/gu," "),so=i=>/\n/.test(i),Et=i=>i.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),Ia=/\s+/uy,cs=i=>new RegExp(`(?:${i})`,"uy"),uu=i=>i.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),du=i=>i+"(?:-"+i+")*",Cu=({prefixes:i,requirePrefix:e})=>`(?:${i.map(uu).join("|")}${e?"":"|"})`,_u=i=>new RegExp(`(?:${i.map(Et).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),fa=(i,e=[])=>{const t=i==="open"?0:1,s=["()",...e].map(r=>r[t]);return cs(s.map(Et).join("|"))},ua=i=>cs(`${Wh(i).map(Et).join("|")}`),Lu=({rest:i,dashes:e})=>i||e?`(?![${i||""}${e?"-":""}])`:"",Dt=(i,e={})=>{if(i.length===0)return/^\b$/u;const t=Lu(e),s=Wh(i).map(Et).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${s})${t}\\b`,"iuy")},io=(i,e)=>{if(!i.length)return;const t=i.map(Et).join("|");return cs(`(?:${t})(?:${e})`)},pu=()=>{const i={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",t=Object.entries(i).map(([o,E])=>e.replace(/{left}/g,Et(o)).replace(/{right}/g,Et(E))),s=Et(Object.keys(i).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${s}])(?:(?!\k<tag>').)*?\k<tag>`}|${t.join("|")})'`},da={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":pu()},Xh=i=>typeof i=="string"?da[i]:"regex"in i?i.regex:Cu(i)+da[i.quote],mu=i=>cs(i.map(e=>"regex"in e?e.regex:Xh(e)).join("|")),Kh=i=>i.map(Xh).join("|"),Ca=i=>cs(Kh(i)),Du=(i={})=>cs($h(i)),$h=({first:i,rest:e,dashes:t,allowFirstCharNumber:s}={})=>{const r="\\p{Alphabetic}\\p{Mark}_",n="\\p{Decimal_Number}",o=Et(i??""),E=Et(e??""),l=s?`[${r}${n}${o}][${r}${n}${E}]*`:`[${r}${o}][${r}${n}${E}]*`;return t?du(l):l};function Jh(i,e){const t=i.slice(0,e).split(/\n/);return{line:t.length,col:t[t.length-1].length+1}}class gu{constructor(e,t){this.rules=e,this.dialectName=t,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;const t=[];let s;for(;this.index<this.input.length;){const r=this.getWhitespace();if(this.index<this.input.length){if(s=this.getNextToken(),!s)throw this.createParseError();t.push(Object.assign(Object.assign({},s),{precedingWhitespace:r}))}}return t}createParseError(){const e=this.input.slice(this.index,this.index+10),{line:t,col:s}=Jh(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${t} column ${s}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){Ia.lastIndex=this.index;const e=Ia.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(const e of this.rules){const t=this.match(e);if(t)return t}}match(e){e.regex.lastIndex=this.index;const t=e.regex.exec(this.input);if(t){const s=t[0],r={type:e.type,raw:s,text:e.text?e.text(s):s,start:this.index};return e.key&&(r.key=e.key(s)),this.index+=s.length,r}}}const _a=/\/\*/uy,Pu=/[\s\S]/uy,Mu=/\*\//uy;class Uu{constructor(){this.lastIndex=0}exec(e){let t="",s,r=0;if(s=this.matchSection(_a,e))t+=s,r++;else return null;for(;r>0;)if(s=this.matchSection(_a,e))t+=s,r++;else if(s=this.matchSection(Mu,e))t+=s,r--;else if(s=this.matchSection(Pu,e))t+=s;else return null;return[t]}matchSection(e,t){e.lastIndex=this.lastIndex;const s=e.exec(t);return s&&(this.lastIndex+=s[0].length),s?s[0]:null}}class bu{constructor(e,t){this.cfg=e,this.dialectName=t,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,t){const s=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,t),...this.rulesAfterParams],r=new gu(s,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(r):r}buildRulesBeforeParams(e){var t,s,r;return this.validRules([{type:D.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:D.BLOCK_COMMENT,regex:e.nestedBlockComments?new Uu:/(\/\*[^]*?\*\/)/uy},{type:D.LINE_COMMENT,regex:_u((t=e.lineCommentTypes)!==null&&t!==void 0?t:["--"])},{type:D.QUOTED_IDENTIFIER,regex:Ca(e.identTypes)},{type:D.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:D.RESERVED_KEYWORD_PHRASE,regex:Dt((s=e.reservedKeywordPhrases)!==null&&s!==void 0?s:[],e.identChars),text:Ce},{type:D.RESERVED_DATA_TYPE_PHRASE,regex:Dt((r=e.reservedDataTypePhrases)!==null&&r!==void 0?r:[],e.identChars),text:Ce},{type:D.CASE,regex:/CASE\b/iuy,text:Ce},{type:D.END,regex:/END\b/iuy,text:Ce},{type:D.BETWEEN,regex:/BETWEEN\b/iuy,text:Ce},{type:D.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:Ce},{type:D.RESERVED_CLAUSE,regex:Dt(e.reservedClauses,e.identChars),text:Ce},{type:D.RESERVED_SELECT,regex:Dt(e.reservedSelect,e.identChars),text:Ce},{type:D.RESERVED_SET_OPERATION,regex:Dt(e.reservedSetOperations,e.identChars),text:Ce},{type:D.WHEN,regex:/WHEN\b/iuy,text:Ce},{type:D.ELSE,regex:/ELSE\b/iuy,text:Ce},{type:D.THEN,regex:/THEN\b/iuy,text:Ce},{type:D.RESERVED_JOIN,regex:Dt(e.reservedJoins,e.identChars),text:Ce},{type:D.AND,regex:/AND\b/iuy,text:Ce},{type:D.OR,regex:/OR\b/iuy,text:Ce},{type:D.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:Ce},...e.operatorKeyword?[{type:D.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:D.RESERVED_FUNCTION_NAME,regex:Dt(e.reservedFunctionNames,e.identChars),text:Ce},{type:D.RESERVED_DATA_TYPE,regex:Dt(e.reservedDataTypes,e.identChars),text:Ce},{type:D.RESERVED_KEYWORD,regex:Dt(e.reservedKeywords,e.identChars),text:Ce}])}buildRulesAfterParams(e){var t,s;return this.validRules([{type:D.VARIABLE,regex:e.variableTypes?mu(e.variableTypes):void 0},{type:D.STRING,regex:Ca(e.stringTypes)},{type:D.IDENTIFIER,regex:Du(e.identChars)},{type:D.DELIMITER,regex:/[;]/uy},{type:D.COMMA,regex:/[,]/y},{type:D.OPEN_PAREN,regex:fa("open",e.extraParens)},{type:D.CLOSE_PAREN,regex:fa("close",e.extraParens)},{type:D.OPERATOR,regex:ua(["+","-","/",">","<","=","<>","<=",">=","!=",...(t=e.operators)!==null&&t!==void 0?t:[]])},{type:D.ASTERISK,regex:/[*]/uy},{type:D.PROPERTY_ACCESS_OPERATOR,regex:ua([".",...(s=e.propertyAccessOperators)!==null&&s!==void 0?s:[]])}])}buildParamRules(e,t){var s,r,n,o,E;const l={named:t?.named||((s=e.paramTypes)===null||s===void 0?void 0:s.named)||[],quoted:t?.quoted||((r=e.paramTypes)===null||r===void 0?void 0:r.quoted)||[],numbered:t?.numbered||((n=e.paramTypes)===null||n===void 0?void 0:n.numbered)||[],positional:typeof t?.positional=="boolean"?t.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:t?.custom||((E=e.paramTypes)===null||E===void 0?void 0:E.custom)||[]};return this.validRules([{type:D.NAMED_PARAMETER,regex:io(l.named,$h(e.paramChars||e.identChars)),key:a=>a.slice(1)},{type:D.QUOTED_PARAMETER,regex:io(l.quoted,Kh(e.identTypes)),key:a=>(({tokenKey:T,quoteChar:h})=>T.replace(new RegExp(Et("\\"+h),"gu"),h))({tokenKey:a.slice(2,-1),quoteChar:a.slice(-1)})},{type:D.NUMBERED_PARAMETER,regex:io(l.numbered,"[0-9]+"),key:a=>a.slice(1)},{type:D.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(a=>{var T;return{type:D.CUSTOM_PARAMETER,regex:cs(a.regex),key:(T=a.key)!==null&&T!==void 0?T:(h=>h)}})])}validRules(e){return e.filter(t=>!!t.regex)}}const Ce=i=>mr(i.toUpperCase()),La=new Map,Bu=i=>{let e=La.get(i);return e||(e=Gu(i),La.set(i,e)),e},Gu=i=>({tokenizer:new bu(i.tokenizerOptions,i.name),formatOptions:yu(i.formatOptions)}),yu=i=>{var e;return{alwaysDenseOperators:i.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(i.onelineClauses.map(t=>[t,!0])),tabularOnelineClauses:Object.fromEntries(((e=i.tabularOnelineClauses)!==null&&e!==void 0?e:i.onelineClauses).map(t=>[t,!0]))}};function xu(i){return i.indentStyle==="tabularLeft"||i.indentStyle==="tabularRight"?" ".repeat(10):i.useTabs?"	":" ".repeat(i.tabWidth)}function us(i){return i.indentStyle==="tabularLeft"||i.indentStyle==="tabularRight"}class Hu{constructor(e){this.params=e,this.index=0}get({key:e,text:t}){return this.params?e?this.params[e]:this.params[this.index++]:t}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}var Dr={exports:{}},Fu=Dr.exports,pa;function Yu(){return pa||(pa=1,(function(i){(function(e,t){i.exports?i.exports=t():e.nearley=t()})(Fu,function(){function e(a,T,h){return this.id=++e.highestId,this.name=a,this.symbols=T,this.postprocess=h,this}e.highestId=0,e.prototype.toString=function(a){var T=typeof a>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,a).map(l).join(" ")+" ● "+this.symbols.slice(a).map(l).join(" ");return this.name+" → "+T};function t(a,T,h,A){this.rule=a,this.dot=T,this.reference=h,this.data=[],this.wantedBy=A,this.isComplete=this.dot===a.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(a){var T=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return T.left=this,T.right=a,T.isComplete&&(T.data=T.build(),T.right=void 0),T},t.prototype.build=function(){var a=[],T=this;do a.push(T.right.data),T=T.left;while(T.left);return a.reverse(),a},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function s(a,T){this.grammar=a,this.index=T,this.states=[],this.wants={},this.scannable=[],this.completed={}}s.prototype.process=function(a){for(var T=this.states,h=this.wants,A=this.completed,R=0;R<T.length;R++){var S=T[R];if(S.isComplete){if(S.finish(),S.data!==o.fail){for(var c=S.wantedBy,O=c.length;O--;){var f=c[O];this.complete(f,S)}if(S.reference===this.index){var C=S.rule.name;(this.completed[C]=this.completed[C]||[]).push(S)}}}else{var C=S.rule.symbols[S.dot];if(typeof C!="string"){this.scannable.push(S);continue}if(h[C]){if(h[C].push(S),A.hasOwnProperty(C))for(var _=A[C],O=0;O<_.length;O++){var g=_[O];this.complete(S,g)}}else h[C]=[S],this.predict(C)}}},s.prototype.predict=function(a){for(var T=this.grammar.byName[a]||[],h=0;h<T.length;h++){var A=T[h],R=this.wants[a],S=new t(A,0,this.index,R);this.states.push(S)}},s.prototype.complete=function(a,T){var h=a.nextState(T);this.states.push(h)};function r(a,T){this.rules=a,this.start=T||this.rules[0].name;var h=this.byName={};this.rules.forEach(function(A){h.hasOwnProperty(A.name)||(h[A.name]=[]),h[A.name].push(A)})}r.fromCompiled=function(A,T){var h=A.Lexer;A.ParserStart&&(T=A.ParserStart,A=A.ParserRules);var A=A.map(function(S){return new e(S.name,S.symbols,S.postprocess)}),R=new r(A,T);return R.lexer=h,R};function n(){this.reset("")}n.prototype.reset=function(a,T){this.buffer=a,this.index=0,this.line=T?T.line:1,this.lastLineBreak=T?-T.col:0},n.prototype.next=function(){if(this.index<this.buffer.length){var a=this.buffer[this.index++];return a===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:a}}},n.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},n.prototype.formatError=function(a,T){var h=this.buffer;if(typeof h=="string"){var A=h.split(`
`).slice(Math.max(0,this.line-5),this.line),R=h.indexOf(`
`,this.index);R===-1&&(R=h.length);var S=this.index-this.lastLineBreak,c=String(this.line).length;return T+=" at line "+this.line+" col "+S+`:

`,T+=A.map(function(f,C){return O(this.line-A.length+C+1,c)+" "+f},this).join(`
`),T+=`
`+O("",c+S)+`^
`,T}else return T+" at index "+(this.index-1);function O(f,C){var _=String(f);return Array(C-_.length+1).join(" ")+_}};function o(a,T,h){if(a instanceof r)var A=a,h=T;else var A=r.fromCompiled(a,T);this.grammar=A,this.options={keepHistory:!1,lexer:A.lexer||new n};for(var R in h||{})this.options[R]=h[R];this.lexer=this.options.lexer,this.lexerState=void 0;var S=new s(A,0);this.table=[S],S.wants[A.start]=[],S.predict(A.start),S.process(),this.current=0}o.fail={},o.prototype.feed=function(a){var T=this.lexer;T.reset(a,this.lexerState);for(var h;;){try{if(h=T.next(),!h)break}catch(b){var c=new s(this.grammar,this.current+1);this.table.push(c);var A=new Error(this.reportLexerError(b));throw A.offset=this.current,A.token=b.token,A}var R=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var S=this.current+1,c=new s(this.grammar,S);this.table.push(c);for(var O=h.text!==void 0?h.text:h.value,f=T.constructor===n?h.value:h,C=R.scannable,_=C.length;_--;){var g=C[_],m=g.rule.symbols[g.dot];if(m.test?m.test(f):m.type?m.type===h.type:m.literal===O){var U=g.nextState({data:f,token:h,isToken:!0,reference:S-1});c.states.push(U)}}if(c.process(),c.states.length===0){var A=new Error(this.reportError(h));throw A.offset=this.current,A.token=h,A}this.options.keepHistory&&(R.lexerState=T.save()),this.current++}return R&&(this.lexerState=T.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(a){var T,h,A=a.token;return A?(T="input "+JSON.stringify(A.text[0])+" (lexer error)",h=this.lexer.formatError(A,"Syntax error")):(T="input (lexer error)",h=a.message),this.reportErrorCommon(h,T)},o.prototype.reportError=function(a){var T=(a.type?a.type+" token: ":"")+JSON.stringify(a.value!==void 0?a.value:a),h=this.lexer.formatError(a,"Syntax error");return this.reportErrorCommon(h,T)},o.prototype.reportErrorCommon=function(a,T){var h=[];h.push(a);var A=this.table.length-2,R=this.table[A],S=R.states.filter(function(O){var f=O.rule.symbols[O.dot];return f&&typeof f!="string"});if(S.length===0)h.push("Unexpected "+T+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(R.states,h);else{h.push("Unexpected "+T+`. Instead, I was expecting to see one of the following:
`);var c=S.map(function(O){return this.buildFirstStateStack(O,[])||[O]},this);c.forEach(function(O){var f=O[0],C=f.rule.symbols[f.dot],_=this.getSymbolDisplay(C);h.push("A "+_+" based on:"),this.displayStateStack(O,h)},this)}return h.push(""),h.join(`
`)},o.prototype.displayStateStack=function(a,T){for(var h,A=0,R=0;R<a.length;R++){var S=a[R],c=S.rule.toString(S.dot);c===h?A++:(A>0&&T.push("    ^ "+A+" more lines identical to this"),A=0,T.push("    "+c)),h=c}},o.prototype.getSymbolDisplay=function(a){return E(a)},o.prototype.buildFirstStateStack=function(a,T){if(T.indexOf(a)!==-1)return null;if(a.wantedBy.length===0)return[a];var h=a.wantedBy[0],A=[a].concat(T),R=this.buildFirstStateStack(h,A);return R===null?null:[a].concat(R)},o.prototype.save=function(){var a=this.table[this.current];return a.lexerState=this.lexerState,a},o.prototype.restore=function(a){var T=a.index;this.current=T,this.table[T]=a,this.table.splice(T+1),this.lexerState=a.lexerState,this.results=this.finish()},o.prototype.rewind=function(a){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[a])},o.prototype.finish=function(){var a=[],T=this.grammar.start,h=this.table[this.table.length-1];return h.states.forEach(function(A){A.rule.name===T&&A.dot===A.rule.symbols.length&&A.reference===0&&A.data!==o.fail&&a.push(A)}),a.map(function(A){return A.data})};function E(a){var T=typeof a;if(T==="string")return a;if(T==="object"){if(a.literal)return JSON.stringify(a.literal);if(a instanceof RegExp)return"character matching "+a;if(a.type)return a.type+" token";if(a.test)return"token matching "+String(a.test);throw new Error("Unknown symbol type: "+a)}}function l(a){var T=typeof a;if(T==="string")return a;if(T==="object"){if(a.literal)return JSON.stringify(a.literal);if(a instanceof RegExp)return a.toString();if(a.type)return"%"+a.type;if(a.test)return"<"+String(a.test)+">";throw new Error("Unknown symbol type: "+a)}}return{Parser:o,Grammar:r,Rule:e}})})(Dr)),Dr.exports}var vu=Yu();const wu=wh(vu);function Vu(i){return i.map(ku).map(Wu).map(Xu).map(Ku).map($u)}const ku=(i,e,t)=>{if(kh(i.type)){const s=Ju(t,e);if(s&&s.type===D.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},i),{type:D.IDENTIFIER,text:i.raw});const r=ks(t,e);if(r&&r.type===D.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},i),{type:D.IDENTIFIER,text:i.raw})}return i},Wu=(i,e,t)=>{if(i.type===D.RESERVED_FUNCTION_NAME){const s=ks(t,e);if(!s||!Qh(s))return Object.assign(Object.assign({},i),{type:D.IDENTIFIER,text:i.raw})}return i},Xu=(i,e,t)=>{if(i.type===D.RESERVED_DATA_TYPE){const s=ks(t,e);if(s&&Qh(s))return Object.assign(Object.assign({},i),{type:D.RESERVED_PARAMETERIZED_DATA_TYPE})}return i},Ku=(i,e,t)=>{if(i.type===D.IDENTIFIER){const s=ks(t,e);if(s&&qh(s))return Object.assign(Object.assign({},i),{type:D.ARRAY_IDENTIFIER})}return i},$u=(i,e,t)=>{if(i.type===D.RESERVED_DATA_TYPE){const s=ks(t,e);if(s&&qh(s))return Object.assign(Object.assign({},i),{type:D.ARRAY_KEYWORD})}return i},Ju=(i,e)=>ks(i,e,-1),ks=(i,e,t=1)=>{let s=1;for(;i[e+s*t]&&Qu(i[e+s*t]);)s++;return i[e+s*t]},Qh=i=>i.type===D.OPEN_PAREN&&i.text==="(",qh=i=>i.type===D.OPEN_PAREN&&i.text==="[",Qu=i=>i.type===D.BLOCK_COMMENT||i.type===D.LINE_COMMENT;class jh{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,t){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){const{line:t,col:s}=Jh(this.input,e.start);return`Parse error at token: ${e.text} at line ${t} column ${s}`}has(e){return e in D}}var Y;(function(i){i.statement="statement",i.clause="clause",i.set_operation="set_operation",i.function_call="function_call",i.parameterized_data_type="parameterized_data_type",i.array_subscript="array_subscript",i.property_access="property_access",i.parenthesis="parenthesis",i.between_predicate="between_predicate",i.case_expression="case_expression",i.case_when="case_when",i.case_else="case_else",i.limit_clause="limit_clause",i.all_columns_asterisk="all_columns_asterisk",i.literal="literal",i.identifier="identifier",i.keyword="keyword",i.data_type="data_type",i.parameter="parameter",i.operator="operator",i.comma="comma",i.line_comment="line_comment",i.block_comment="block_comment",i.disable_comment="disable_comment"})(Y=Y||(Y={}));function ro(i){return i[0]}const k=new jh(i=>[]),qt=([[i]])=>i,De=i=>({type:Y.keyword,tokenType:i.type,text:i.text,raw:i.raw}),ma=i=>({type:Y.data_type,text:i.text,raw:i.raw}),ge=(i,{leading:e,trailing:t})=>(e?.length&&(i=Object.assign(Object.assign({},i),{leadingComments:e})),t?.length&&(i=Object.assign(Object.assign({},i),{trailingComments:t})),i),qu=(i,{leading:e,trailing:t})=>{if(e?.length){const[s,...r]=i;i=[ge(s,{leading:e}),...r]}if(t?.length){const s=i.slice(0,-1),r=i[i.length-1];i=[...s,ge(r,{trailing:t})]}return i},ju={Lexer:k,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:i=>i[0].concat([i[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([i])=>{const e=i[i.length-1];return e&&!e.hasSemicolon?e.children.length>0?i:i.slice(0,-1):i}},{name:"statement$subexpression$1",symbols:[k.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[k.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([i,[e]])=>({type:Y.statement,children:i,hasSemicolon:e.type===D.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:i=>i[0].concat([i[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([i,e])=>[...i,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:qt},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[k.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:ro},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[k.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([i,e,t,s])=>{if(s){const[r,n]=s;return{type:Y.limit_clause,limitKw:ge(De(i),{trailing:e}),offset:t,count:n}}else return{type:Y.limit_clause,limitKw:ge(De(i),{trailing:e}),count:t}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[k.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([i,[e,t]])=>({type:Y.clause,nameKw:De(i),children:[e,...t]})},{name:"select_clause",symbols:[k.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([i])=>({type:Y.clause,nameKw:De(i),children:[]})},{name:"all_columns_asterisk",symbols:[k.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:Y.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"other_clause",symbols:[k.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([i,e])=>({type:Y.clause,nameKw:De(i),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"set_operation",symbols:[k.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([i,e])=>({type:Y.set_operation,nameKw:De(i),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:i=>i[0].concat([i[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:ro},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:i=>i[0].concat([i[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([i,e])=>[i,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:i=>i[0].concat([i[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([i,e])=>[i,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([i,e])=>ge(i,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([i,e])=>ge(e,{leading:i})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([i,e])=>ge(e,{leading:i})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:qt},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:qt},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:qt},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:qt},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:qt},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:qt},{name:"array_subscript",symbols:[k.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([i,e,t])=>({type:Y.array_subscript,array:ge({type:Y.identifier,quoted:!1,text:i.text},{trailing:e}),parenthesis:t})},{name:"array_subscript",symbols:[k.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([i,e,t])=>({type:Y.array_subscript,array:ge(De(i),{trailing:e}),parenthesis:t})},{name:"function_call",symbols:[k.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([i,e,t])=>({type:Y.function_call,nameKw:ge(De(i),{trailing:e}),parenthesis:t})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([i,e,t])=>({type:Y.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([i,e,t])=>({type:Y.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:i=>i[0].concat([i[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([i,e,t])=>({type:Y.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",k.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([i,e,t,s,[r]])=>({type:Y.property_access,object:ge(i,{trailing:e}),operator:t.text,property:ge(r,{leading:s})})},{name:"between_predicate",symbols:[k.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",k.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([i,e,t,s,r,n,o])=>({type:Y.between_predicate,betweenKw:De(i),expr1:qu(t,{leading:e,trailing:s}),andKw:De(r),expr2:[ge(o,{leading:n})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:ro},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:i=>i[0].concat([i[1]])},{name:"case_expression",symbols:[k.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",k.has("END")?{type:"END"}:END],postprocess:([i,e,t,s,r])=>({type:Y.case_expression,caseKw:ge(De(i),{trailing:e}),endKw:De(r),expr:t||[],clauses:s})},{name:"case_clause",symbols:[k.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",k.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([i,e,t,s,r,n])=>({type:Y.case_when,whenKw:ge(De(i),{trailing:e}),thenKw:ge(De(s),{trailing:r}),condition:t,result:n})},{name:"case_clause",symbols:[k.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([i,e,t])=>({type:Y.case_else,elseKw:ge(De(i),{trailing:e}),result:t})},{name:"comma$subexpression$1",symbols:[k.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[i]])=>({type:Y.comma})},{name:"asterisk$subexpression$1",symbols:[k.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[i]])=>({type:Y.operator,text:i.text})},{name:"operator$subexpression$1",symbols:[k.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[i]])=>({type:Y.operator,text:i.text})},{name:"identifier$subexpression$1",symbols:[k.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[k.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[k.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[i]])=>({type:Y.identifier,quoted:i.type!=="IDENTIFIER",text:i.text})},{name:"parameter$subexpression$1",symbols:[k.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[k.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[k.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[k.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[k.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[i]])=>({type:Y.parameter,key:i.key,text:i.text})},{name:"literal$subexpression$1",symbols:[k.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[k.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[i]])=>({type:Y.literal,text:i.text})},{name:"keyword$subexpression$1",symbols:[k.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[k.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[k.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[i]])=>De(i)},{name:"data_type$subexpression$1",symbols:[k.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[k.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[i]])=>ma(i)},{name:"data_type",symbols:[k.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([i,e,t])=>({type:Y.parameterized_data_type,dataType:ge(ma(i),{trailing:e}),parenthesis:t})},{name:"logic_operator$subexpression$1",symbols:[k.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[k.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[k.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[i]])=>De(i)},{name:"other_keyword$subexpression$1",symbols:[k.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[k.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[k.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[k.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[i]])=>De(i)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:i=>i[0].concat([i[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([i])=>i},{name:"comment",symbols:[k.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([i])=>({type:Y.line_comment,text:i.text,precedingWhitespace:i.precedingWhitespace})},{name:"comment",symbols:[k.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([i])=>({type:Y.block_comment,text:i.text,precedingWhitespace:i.precedingWhitespace})},{name:"comment",symbols:[k.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([i])=>({type:Y.disable_comment,text:i.text,precedingWhitespace:i.precedingWhitespace})}],ParserStart:"main"},{Parser:zu,Grammar:Zu}=wu;function ed(i){let e={};const t=new jh(r=>[...Vu(i.tokenize(r,e)),Vh(r.length)]),s=new zu(Zu.fromCompiled(ju),{lexer:t});return{parse:(r,n)=>{e=n;const{results:o}=s.feed(r);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var L;(function(i){i[i.SPACE=0]="SPACE",i[i.NO_SPACE=1]="NO_SPACE",i[i.NO_NEWLINE=2]="NO_NEWLINE",i[i.NEWLINE=3]="NEWLINE",i[i.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",i[i.INDENT=5]="INDENT",i[i.SINGLE_INDENT=6]="SINGLE_INDENT"})(L=L||(L={}));class zh{constructor(e){this.indentation=e,this.items=[]}add(...e){for(const t of e)switch(t){case L.SPACE:this.items.push(L.SPACE);break;case L.NO_SPACE:this.trimHorizontalWhitespace();break;case L.NO_NEWLINE:this.trimWhitespace();break;case L.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(L.NEWLINE);break;case L.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(L.MANDATORY_NEWLINE);break;case L.INDENT:this.addIndentation();break;case L.SINGLE_INDENT:this.items.push(L.SINGLE_INDENT);break;default:this.items.push(t)}}trimHorizontalWhitespace(){for(;td(ai(this.items));)this.items.pop()}trimWhitespace(){for(;sd(ai(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(ai(this.items)){case L.NEWLINE:this.items.pop(),this.items.push(e);break;case L.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push(L.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case L.SPACE:return" ";case L.NEWLINE:case L.MANDATORY_NEWLINE:return`
`;case L.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}}const td=i=>i===L.SPACE||i===L.SINGLE_INDENT,sd=i=>i===L.SPACE||i===L.SINGLE_INDENT||i===L.NEWLINE;function Da(i,e){if(e==="standard")return i;let t=[];return i.length>=10&&i.includes(" ")&&([i,...t]=i.split(" ")),e==="tabularLeft"?i=i.padEnd(9," "):i=i.padStart(9," "),i+["",...t].join(" ")}function ga(i){return HO(i)||i===D.RESERVED_CLAUSE||i===D.RESERVED_SELECT||i===D.RESERVED_SET_OPERATION||i===D.RESERVED_JOIN||i===D.LIMIT}const no="top-level",id="block-level";class Zh{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(no)}increaseBlockLevel(){this.indentTypes.push(id)}decreaseTopLevel(){this.indentTypes.length>0&&ai(this.indentTypes)===no&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===no;);}}class rd extends zh{constructor(e){super(new Zh("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(t=>this.addToLength(t)),this.length>this.expressionWidth)throw new wo;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===L.MANDATORY_NEWLINE||e===L.NEWLINE)throw new wo;e===L.INDENT||e===L.SINGLE_INDENT||e===L.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===L.NO_NEWLINE||e===L.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}}class wo extends Error{}class vr{constructor({cfg:e,dialectCfg:t,params:s,layout:r,inline:n=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=t,this.inline=n,this.params=s,this.layout=r}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case Y.function_call:return this.formatFunctionCall(e);case Y.parameterized_data_type:return this.formatParameterizedDataType(e);case Y.array_subscript:return this.formatArraySubscript(e);case Y.property_access:return this.formatPropertyAccess(e);case Y.parenthesis:return this.formatParenthesis(e);case Y.between_predicate:return this.formatBetweenPredicate(e);case Y.case_expression:return this.formatCaseExpression(e);case Y.case_when:return this.formatCaseWhen(e);case Y.case_else:return this.formatCaseElse(e);case Y.clause:return this.formatClause(e);case Y.set_operation:return this.formatSetOperation(e);case Y.limit_clause:return this.formatLimitClause(e);case Y.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case Y.literal:return this.formatLiteral(e);case Y.identifier:return this.formatIdentifier(e);case Y.parameter:return this.formatParameter(e);case Y.operator:return this.formatOperator(e);case Y.comma:return this.formatComma(e);case Y.line_comment:return this.formatLineComment(e);case Y.block_comment:return this.formatBlockComment(e);case Y.disable_comment:return this.formatBlockComment(e);case Y.data_type:return this.formatDataType(e);case Y.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let t;switch(e.array.type){case Y.data_type:t=this.showDataType(e.array);break;case Y.keyword:t=this.showKw(e.array);break;default:t=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(t)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add(L.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){const t=this.formatInlineExpression(e.children);t?(this.layout.add(e.openParen),this.layout.add(...t.getLayoutItems()),this.layout.add(L.NO_SPACE,e.closeParen,L.SPACE)):(this.layout.add(e.openParen,L.NEWLINE),us(this.cfg)?(this.layout.add(L.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add(L.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add(L.NEWLINE,L.INDENT,e.closeParen,L.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),L.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add(L.NO_SPACE,L.SPACE,this.showNonTabularKw(e.andKw),L.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add(L.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add(L.NEWLINE,L.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add(L.NEWLINE,L.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add(L.NEWLINE,L.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):us(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return us(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e.nameKw),L.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add(L.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e.nameKw),L.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e.nameKw),L.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e.nameKw),L.NEWLINE),this.layout.add(L.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),us(this.cfg)?this.layout.add(L.SPACE):this.layout.add(L.NEWLINE,L.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add(L.NO_SPACE,",",L.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",L.SPACE)}formatLiteral(e){this.layout.add(e.text,L.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),L.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),L.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add(L.NO_SPACE,e):e===":"?this.layout.add(L.NO_SPACE,e,L.SPACE):this.layout.add(e,L.SPACE)}formatComma(e){this.inline?this.layout.add(L.NO_SPACE,",",L.SPACE):this.layout.add(L.NO_SPACE,",",L.NEWLINE,L.INDENT)}withComments(e,t){this.formatComments(e.leadingComments),t(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(t=>{t.type===Y.line_comment?this.formatLineComment(t):this.formatBlockComment(t)})}formatLineComment(e){so(e.precedingWhitespace||"")?this.layout.add(L.NEWLINE,L.INDENT,e.text,L.MANDATORY_NEWLINE,L.INDENT):this.layout.getLayoutItems().length>0?this.layout.add(L.NO_NEWLINE,L.SPACE,e.text,L.MANDATORY_NEWLINE,L.INDENT):this.layout.add(e.text,L.MANDATORY_NEWLINE,L.INDENT)}formatBlockComment(e){e.type===Y.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(t=>{this.layout.add(L.NEWLINE,L.INDENT,t)}),this.layout.add(L.NEWLINE,L.INDENT)):this.layout.add(e.text,L.SPACE)}isMultilineBlockComment(e){return so(e.text)||so(e.precedingWhitespace||"")}isDocComment(e){const t=e.split(/\n/);return/^\/\*\*?$/.test(t[0])&&t.slice(1,t.length-1).every(s=>/^\s*\*/.test(s))&&/^\s*\*\/$/.test(ai(t))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(t=>/^\s*\*/.test(t)?" "+t.replace(/^\s*/,""):t):e.split(/\n/).map(t=>t.replace(/^\s*/,""))}formatSubExpression(e){return new vr({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){const t=this.params.getPositionalParameterIndex();try{return new vr({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new rd(this.cfg.expressionWidth),inline:!0}).format(e)}catch(s){if(s instanceof wo){this.params.setPositionalParameterIndex(t);return}else throw s}}formatKeywordNode(e){switch(e.tokenType){case D.RESERVED_JOIN:return this.formatJoin(e);case D.AND:case D.OR:case D.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){us(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e),L.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e),L.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),L.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?us(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e),L.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(L.NEWLINE,L.INDENT,this.showKw(e),L.SPACE):this.layout.add(this.showKw(e),L.NEWLINE,L.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),L.SPACE)}showKw(e){return ga(e.tokenType)?Da(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return mr(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return ga(e.tokenType)?Da(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return mr(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return mr(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}class nd{constructor(e,t){this.dialect=e,this.cfg=t,this.params=new Hu(this.cfg.params)}format(e){const t=this.parse(e);return this.formatAst(t).trimEnd()}parse(e){return ed(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(t=>this.formatStatement(t)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){const t=new vr({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new zh(new Zh(xu(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?t.add(L.NEWLINE,";"):t.add(L.NO_NEWLINE,";")),t.toString()}}class gr extends Error{}function od(i){const e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(const t of e)if(t in i)throw new gr(`${t} config is no more supported.`);if(i.expressionWidth<=0)throw new gr(`expressionWidth config must be positive number. Received ${i.expressionWidth} instead.`);if(i.params&&!Ed(i.params)&&console.warn('WARNING: All "params" option values should be strings.'),i.paramTypes&&!ld(i.paramTypes))throw new gr("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return i}function Ed(i){return(i instanceof Array?i:Object.values(i)).every(t=>typeof t=="string")}function ld(i){return i.custom&&Array.isArray(i.custom)?i.custom.every(e=>e.regex!==""):!0}var ad=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};const eA={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},Td=Object.keys(eA),hd={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},Ad=(i,e={})=>{if(typeof e.language=="string"&&!Td.includes(e.language))throw new gr(`Unsupported SQL dialect: ${e.language}`);const t=eA[e.language||"sql"];return Rd(i,Object.assign(Object.assign({},e),{dialect:fu[t]}))},Rd=(i,e)=>{var{dialect:t}=e,s=ad(e,["dialect"]);if(typeof i!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof i);const r=od(Object.assign(Object.assign({},hd),s));return new nd(Bu(t),r).format(i)};var oo={exports:{}},Eo,Pa;function Sd(){if(Pa)return Eo;Pa=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Eo=i,Eo}var lo,Ma;function cd(){if(Ma)return lo;Ma=1;var i=Sd();function e(){}function t(){}return t.resetWarningCache=e,lo=function(){function s(o,E,l,a,T,h){if(h!==i){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}s.isRequired=s;function r(){return s}var n={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return n.PropTypes=n,n},lo}var Ua;function Od(){return Ua||(Ua=1,oo.exports=cd()()),oo.exports}var Nd=Od();const xt=wh(Nd);let Vo=[],tA=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?tA:Vo).push(t=t+i[e])})();function Id(i){if(i<768)return!1;for(let e=0,t=Vo.length;;){let s=e+t>>1;if(i<Vo[s])t=s;else if(i>=tA[s])e=s+1;else return!0;if(e==t)return!1}}function ba(i){return i>=127462&&i<=127487}const Ba=8205;function fd(i,e,t=!0,s=!0){return(t?sA:ud)(i,e,s)}function sA(i,e,t){if(e==i.length)return e;e&&iA(i.charCodeAt(e))&&rA(i.charCodeAt(e-1))&&e--;let s=ao(i,e);for(e+=Ga(s);e<i.length;){let r=ao(i,e);if(s==Ba||r==Ba||t&&Id(r))e+=Ga(r),s=r;else if(ba(r)){let n=0,o=e-2;for(;o>=0&&ba(ao(i,o));)n++,o-=2;if(n%2==0)break;e+=2}else break}return e}function ud(i,e,t){for(;e>0;){let s=sA(i,e-2,t);if(s<e)return s;e--}return 0}function ao(i,e){let t=i.charCodeAt(e);if(!rA(t)||e+1==i.length)return t;let s=i.charCodeAt(e+1);return iA(s)?(t-55296<<10)+(s-56320)+65536:t}function iA(i){return i>=56320&&i<57344}function rA(i){return i>=55296&&i<56320}function Ga(i){return i<65536?1:2}class te{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=ys(this,e,t);let r=[];return this.decompose(0,e,r,2),s.length&&s.decompose(0,s.length,r,3),this.decompose(t,this.length,r,1),Nt.from(r,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ys(this,e,t);let s=[];return this.decompose(e,t,s,0),Nt.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),r=new Ti(this),n=new Ti(e);for(let o=t,E=t;;){if(r.next(o),n.next(o),o=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(E+=r.value.length,r.done||E>=s)return!0}}iter(e=1){return new Ti(this,e)}iterRange(e,t=this.length){return new nA(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;s=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new oA(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?te.empty:e.length<=32?new Se(e):Nt.from(Se.split(e,[]))}}class Se extends te{constructor(e,t=dd(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,r){for(let n=0;;n++){let o=this.text[n],E=r+o.length;if((t?s:E)>=e)return new Cd(r,E,s,o);r=E+1,s++}}decompose(e,t,s,r){let n=e<=0&&t>=this.length?this:new Se(ya(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=s.pop(),E=Pr(n.text,o.text.slice(),0,n.length);if(E.length<=32)s.push(new Se(E,o.length+n.length));else{let l=E.length>>1;s.push(new Se(E.slice(0,l)),new Se(E.slice(l)))}}else s.push(n)}replace(e,t,s){if(!(s instanceof Se))return super.replace(e,t,s);[e,t]=ys(this,e,t);let r=Pr(this.text,Pr(s.text,ya(this.text,0,e)),t),n=this.length+s.length-(t-e);return r.length<=32?new Se(r,n):Nt.from(Se.split(r,[]),n)}sliceString(e,t=this.length,s=`
`){[e,t]=ys(this,e,t);let r="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let E=this.text[o],l=n+E.length;n>e&&o&&(r+=s),e<l&&t>n&&(r+=E.slice(Math.max(0,e-n),t-n)),n=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],r=-1;for(let n of e)s.push(n),r+=n.length+1,s.length==32&&(t.push(new Se(s,r)),s=[],r=-1);return r>-1&&t.push(new Se(s,r)),t}}class Nt extends te{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,r){for(let n=0;;n++){let o=this.children[n],E=r+o.length,l=s+o.lines-1;if((t?l:E)>=e)return o.lineInner(e,t,s,r);r=E+1,s=l+1}}decompose(e,t,s,r){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let E=this.children[n],l=o+E.length;if(e<=l&&t>=o){let a=r&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!a?s.push(E):E.decompose(e-o,t-o,s,a)}o=l+1}}replace(e,t,s){if([e,t]=ys(this,e,t),s.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],E=n+o.length;if(e>=n&&t<=E){let l=o.replace(e-n,t-n,s),a=this.lines-o.lines+l.lines;if(l.lines<a>>4&&l.lines>a>>6){let T=this.children.slice();return T[r]=l,new Nt(T,this.length-(t-e)+s.length)}return super.replace(n,E,l)}n=E+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=ys(this,e,t);let r="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let E=this.children[n],l=o+E.length;o>e&&n&&(r+=s),e<l&&t>o&&(r+=E.sliceString(e-o,t-o,s)),o=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Nt))return 0;let s=0,[r,n,o,E]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,n+=t){if(r==o||n==E)return s;let l=this.children[r],a=e.children[n];if(l!=a)return s+l.scanIdentical(a,t);s+=l.length+1}}static from(e,t=e.reduce((s,r)=>s+r.length+1,-1)){let s=0;for(let R of e)s+=R.lines;if(s<32){let R=[];for(let S of e)S.flatten(R);return new Se(R,t)}let r=Math.max(32,s>>5),n=r<<1,o=r>>1,E=[],l=0,a=-1,T=[];function h(R){let S;if(R.lines>n&&R instanceof Nt)for(let c of R.children)h(c);else R.lines>o&&(l>o||!l)?(A(),E.push(R)):R instanceof Se&&l&&(S=T[T.length-1])instanceof Se&&R.lines+S.lines<=32?(l+=R.lines,a+=R.length+1,T[T.length-1]=new Se(S.text.concat(R.text),S.length+1+R.length)):(l+R.lines>r&&A(),l+=R.lines,a+=R.length+1,T.push(R))}function A(){l!=0&&(E.push(T.length==1?T[0]:Nt.from(T,a)),a=-1,l=T.length=0)}for(let R of e)h(R);return A(),E.length==1?E[0]:new Nt(E,t)}}te.empty=new Se([""],0);function dd(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Pr(i,e,t=0,s=1e9){for(let r=0,n=0,o=!0;n<i.length&&r<=s;n++){let E=i[n],l=r+E.length;l>=t&&(l>s&&(E=E.slice(0,s-r)),r<t&&(E=E.slice(t-r)),o?(e[e.length-1]+=E,o=!1):e.push(E)),r=l+1}return e}function ya(i,e,t){return Pr(i,[""],e,t)}class Ti{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Se?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,r=this.nodes[s],n=this.offsets[s],o=n>>1,E=r instanceof Se?r.text.length:r.children.length;if(o==(t>0?E:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Se){let l=r.text[o+(t<0?-1:0)];if(this.offsets[s]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Se?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class nA{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new Ti(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=s?r:t<0?r.slice(r.length-s):r.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class oA{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=function(){return this.iter()},Ti.prototype[Symbol.iterator]=nA.prototype[Symbol.iterator]=oA.prototype[Symbol.iterator]=function(){return this});class Cd{constructor(e,t,s,r){this.from=e,this.to=t,this.number=s,this.text=r}get length(){return this.to-this.from}}function ys(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function Be(i,e,t=!0,s=!0){return fd(i,e,t,s)}function _d(i){return i>=56320&&i<57344}function Ld(i){return i>=55296&&i<56320}function ke(i,e){let t=i.charCodeAt(e);if(!Ld(t)||e+1==i.length)return t;let s=i.charCodeAt(e+1);return _d(s)?(t-55296<<10)+(s-56320)+65536:t}function kE(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function It(i){return i<65536?1:2}const ko=/\r\n?|\n/;var Ye=(function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i})(Ye||(Ye={}));class Ct{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,r=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(s,r,n),r+=n):r+=o,s+=n}}iterChangedRanges(e,t=!1){Wo(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],r=this.sections[t++];r<0?e.push(s,r):e.push(r,s)}return new Ct(e)}composeDesc(e){return this.empty?e:e.empty?this:EA(this,e)}mapDesc(e,t=!1){return e.empty?this:Xo(this,e,t)}mapPos(e,t=-1,s=Ye.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let E=this.sections[o++],l=this.sections[o++],a=r+E;if(l<0){if(a>e)return n+(e-r);n+=E}else{if(s!=Ye.Simple&&a>=e&&(s==Ye.TrackDel&&r<e&&a>e||s==Ye.TrackBefore&&r<e||s==Ye.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!E)return e==r||t<0?n:n+l;n+=l}r=a}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return n}touchesRange(e,t=e){for(let s=0,r=0;s<this.sections.length&&r<=t;){let n=this.sections[s++],o=this.sections[s++],E=r+n;if(o>=0&&r<=t&&E>=e)return r<e&&E>t?"cover":!0;r=E}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+s+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ct(e)}static create(e){return new Ct(e)}}class _e extends Ct{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Wo(this,(t,s,r,n,o)=>e=e.replace(r,r+(s-t),o),!1),e}mapDesc(e,t=!1){return Xo(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let r=0,n=0;r<t.length;r+=2){let o=t[r],E=t[r+1];if(E>=0){t[r]=E,t[r+1]=o;let l=r>>1;for(;s.length<l;)s.push(te.empty);s.push(o?e.slice(n,n+o):te.empty)}n+=o}return new _e(t,s)}compose(e){return this.empty?e:e.empty?this:EA(this,e,!0)}map(e,t=!1){return e.empty?this:Xo(this,e,t,!0)}iterChanges(e,t=!1){Wo(this,e,t)}get desc(){return Ct.create(this.sections)}filter(e){let t=[],s=[],r=[],n=new Ni(this);e:for(let o=0,E=0;;){let l=o==e.length?1e9:e[o++];for(;E<l||E==l&&n.len==0;){if(n.done)break e;let T=Math.min(n.len,l-E);ye(r,T,-1);let h=n.ins==-1?-1:n.off==0?n.ins:0;ye(t,T,h),h>0&&vt(s,t,n.text),n.forward(T),E+=T}let a=e[o++];for(;E<a;){if(n.done)break e;let T=Math.min(n.len,a-E);ye(t,T,-1),ye(r,T,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(T),E+=T}}return{changes:new _e(t,s),filtered:Ct.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],r=this.sections[t+1];r<0?e.push(s):r==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let r=[],n=[],o=0,E=null;function l(T=!1){if(!T&&!r.length)return;o<t&&ye(r,t-o,-1);let h=new _e(r,n);E=E?E.compose(h.map(E)):h,r=[],n=[],o=0}function a(T){if(Array.isArray(T))for(let h of T)a(h);else if(T instanceof _e){if(T.length!=t)throw new RangeError(`Mismatched change set length (got ${T.length}, expected ${t})`);l(),E=E?E.compose(T.map(E)):T}else{let{from:h,to:A=h,insert:R}=T;if(h>A||h<0||A>t)throw new RangeError(`Invalid change range ${h} to ${A} (in doc of length ${t})`);let S=R?typeof R=="string"?te.of(R.split(s||ko)):R:te.empty,c=S.length;if(h==A&&c==0)return;h<o&&l(),h>o&&ye(r,h-o,-1),ye(r,A-h,c),vt(n,r,S),o=A}}return a(e),l(!E),E}static empty(e){return new _e(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let r=0;r<e.length;r++){let n=e[r];if(typeof n=="number")t.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((o,E)=>E&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)t.push(n[0],0);else{for(;s.length<r;)s.push(te.empty);s[r]=te.of(n.slice(1)),t.push(n[0],s[r].length)}}}return new _e(t,s)}static createSet(e,t){return new _e(e,t)}}function ye(i,e,t,s=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:r>=0&&e==0&&i[r]==0?i[r+1]+=t:s?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function vt(i,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<s;)i.push(te.empty);i.push(t)}}function Wo(i,e,t){let s=i.inserted;for(let r=0,n=0,o=0;o<i.sections.length;){let E=i.sections[o++],l=i.sections[o++];if(l<0)r+=E,n+=E;else{let a=r,T=n,h=te.empty;for(;a+=E,T+=l,l&&s&&(h=h.append(s[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)E=i.sections[o++],l=i.sections[o++];e(r,a,n,T,h),r=a,n=T}}}function Xo(i,e,t,s=!1){let r=[],n=s?[]:null,o=new Ni(i),E=new Ni(e);for(let l=-1;;){if(o.done&&E.len||E.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&E.ins==-1){let a=Math.min(o.len,E.len);ye(r,a,-1),o.forward(a),E.forward(a)}else if(E.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(E.len<o.len||E.len==o.len&&!t))){let a=E.len;for(ye(r,E.ins,-1);a;){let T=Math.min(o.len,a);o.ins>=0&&l<o.i&&o.len<=T&&(ye(r,0,o.ins),n&&vt(n,r,o.text),l=o.i),o.forward(T),a-=T}E.next()}else if(o.ins>=0){let a=0,T=o.len;for(;T;)if(E.ins==-1){let h=Math.min(T,E.len);a+=h,T-=h,E.forward(h)}else if(E.ins==0&&E.len<T)T-=E.len,E.next();else break;ye(r,a,l<o.i?o.ins:0),n&&l<o.i&&vt(n,r,o.text),l=o.i,o.forward(o.len-T)}else{if(o.done&&E.done)return n?_e.createSet(r,n):Ct.create(r);throw new Error("Mismatched change set lengths")}}}function EA(i,e,t=!1){let s=[],r=t?[]:null,n=new Ni(i),o=new Ni(e);for(let E=!1;;){if(n.done&&o.done)return r?_e.createSet(s,r):Ct.create(s);if(n.ins==0)ye(s,n.len,0,E),n.next();else if(o.len==0&&!o.done)ye(s,0,o.ins,E),r&&vt(r,s,o.text),o.next();else{if(n.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(n.len2,o.len),a=s.length;if(n.ins==-1){let T=o.ins==-1?-1:o.off?0:o.ins;ye(s,l,T,E),r&&T&&vt(r,s,o.text)}else o.ins==-1?(ye(s,n.off?0:n.len,l,E),r&&vt(r,s,n.textBit(l))):(ye(s,n.off?0:n.len,o.off?0:o.ins,E),r&&!o.off&&vt(r,s,o.text));E=(n.ins>l||o.ins>=0&&o.len>l)&&(E||s.length>a),n.forward2(l),o.forward(l)}}}}class Ni{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?te.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?te.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class rs{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,r;return this.empty?s=r=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),s==this.from&&r==this.to?this:new rs(s,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return p.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return p.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return p.range(e.anchor,e.head)}static create(e,t,s){return new rs(e,t,s)}}class p{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:p.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new p([this.main],0)}addRange(e,t=!0){return p.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,p.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new p(e.ranges.map(t=>rs.fromJSON(t)),e.main)}static single(e,t=e){return new p([p.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,r=0;r<e.length;r++){let n=e[r];if(n.empty?n.from<=s:n.from<s)return p.normalized(e.slice(),t);s=n.to}return new p(e,t)}static cursor(e,t=0,s,r){return rs.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(r??16777215)<<6)}static range(e,t,s,r){let n=(s??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?rs.create(t,e,48|n):rs.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let s=e[t];e.sort((r,n)=>r.from-n.from),t=e.indexOf(s);for(let r=1;r<e.length;r++){let n=e[r],o=e[r-1];if(n.empty?n.from<=o.to:n.from<o.to){let E=o.from,l=Math.max(n.to,o.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?p.range(l,E):p.range(E,l))}}return new p(e,t)}}function lA(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let WE=0;class x{constructor(e,t,s,r,n){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=r,this.id=WE++,this.default=e([]),this.extensions=typeof n=="function"?n(this):n}get reader(){return this}static define(e={}){return new x(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:XE),!!e.static,e.enables)}of(e){return new Mr([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function XE(i,e){return i==e||i.length==e.length&&i.every((t,s)=>t===e[s])}class Mr{constructor(e,t,s,r){this.dependencies=e,this.facet=t,this.type=s,this.value=r,this.id=WE++}dynamicSlot(e){var t;let s=this.value,r=this.facet.compareInput,n=this.id,o=e[n]>>1,E=this.type==2,l=!1,a=!1,T=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?a=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&T.push(e[h.id]);return{create(h){return h.values[o]=s(h),1},update(h,A){if(l&&A.docChanged||a&&(A.docChanged||A.selection)||Ko(h,T)){let R=s(h);if(E?!xa(R,h.values[o],r):!r(R,h.values[o]))return h.values[o]=R,1}return 0},reconfigure:(h,A)=>{let R,S=A.config.address[n];if(S!=null){let c=Vr(A,S);if(this.dependencies.every(O=>O instanceof x?A.facet(O)===h.facet(O):O instanceof Ge?A.field(O,!1)==h.field(O,!1):!0)||(E?xa(R=s(h),c,r):r(R=s(h),c)))return h.values[o]=c,0}else R=s(h);return h.values[o]=R,1}}}}function xa(i,e,t){if(i.length!=e.length)return!1;for(let s=0;s<i.length;s++)if(!t(i[s],e[s]))return!1;return!0}function Ko(i,e){let t=!1;for(let s of e)hi(i,s)&1&&(t=!0);return t}function pd(i,e,t){let s=t.map(l=>i[l.id]),r=t.map(l=>l.type),n=s.filter(l=>!(l&1)),o=i[e.id]>>1;function E(l){let a=[];for(let T=0;T<s.length;T++){let h=Vr(l,s[T]);if(r[T]==2)for(let A of h)a.push(A);else a.push(h)}return e.combine(a)}return{create(l){for(let a of s)hi(l,a);return l.values[o]=E(l),1},update(l,a){if(!Ko(l,n))return 0;let T=E(l);return e.compare(T,l.values[o])?0:(l.values[o]=T,1)},reconfigure(l,a){let T=Ko(l,s),h=a.config.facets[e.id],A=a.facet(e);if(h&&!T&&XE(t,h))return l.values[o]=A,0;let R=E(l);return e.compare(R,A)?(l.values[o]=A,0):(l.values[o]=R,1)}}}const er=x.define({static:!0});class Ge{constructor(e,t,s,r,n){this.id=e,this.createF=t,this.updateF=s,this.compareF=r,this.spec=n,this.provides=void 0}static define(e){let t=new Ge(WE++,e.create,e.update,e.compare||((s,r)=>s===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(er).find(s=>s.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,r)=>{let n=s.values[t],o=this.updateF(n,r);return this.compareF(n,o)?0:(s.values[t]=o,1)},reconfigure:(s,r)=>{let n=s.facet(er),o=r.facet(er),E;return(E=n.find(l=>l.field==this))&&E!=o.find(l=>l.field==this)?(s.values[t]=E.create(s),1):r.config.address[this.id]!=null?(s.values[t]=r.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,er.of({field:this,create:e})]}get extension(){return this}}const ss={lowest:4,low:3,default:2,high:1,highest:0};function ei(i){return e=>new aA(e,i)}const Os={highest:ei(ss.highest),high:ei(ss.high),default:ei(ss.default),low:ei(ss.low),lowest:ei(ss.lowest)};class aA{constructor(e,t){this.inner=e,this.prec=t}}class On{of(e){return new $o(this,e)}reconfigure(e){return On.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class $o{constructor(e,t){this.compartment=e,this.inner=t}}class wr{constructor(e,t,s,r,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let r=[],n=Object.create(null),o=new Map;for(let A of md(e,t,o))A instanceof Ge?r.push(A):(n[A.facet.id]||(n[A.facet.id]=[])).push(A);let E=Object.create(null),l=[],a=[];for(let A of r)E[A.id]=a.length<<1,a.push(R=>A.slot(R));let T=s?.config.facets;for(let A in n){let R=n[A],S=R[0].facet,c=T&&T[A]||[];if(R.every(O=>O.type==0))if(E[S.id]=l.length<<1|1,XE(c,R))l.push(s.facet(S));else{let O=S.combine(R.map(f=>f.value));l.push(s&&S.compare(O,s.facet(S))?s.facet(S):O)}else{for(let O of R)O.type==0?(E[O.id]=l.length<<1|1,l.push(O.value)):(E[O.id]=a.length<<1,a.push(f=>O.dynamicSlot(f)));E[S.id]=a.length<<1,a.push(O=>pd(O,S,R))}}let h=a.map(A=>A(E));return new wr(e,o,h,E,l,n)}}function md(i,e,t){let s=[[],[],[],[],[]],r=new Map;function n(o,E){let l=r.get(o);if(l!=null){if(l<=E)return;let a=s[l].indexOf(o);a>-1&&s[l].splice(a,1),o instanceof $o&&t.delete(o.compartment)}if(r.set(o,E),Array.isArray(o))for(let a of o)n(a,E);else if(o instanceof $o){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let a=e.get(o.compartment)||o.inner;t.set(o.compartment,a),n(a,E)}else if(o instanceof aA)n(o.inner,o.prec);else if(o instanceof Ge)s[E].push(o),o.provides&&n(o.provides,E);else if(o instanceof Mr)s[E].push(o),o.facet.extensions&&n(o.facet.extensions,ss.default);else{let a=o.extension;if(!a)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(a,E)}}return n(i,ss.default),s.reduce((o,E)=>o.concat(E))}function hi(i,e){if(e&1)return 2;let t=e>>1,s=i.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Vr(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const TA=x.define(),Jo=x.define({combine:i=>i.some(e=>e),static:!0}),hA=x.define({combine:i=>i.length?i[0]:void 0,static:!0}),AA=x.define(),RA=x.define(),SA=x.define(),cA=x.define({combine:i=>i.length?i[0]:!1});class Lt{constructor(e,t){this.type=e,this.value=t}static define(){return new Dd}}class Dd{of(e){return new Lt(this,e)}}class gd{constructor(e){this.map=e}of(e){return new Q(this,e)}}class Q{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Q(this.type,t)}is(e){return this.type==e}static define(e={}){return new gd(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let r of e){let n=r.map(t);n&&s.push(n)}return s}}Q.reconfigure=Q.define();Q.appendConfig=Q.define();class Le{constructor(e,t,s,r,n,o){this.startState=e,this.changes=t,this.selection=s,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,s&&lA(s,t.newLength),n.some(E=>E.type==Le.time)||(this.annotations=n.concat(Le.time.of(Date.now())))}static create(e,t,s,r,n,o){return new Le(e,t,s,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Le.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Le.time=Lt.define();Le.userEvent=Lt.define();Le.addToHistory=Lt.define();Le.remote=Lt.define();function Pd(i,e){let t=[];for(let s=0,r=0;;){let n,o;if(s<i.length&&(r==e.length||e[r]>=i[s]))n=i[s++],o=i[s++];else if(r<e.length)n=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<n?t.push(n,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function OA(i,e,t){var s;let r,n,o;return t?(r=e.changes,n=_e.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),n=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(n):(s=i.selection)===null||s===void 0?void 0:s.map(r),effects:Q.mapEffects(i.effects,r).concat(Q.mapEffects(e.effects,n)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Qo(i,e,t){let s=e.selection,r=gs(e.annotations);return e.userEvent&&(r=r.concat(Le.userEvent.of(e.userEvent))),{changes:e.changes instanceof _e?e.changes:_e.of(e.changes||[],t,i.facet(hA)),selection:s&&(s instanceof p?s:p.single(s.anchor,s.head)),effects:gs(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function NA(i,e,t){let s=Qo(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let n=1;n<e.length;n++){e[n].filter===!1&&(t=!1);let o=!!e[n].sequential;s=OA(s,Qo(i,e[n],o?s.changes.newLength:i.doc.length),o)}let r=Le.create(i,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return Ud(t?Md(r):r)}function Md(i){let e=i.startState,t=!0;for(let r of e.facet(AA)){let n=r(i);if(n===!1){t=!1;break}Array.isArray(n)&&(t=t===!0?n:Pd(t,n))}if(t!==!0){let r,n;if(t===!1)n=i.changes.invertedDesc,r=_e.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,n=o.filtered.mapDesc(o.changes).invertedDesc}i=Le.create(e,r,i.selection&&i.selection.map(n),Q.mapEffects(i.effects,n),i.annotations,i.scrollIntoView)}let s=e.facet(RA);for(let r=s.length-1;r>=0;r--){let n=s[r](i);n instanceof Le?i=n:Array.isArray(n)&&n.length==1&&n[0]instanceof Le?i=n[0]:i=NA(e,gs(n),!1)}return i}function Ud(i){let e=i.startState,t=e.facet(SA),s=i;for(let r=t.length-1;r>=0;r--){let n=t[r](i);n&&Object.keys(n).length&&(s=OA(s,Qo(e,n,i.changes.newLength),!0))}return s==i?i:Le.create(e,i.changes,i.selection,s.effects,s.annotations,s.scrollIntoView)}const bd=[];function gs(i){return i==null?bd:Array.isArray(i)?i:[i]}var he=(function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i})(he||(he={}));const Bd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let qo;try{qo=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Gd(i){if(qo)return qo.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Bd.test(t)))return!0}return!1}function yd(i){return e=>{if(!/\S/.test(e))return he.Space;if(Gd(e))return he.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return he.Word;return he.Other}}class z{constructor(e,t,s,r,n,o){this.config=e,this.doc=t,this.selection=s,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let E=0;E<this.config.dynamicSlots.length;E++)hi(this,E<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return hi(this,s),Vr(this,s)}update(...e){return NA(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:r}=t;for(let E of e.effects)E.is(On.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,a)=>r.set(a,l)),t=null),r.set(E.value.compartment,E.value.extension)):E.is(Q.reconfigure)?(t=null,s=E.value):E.is(Q.appendConfig)&&(t=null,s=gs(s).concat(E.value));let n;t?n=e.startState.values.slice():(t=wr.resolve(s,r,this),n=new z(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values);let o=e.startState.facet(Jo)?e.newSelection:e.newSelection.asSingle();new z(t,e.newDoc,o,n,(E,l)=>l.update(E,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:p.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),r=this.changes(s.changes),n=[s.range],o=gs(s.effects);for(let E=1;E<t.ranges.length;E++){let l=e(t.ranges[E]),a=this.changes(l.changes),T=a.map(r);for(let A=0;A<E;A++)n[A]=n[A].map(T);let h=r.mapDesc(a,!0);n.push(l.range.map(h)),r=r.compose(T),o=Q.mapEffects(o,T).concat(Q.mapEffects(gs(l.effects),h))}return{changes:r,selection:p.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof _e?e:_e.of(e,this.doc.length,this.facet(z.lineSeparator))}toText(e){return te.of(e.split(this.facet(z.lineSeparator)||ko))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(hi(this,t),Vr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let r=e[s];r instanceof Ge&&this.config.address[r.id]!=null&&(t[s]=r.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(s){for(let n in s)if(Object.prototype.hasOwnProperty.call(e,n)){let o=s[n],E=e[n];r.push(o.init(l=>o.spec.fromJSON(E,l)))}}return z.create({doc:e.doc,selection:p.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=wr.resolve(e.extensions||[],new Map),s=e.doc instanceof te?e.doc:te.of((e.doc||"").split(t.staticFacet(z.lineSeparator)||ko)),r=e.selection?e.selection instanceof p?e.selection:p.single(e.selection.anchor,e.selection.head):p.single(0);return lA(r,s.length),t.staticFacet(Jo)||(r=r.asSingle()),new z(t,s,r,t.dynamicSlots.map(()=>null),(n,o)=>o.create(n),null)}get tabSize(){return this.facet(z.tabSize)}get lineBreak(){return this.facet(z.lineSeparator)||`
`}get readOnly(){return this.facet(cA)}phrase(e,...t){for(let s of this.facet(z.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,r)=>{if(r=="$")return"$";let n=+(r||1);return!n||n>t.length?s:t[n-1]})),e}languageDataAt(e,t,s=-1){let r=[];for(let n of this.facet(TA))for(let o of n(this,t,s))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return yd(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:s,length:r}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-s,E=e-s;for(;o>0;){let l=Be(t,o,!1);if(n(t.slice(l,o))!=he.Word)break;o=l}for(;E<r;){let l=Be(t,E);if(n(t.slice(E,l))!=he.Word)break;E=l}return o==E?null:p.range(o+s,E+s)}}z.allowMultipleSelections=Jo;z.tabSize=x.define({combine:i=>i.length?i[0]:4});z.lineSeparator=hA;z.readOnly=cA;z.phrases=x.define({compare(i,e){let t=Object.keys(i),s=Object.keys(e);return t.length==s.length&&t.every(r=>i[r]==e[r])}});z.languageData=TA;z.changeFilter=AA;z.transactionFilter=RA;z.transactionExtender=SA;On.reconfigure=Q.define();function pt(i,e,t={}){let s={};for(let r of i)for(let n of Object.keys(r)){let o=r[n],E=s[n];if(E===void 0)s[n]=o;else if(!(E===o||o===void 0))if(Object.hasOwnProperty.call(t,n))s[n]=t[n](E,o);else throw new Error("Config merge conflict for field "+n)}for(let r in e)s[r]===void 0&&(s[r]=e[r]);return s}class as{eq(e){return this==e}range(e,t=e){return jo.create(e,t,this)}}as.prototype.startSide=as.prototype.endSide=0;as.prototype.point=!1;as.prototype.mapMode=Ye.TrackDel;let jo=class IA{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new IA(e,t,s)}};function zo(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class KE{constructor(e,t,s,r){this.from=e,this.to=t,this.value=s,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,r=0){let n=s?this.to:this.from;for(let o=r,E=n.length;;){if(o==E)return o;let l=o+E>>1,a=n[l]-e||(s?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return a>=0?o:E;a>=0?E=l:o=l+1}}between(e,t,s,r){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(s,1e9,!1,n);n<o;n++)if(r(this.from[n]+e,this.to[n]+e,this.value[n])===!1)return!1}map(e,t){let s=[],r=[],n=[],o=-1,E=-1;for(let l=0;l<this.value.length;l++){let a=this.value[l],T=this.from[l]+e,h=this.to[l]+e,A,R;if(T==h){let S=t.mapPos(T,a.startSide,a.mapMode);if(S==null||(A=R=S,a.startSide!=a.endSide&&(R=t.mapPos(T,a.endSide),R<A)))continue}else if(A=t.mapPos(T,a.startSide),R=t.mapPos(h,a.endSide),A>R||A==R&&a.startSide>0&&a.endSide<=0)continue;(R-A||a.endSide-a.startSide)<0||(o<0&&(o=A),a.point&&(E=Math.max(E,R-A)),s.push(a),r.push(A-o),n.push(R-o))}return{mapped:s.length?new KE(r,n,s,E):null,pos:o}}}class ee{constructor(e,t,s,r){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=r}static create(e,t,s,r){return new ee(e,t,s,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:r=0,filterTo:n=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(s&&(t=t.slice().sort(zo)),this.isEmpty)return t.length?ee.of(t):this;let E=new fA(this,null,-1).goto(0),l=0,a=[],T=new bt;for(;E.value||l<t.length;)if(l<t.length&&(E.from-t[l].from||E.startSide-t[l].value.startSide)>=0){let h=t[l++];T.addInner(h.from,h.to,h.value)||a.push(h)}else E.rangeIndex==1&&E.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(E.chunkIndex)<t[l].from)&&(!o||r>this.chunkEnd(E.chunkIndex)||n<this.chunkPos[E.chunkIndex])&&T.addChunk(this.chunkPos[E.chunkIndex],this.chunk[E.chunkIndex])?E.nextChunk():((!o||r>E.to||n<E.from||o(E.from,E.to,E.value))&&(T.addInner(E.from,E.to,E.value)||a.push(jo.create(E.from,E.to,E.value))),E.next());return T.finishInner(this.nextLayer.isEmpty&&!a.length?ee.empty:this.nextLayer.update({add:a,filter:o,filterFrom:r,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],r=-1;for(let o=0;o<this.chunk.length;o++){let E=this.chunkPos[o],l=this.chunk[o],a=e.touchesRange(E,E+l.length);if(a===!1)r=Math.max(r,l.maxPoint),t.push(l),s.push(e.mapPos(E));else if(a===!0){let{mapped:T,pos:h}=l.map(E,e);T&&(r=Math.max(r,T.maxPoint),t.push(T),s.push(h))}}let n=this.nextLayer.map(e);return t.length==0?n:new ee(s,t,n||ee.empty,r)}between(e,t,s){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(t>=n&&e<=n+o.length&&o.between(n,e-n,t-n,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return Ii.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ii.from(e).goto(t)}static compare(e,t,s,r,n=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=n),E=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=n),l=Ha(o,E,s),a=new ti(o,l,n),T=new ti(E,l,n);s.iterGaps((h,A,R)=>Fa(a,h,T,A,R,r)),s.empty&&s.length==0&&Fa(a,0,T,0,0,r)}static eq(e,t,s=0,r){r==null&&(r=999999999);let n=e.filter(T=>!T.isEmpty&&t.indexOf(T)<0),o=t.filter(T=>!T.isEmpty&&e.indexOf(T)<0);if(n.length!=o.length)return!1;if(!n.length)return!0;let E=Ha(n,o),l=new ti(n,E,0).goto(s),a=new ti(o,E,0).goto(s);for(;;){if(l.to!=a.to||!Zo(l.active,a.active)||l.point&&(!a.point||!l.point.eq(a.point)))return!1;if(l.to>r)return!0;l.next(),a.next()}}static spans(e,t,s,r,n=-1){let o=new ti(e,null,n).goto(t),E=t,l=o.openStart;for(;;){let a=Math.min(o.to,s);if(o.point){let T=o.activeForPoint(o.to),h=o.pointFrom<t?T.length+1:o.point.startSide<0?T.length:Math.min(T.length,l);r.point(E,a,o.point,T,h,o.pointRank),l=Math.min(o.openEnd(a),T.length)}else a>E&&(r.span(E,a,o.active,l),l=o.openEnd(a));if(o.to>s)return l+(o.point&&o.to>s?1:0);E=o.to,o.next()}}static of(e,t=!1){let s=new bt;for(let r of e instanceof jo?[e]:t?xd(e):e)s.add(r.from,r.to,r.value);return s.finish()}static join(e){if(!e.length)return ee.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let r=e[s];r!=ee.empty;r=r.nextLayer)t=new ee(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}ee.empty=new ee([],[],null,-1);function xd(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let s=i[t];if(zo(e,s)>0)return i.slice().sort(zo);e=s}return i}ee.empty.nextLayer=ee.empty;class bt{finishChunk(e){this.chunks.push(new KE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new bt)).add(e,t,s)}addInner(e,t,s){let r=e-this.lastTo||s.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner(ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ha(i,e,t){let s=new Map;for(let n of i)for(let o=0;o<n.chunk.length;o++)n.chunk[o].maxPoint<=0&&s.set(n.chunk[o],n.chunkPos[o]);let r=new Set;for(let n of e)for(let o=0;o<n.chunk.length;o++){let E=s.get(n.chunk[o]);E!=null&&(t?t.mapPos(E):E)==n.chunkPos[o]&&!t?.touchesRange(E,E+n.chunk[o].length)&&r.add(n.chunk[o])}return r}class fA{constructor(e,t,s,r=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ii{constructor(e){this.heap=e}static from(e,t=null,s=-1){let r=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=s&&r.push(new fA(o,t,s,n));return r.length==1?r[0]:new Ii(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)To(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)To(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),To(this.heap,0)}}}function To(i,e){for(let t=i[e];;){let s=(e<<1)+1;if(s>=i.length)break;let r=i[s];if(s+1<i.length&&r.compare(i[s+1])>=0&&(r=i[s+1],s++),t.compare(r)<0)break;i[s]=t,i[e]=r,e=s}}class ti{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ii.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){tr(this.active,e),tr(this.activeTo,e),tr(this.activeRank,e),this.minActive=Ya(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:r,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||r-this.activeTo[t])>0;)t++;sr(this.active,t,s),sr(this.activeTo,t,r),sr(this.activeRank,t,n),e&&sr(e,t,this.cursor.from),this.minActive=Ya(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),s&&tr(s,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let n=this.cursor.value;if(!n.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let r=s.length-1;r>=0&&s[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function Fa(i,e,t,s,r,n){i.goto(e),t.goto(s);let o=s+r,E=s,l=s-e;for(;;){let a=i.to+l-t.to,T=a||i.endSide-t.endSide,h=T<0?i.to+l:t.to,A=Math.min(h,o);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&Zo(i.activeForPoint(i.to),t.activeForPoint(t.to))||n.comparePoint(E,A,i.point,t.point):A>E&&!Zo(i.active,t.active)&&n.compareRange(E,A,i.active,t.active),h>o)break;(a||i.openEnd!=t.openEnd)&&n.boundChange&&n.boundChange(h),E=h,T<=0&&i.next(),T>=0&&t.next()}}function Zo(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function tr(i,e){for(let t=e,s=i.length-1;t<s;t++)i[t]=i[t+1];i.pop()}function sr(i,e,t){for(let s=i.length-1;s>=e;s--)i[s+1]=i[s];i[e]=t}function Ya(i,e){let t=-1,s=1e9;for(let r=0;r<e.length;r++)(e[r]-s||i[r].endSide-i[t].endSide)<0&&(t=r,s=e[r]);return t}function Ws(i,e,t=i.length){let s=0;for(let r=0;r<t&&r<i.length;)i.charCodeAt(r)==9?(s+=e-s%e,r++):(s++,r=Be(i,r));return s}function eE(i,e,t,s){for(let r=0,n=0;;){if(n>=e)return r;if(r==i.length)break;n+=i.charCodeAt(r)==9?t-n%t:1,r=Be(i,r)}return s===!0?-1:i.length}const tE="ͼ",va=typeof Symbol>"u"?"__"+tE:Symbol.for(tE),sE=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wt{constructor(e,t){this.rules=[];let{finish:s}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function n(o,E,l,a){let T=[],h=/^@(\w+)\b/.exec(o[0]),A=h&&h[1]=="keyframes";if(h&&E==null)return l.push(o[0]+";");for(let R in E){let S=E[R];if(/&/.test(R))n(R.split(/,\s*/).map(c=>o.map(O=>c.replace(/&/,O))).reduce((c,O)=>c.concat(O)),S,l);else if(S&&typeof S=="object"){if(!h)throw new RangeError("The value of a property ("+R+") should be a primitive value.");n(r(R),S,T,A)}else S!=null&&T.push(R.replace(/_.*/,"").replace(/[A-Z]/g,c=>"-"+c.toLowerCase())+": "+S+";")}(T.length||A)&&l.push((s&&!h&&!a?o.map(s):o).join(", ")+" {"+T.join(" ")+"}")}for(let o in e)n(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=wa[va]||1;return wa[va]=e+1,tE+e.toString(36)}static mount(e,t,s){let r=e[sE],n=s&&s.nonce;r?n&&r.setNonce(n):r=new Hd(e,n),r.mount(Array.isArray(t)?t:[t],e)}}let Va=new Map;class Hd{constructor(e,t){let s=e.ownerDocument||e,r=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let n=Va.get(s);if(n)return e[sE]=n;this.sheet=new r.CSSStyleSheet,Va.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[sE]=this}mount(e,t){let s=this.sheet,r=0,n=0;for(let o=0;o<e.length;o++){let E=e[o],l=this.modules.indexOf(E);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,E),s)for(let a=0;a<E.rules.length;a++)s.insertRule(E.rules[a],r++)}else{for(;n<l;)r+=this.modules[n++].rules.length;r+=E.rules.length,n++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let E=t.head||t;this.styleTag.parentNode!=E&&E.insertBefore(this.styleTag,E.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}function oe(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=t[s];typeof r=="string"?i.setAttribute(s,r):r!=null&&(i[s]=r)}e++}for(;e<arguments.length;e++)uA(i,arguments[e]);return i}function uA(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)uA(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Fe=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},iE=typeof document<"u"?document:{documentElement:{style:{}}};const rE=/Edge\/(\d+)/.exec(Fe.userAgent),dA=/MSIE \d/.test(Fe.userAgent),nE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fe.userAgent),Nn=!!(dA||nE||rE),ka=!Nn&&/gecko\/(\d+)/i.test(Fe.userAgent),ho=!Nn&&/Chrome\/(\d+)/.exec(Fe.userAgent),Fd="webkitFontSmoothing"in iE.documentElement.style,oE=!Nn&&/Apple Computer/.test(Fe.vendor),Wa=oE&&(/Mobile\/\w+/.test(Fe.userAgent)||Fe.maxTouchPoints>2);var y={mac:Wa||/Mac/.test(Fe.platform),windows:/Win/.test(Fe.platform),linux:/Linux|X11/.test(Fe.platform),ie:Nn,ie_version:dA?iE.documentMode||6:nE?+nE[1]:rE?+rE[1]:0,gecko:ka,gecko_version:ka?+(/Firefox\/(\d+)/.exec(Fe.userAgent)||[0,0])[1]:0,chrome:!!ho,chrome_version:ho?+ho[1]:0,ios:Wa,android:/Android\b/.test(Fe.userAgent),webkit_version:Fd?+(/\bAppleWebKit\/(\d+)/.exec(Fe.userAgent)||[0,0])[1]:0,safari:oE,safari_version:oE?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Fe.userAgent)||[0,0])[1]:0,tabSize:iE.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function fi(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function EE(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Ur(i,e){if(!e.anchorNode)return!1;try{return EE(i,e.anchorNode)}catch{return!1}}function xs(i){return i.nodeType==3?hs(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ai(i,e,t,s){return t?Xa(i,e,t,s,-1)||Xa(i,e,t,s,1):!1}function Ts(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function kr(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function Xa(i,e,t,s,r){for(;;){if(i==t&&e==s)return!0;if(e==(r<0?0:_t(i))){if(i.nodeName=="DIV")return!1;let n=i.parentNode;if(!n||n.nodeType!=1)return!1;e=Ts(i)+(r<0?0:1),i=n}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?_t(i):0}else return!1}}function _t(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function Gi(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function Yd(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function CA(i,e){let t=e.width/i.offsetWidth,s=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-i.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function vd(i,e,t,s,r,n,o,E){let l=i.ownerDocument,a=l.defaultView||window;for(let T=i,h=!1;T&&!h;)if(T.nodeType==1){let A,R=T==l.body,S=1,c=1;if(R)A=Yd(a);else{if(/^(fixed|sticky)$/.test(getComputedStyle(T).position)&&(h=!0),T.scrollHeight<=T.clientHeight&&T.scrollWidth<=T.clientWidth){T=T.assignedSlot||T.parentNode;continue}let C=T.getBoundingClientRect();({scaleX:S,scaleY:c}=CA(T,C)),A={left:C.left,right:C.left+T.clientWidth*S,top:C.top,bottom:C.top+T.clientHeight*c}}let O=0,f=0;if(r=="nearest")e.top<A.top?(f=e.top-(A.top+o),t>0&&e.bottom>A.bottom+f&&(f=e.bottom-A.bottom+o)):e.bottom>A.bottom&&(f=e.bottom-A.bottom+o,t<0&&e.top-f<A.top&&(f=e.top-(A.top+o)));else{let C=e.bottom-e.top,_=A.bottom-A.top;f=(r=="center"&&C<=_?e.top+C/2-_/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-_+o)-A.top}if(s=="nearest"?e.left<A.left?(O=e.left-(A.left+n),t>0&&e.right>A.right+O&&(O=e.right-A.right+n)):e.right>A.right&&(O=e.right-A.right+n,t<0&&e.left<A.left+O&&(O=e.left-(A.left+n))):O=(s=="center"?e.left+(e.right-e.left)/2-(A.right-A.left)/2:s=="start"==E?e.left-n:e.right-(A.right-A.left)+n)-A.left,O||f)if(R)a.scrollBy(O,f);else{let C=0,_=0;if(f){let g=T.scrollTop;T.scrollTop+=f/c,_=(T.scrollTop-g)*c}if(O){let g=T.scrollLeft;T.scrollLeft+=O/S,C=(T.scrollLeft-g)*S}e={left:e.left-C,top:e.top-_,right:e.right-C,bottom:e.bottom-_},C&&Math.abs(C-O)<1&&(s="nearest"),_&&Math.abs(_-f)<1&&(r="nearest")}if(R)break;(e.top<A.top||e.bottom>A.bottom||e.left<A.left||e.right>A.right)&&(e={left:Math.max(e.left,A.left),right:Math.min(e.right,A.right),top:Math.max(e.top,A.top),bottom:Math.min(e.bottom,A.bottom)}),T=T.assignedSlot||T.parentNode}else if(T.nodeType==11)T=T.host;else break}function wd(i){let e=i.ownerDocument,t,s;for(let r=i.parentNode;r&&!(r==e.body||t&&s);)if(r.nodeType==1)!s&&r.scrollHeight>r.clientHeight&&(s=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:s}}class Vd{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?_t(t):0),s,Math.min(e.focusOffset,s?_t(s):0))}set(e,t,s,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=r}}let es=null;y.safari&&y.safari_version>=26&&(es=!1);function _A(i){if(i.setActive)return i.setActive();if(es)return i.focus(es);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(es==null?{get preventScroll(){return es={preventScroll:!0},!0}}:void 0),!es){es=!1;for(let t=0;t<e.length;){let s=e[t++],r=e[t++],n=e[t++];s.scrollTop!=r&&(s.scrollTop=r),s.scrollLeft!=n&&(s.scrollLeft=n)}}}let Ka;function hs(i,e,t=e){let s=Ka||(Ka=document.createRange());return s.setEnd(i,t),s.setStart(i,e),s}function Ps(i,e,t,s){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=s);let n=new KeyboardEvent("keydown",r);n.synthetic=!0,i.dispatchEvent(n);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,i.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function kd(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function LA(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function Wd(i,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,_t(t));;)if(s){if(t.nodeType!=1)return!1;let r=t.childNodes[s-1];r.contentEditable=="false"?s--:(t=r,s=_t(t))}else{if(t==i)return!0;s=Ts(t),t=t.parentNode}}function pA(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function mA(i,e){for(let t=i,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=_t(t)}else if(t.parentNode&&!kr(t))s=Ts(t),t=t.parentNode;else return null}}function DA(i,e){for(let t=i,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!kr(t))s=Ts(t)+1,t=t.parentNode;else return null}}class xe{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new xe(e.parentNode,Ts(e),t)}static after(e,t){return new xe(e.parentNode,Ts(e)+1,t)}}const $E=[];class re{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let s of this.children){if(s==e)return t;t+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let s=this.dom,r=null,n;for(let o of this.children){if(o.flags&7){if(!o.dom&&(n=r?r.nextSibling:s.firstChild)){let E=re.get(n);(!E||!E.parent&&E.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.flags&=-8}if(n=r?r.nextSibling:s.firstChild,t&&!t.written&&t.node==s&&n!=o.dom&&(t.written=!0),o.dom.parentNode==s)for(;n&&n!=o.dom;)n=$a(n);else s.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:s.firstChild,n&&t&&t.node==s&&(t.written=!0);n;)n=$a(n)}else if(this.flags&1)for(let s of this.children)s.flags&7&&(s.sync(e,t),s.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let s;if(e==this.dom)s=this.dom.childNodes[t];else{let r=_t(e)==0?0:t==0?-1:1;for(;;){let n=e.parentNode;if(n==this.dom)break;r==0&&n.firstChild!=n.lastChild&&(e==n.firstChild?r=-1:r=1),e=n}r<0?s=e:s=e.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!re.get(s);)s=s.nextSibling;if(!s)return this.length;for(let r=0,n=0;;r++){let o=this.children[r];if(o.dom==s)return n;n+=o.length+o.breakAfter}}domBoundsAround(e,t,s=0){let r=-1,n=-1,o=-1,E=-1;for(let l=0,a=s,T=s;l<this.children.length;l++){let h=this.children[l],A=a+h.length;if(a<e&&A>t)return h.domBoundsAround(e,t,a);if(A>=e&&r==-1&&(r=l,n=a),a>t&&h.dom.parentNode==this.dom){o=l,E=T;break}T=A,a=A+h.breakAfter}return{from:n,to:E<0?s+this.length:E,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,s=$E){this.markDirty();for(let r=e;r<t;r++){let n=this.children[r];n.parent==this&&s.indexOf(n)<0&&n.destroy()}s.length<250?this.children.splice(e,t-e,...s):this.children=[].concat(this.children.slice(0,e),s,this.children.slice(t));for(let r=0;r<s.length;r++)s[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new gA(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,s,r,n,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}re.prototype.breakAfter=0;function $a(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class gA{constructor(e,t,s){this.children=e,this.pos=t,this.i=s,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function PA(i,e,t,s,r,n,o,E,l){let{children:a}=i,T=a.length?a[e]:null,h=n.length?n[n.length-1]:null,A=h?h.breakAfter:o;if(!(e==s&&T&&!o&&!A&&n.length<2&&T.merge(t,r,n.length?h:null,t==0,E,l))){if(s<a.length){let R=a[s];R&&(r<R.length||R.breakAfter&&h?.breakAfter)?(e==s&&(R=R.split(r),r=0),!A&&h&&R.merge(0,r,h,!0,0,l)?n[n.length-1]=R:((r||R.children.length&&!R.children[0].length)&&R.merge(0,r,null,!1,0,l),n.push(R))):R?.breakAfter&&(h?h.breakAfter=1:o=1),s++}for(T&&(T.breakAfter=o,t>0&&(!o&&n.length&&T.merge(t,T.length,n[0],!1,E,0)?T.breakAfter=n.shift().breakAfter:(t<T.length||T.children.length&&T.children[T.children.length-1].length==0)&&T.merge(t,T.length,null,!1,E,0),e++));e<s&&n.length;)if(a[s-1].become(n[n.length-1]))s--,n.pop(),l=n.length?0:E;else if(a[e].become(n[0]))e++,n.shift(),E=n.length?0:l;else break;!n.length&&e&&s<a.length&&!a[e-1].breakAfter&&a[s].merge(0,0,a[e-1],!1,E,l)&&e--,(e<s||n.length)&&i.replaceChildren(e,s,n)}}function MA(i,e,t,s,r,n){let o=i.childCursor(),{i:E,off:l}=o.findPos(t,1),{i:a,off:T}=o.findPos(e,-1),h=e-t;for(let A of s)h+=A.length;i.length+=h,PA(i,a,T,E,l,s,0,r,n)}const Xd=256;class lt extends re{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,s){return this.flags&8||s&&(!(s instanceof lt)||this.length-(t-e)+s.length>Xd||s.flags&8)?!1:(this.text=this.text.slice(0,e)+(s?s.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new lt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new xe(this.dom,e)}domBoundsAround(e,t,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Kd(this.dom,e,t)}}class Bt extends re{constructor(e,t=[],s=0){super(),this.mark=e,this.children=t,this.length=s;for(let r of t)r.setParent(this)}setAttrs(e){if(LA(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,s,r,n,o){return s&&(!(s instanceof Bt&&s.mark.eq(this.mark))||e&&n<=0||t<this.length&&o<=0)?!1:(MA(this,e,t,s?s.children.slice():[],n-1,o-1),this.markDirty(),!0)}split(e){let t=[],s=0,r=-1,n=0;for(let E of this.children){let l=s+E.length;l>e&&t.push(s<e?E.split(e-s):E),r<0&&s>=e&&(r=n),s=l,n++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Bt(this.mark,t,o)}domAtPos(e){return UA(this,e)}coordsAt(e,t){return BA(this,e,t)}}function Kd(i,e,t){let s=i.nodeValue.length;e>s&&(e=s);let r=e,n=e,o=0;e==0&&t<0||e==s&&t>=0?y.chrome||y.gecko||(e?(r--,o=1):n<s&&(n++,o=-1)):t<0?r--:n<s&&n++;let E=hs(i,r,n).getClientRects();if(!E.length)return null;let l=E[(o?o<0:t>=0)?0:E.length-1];return y.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(E,a=>a.width)||l),o?Gi(l,o<0):l||null}class Mt extends re{static create(e,t,s){return new Mt(e,t,s)}constructor(e,t,s){super(),this.widget=e,this.length=t,this.side=s,this.prevWidget=null}split(e){let t=Mt.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,s,r,n,o){return s&&(!(s instanceof Mt)||!this.widget.compare(s.widget)||e>0&&n<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}become(e){return e instanceof Mt&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return te.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,s=t&&t.state.doc,r=this.posAtStart;return s?s.slice(r,r+this.length):te.empty}domAtPos(e){return(this.length?e==0:this.side>0)?xe.before(this.dom):xe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);if(s)return s;let r=this.dom.getClientRects(),n=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let E=o?r.length-1:0;n=r[E],!(e>0?E==0:E==r.length-1||n.top<n.bottom);E+=o?-1:1);return Gi(n,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Hs extends re{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Hs&&e.side==this.side}split(){return new Hs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?xe.before(this.dom):xe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return te.empty}get isHidden(){return!0}}lt.prototype.children=Mt.prototype.children=Hs.prototype.children=$E;function UA(i,e){let t=i.dom,{children:s}=i,r=0;for(let n=0;r<s.length;r++){let o=s[r],E=n+o.length;if(!(E==n&&o.getSide()<=0)){if(e>n&&e<E&&o.dom.parentNode==t)return o.domAtPos(e-n);if(e<=n)break;n=E}}for(let n=r;n>0;n--){let o=s[n-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let n=r;n<s.length;n++){let o=s[n];if(o.dom.parentNode==t)return o.domAtPos(0)}return new xe(t,0)}function bA(i,e,t){let s,{children:r}=i;t>0&&e instanceof Bt&&r.length&&(s=r[r.length-1])instanceof Bt&&s.mark.eq(e.mark)?bA(s,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function BA(i,e,t){let s=null,r=-1,n=null,o=-1;function E(a,T){for(let h=0,A=0;h<a.children.length&&A<=T;h++){let R=a.children[h],S=A+R.length;S>=T&&(R.children.length?E(R,T-A):(!n||n.isHidden&&(t>0||Jd(n,R)))&&(S>T||A==S&&R.getSide()>0)?(n=R,o=T-A):(A<T||A==S&&R.getSide()<0&&!R.isHidden)&&(s=R,r=T-A)),A=S}}E(i,e);let l=(t<0?s:n)||s||n;return l?l.coordsAt(Math.max(0,l==s?r:o),t):$d(i)}function $d(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=xs(e);return t[t.length-1]||null}function Jd(i,e){let t=i.coordsAt(0,1),s=e.coordsAt(0,1);return t&&s&&s.top<t.bottom}function lE(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const Ja=Object.create(null);function Wr(i,e,t){if(i==e)return!0;i||(i=Ja),e||(e=Ja);let s=Object.keys(i),r=Object.keys(e);if(s.length-(t&&s.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let n of s)if(n!=t&&(r.indexOf(n)==-1||i[n]!==e[n]))return!1;return!0}function aE(i,e,t){let s=!1;if(e)for(let r in e)t&&r in t||(s=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(s=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return s}function Qd(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let s=i.attributes[t];e[s.name]=s.value}return e}class yt{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ve=(function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i})(ve||(ve={}));class V extends as{constructor(e,t,s,r){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=r}get heightRelevant(){return!1}static mark(e){return new yi(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Xt(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,r;if(e.isBlockGap)s=-5e8,r=4e8;else{let{start:n,end:o}=GA(e,t);s=(n?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Xt(e,s,r,t,e.widget||null,!0)}static line(e){return new xi(e)}static set(e,t=!1){return ee.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}V.none=ee.empty;class yi extends V{constructor(e){let{start:t,end:s}=GA(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,s;return this==e||e instanceof yi&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((s=e.attrs)===null||s===void 0?void 0:s.class))&&Wr(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}yi.prototype.point=!1;class xi extends V{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof xi&&this.spec.class==e.spec.class&&Wr(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}xi.prototype.mapMode=Ye.TrackBefore;xi.prototype.point=!0;class Xt extends V{constructor(e,t,s,r,n,o){super(t,s,n,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Ye.TrackBefore:Ye.TrackAfter:Ye.TrackDel}get type(){return this.startSide!=this.endSide?ve.WidgetRange:this.startSide<=0?ve.WidgetBefore:ve.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Xt&&qd(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Xt.prototype.point=!0;function GA(i,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=i;return t==null&&(t=i.inclusive),s==null&&(s=i.inclusive),{start:t??e,end:s??e}}function qd(i,e){return i==e||!!(i&&e&&i.compare(e))}function br(i,e,t,s=0){let r=t.length-1;r>=0&&t[r]+s>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class Ne extends re{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,s,r,n,o){if(s){if(!(s instanceof Ne))return!1;this.dom||s.transferDOM(this)}return r&&this.setDeco(s?s.attrs:null),MA(this,e,t,s?s.children.slice():[],n,o),!0}split(e){let t=new Ne;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:s,off:r}=this.childPos(e);r&&(t.append(this.children[s].split(r),0),this.children[s].merge(r,this.children[s].length,null,!1,0,0),s++);for(let n=s;n<this.children.length;n++)t.append(this.children[n],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Wr(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){bA(this,e,t)}addLineDeco(e){let t=e.spec.attributes,s=e.spec.class;t&&(this.attrs=lE(t,this.attrs||{})),s&&(this.attrs=lE({class:s},this.attrs||{}))}domAtPos(e){return UA(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var s;this.dom?this.flags&4&&(LA(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(aE(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&re.get(r)instanceof Bt;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((s=re.get(r))===null||s===void 0?void 0:s.isEditable)==!1&&(!y.ios||!this.children.some(n=>n instanceof lt))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let s of this.children){if(!(s instanceof lt)||/[^ -~]/.test(s.text))return null;let r=xs(s.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let s=BA(this,e,t);if(!this.children.length&&s&&this.parent){let{heightOracle:r}=this.parent.view.viewState,n=s.bottom-s.top;if(Math.abs(n-r.lineHeight)<2&&r.textHeight<n){let o=(n-r.textHeight)/2;return{top:s.top+o,bottom:s.bottom-o,left:s.left,right:s.left}}}return s}become(e){return e instanceof Ne&&this.children.length==0&&e.children.length==0&&Wr(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let s=0,r=0;s<e.children.length;s++){let n=e.children[s],o=r+n.length;if(o>=t){if(n instanceof Ne)return n;if(o>t)break}r=o+n.breakAfter}return null}}class Ut extends re{constructor(e,t,s){super(),this.widget=e,this.length=t,this.deco=s,this.breakAfter=0,this.prevWidget=null}merge(e,t,s,r,n,o){return s&&(!(s instanceof Ut)||!this.widget.compare(s.widget)||e>0&&n<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?xe.before(this.dom):xe.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let s=new Ut(this.widget,t,this.deco);return s.breakAfter=this.breakAfter,s}get children(){return $E}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):te.empty}domBoundsAround(){return null}become(e){return e instanceof Ut&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);return s||(this.widget instanceof TE?null:Gi(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:s}=this.deco;return t==s?!1:e<0?t<0:s>0}}class TE extends yt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ri{constructor(e,t,s,r){this.doc=e,this.pos=t,this.end=s,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ut&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ne),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ir(new Hs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ut)&&this.getLine()}buildText(e,t,s){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:E,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(E){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),n=Math.min(r,512);this.flushBuffer(t.slice(t.length-s)),this.getLine().append(ir(new lt(this.text.slice(this.textOff,this.textOff+n)),t),s),this.atCursorPos=!0,this.textOff+=n,e-=n,s=r<=n?0:t.length}}span(e,t,s,r){this.buildText(t-e,s,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,s,r,n,o){if(this.disallowBlockEffectsFor[o]&&s instanceof Xt){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let E=t-e;if(s instanceof Xt)if(s.block)s.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ut(s.widget||Fs.block,E,s));else{let l=Mt.create(s.widget||Fs.inline,E,E?0:s.startSide),a=this.atCursorPos&&!l.isEditable&&n<=r.length&&(e<t||s.startSide>0),T=!l.isEditable&&(e<t||n>r.length||s.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!a&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),a&&(h.append(ir(new Hs(1),r),n),n=r.length+Math.max(0,n-r.length)),h.append(ir(l,r),n),this.atCursorPos=T,this.pendingBuffer=T?e<t||n>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);E&&(this.textOff+E<=this.text.length?this.textOff+=E:(this.skip+=E-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,s,r,n){let o=new Ri(e,t,s,n);return o.openEnd=ee.spans(r,t,s,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ir(i,e){for(let t of e)i=new Bt(t,[i],i.length);return i}class Fs extends yt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Fs.inline=new Fs("span");Fs.block=new Fs("div");var Te=(function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i})(Te||(Te={}));const As=Te.LTR,JE=Te.RTL;function yA(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const jd=yA("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),zd=yA("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hE=Object.create(null),Rt=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);hE[e]=t,hE[t]=-e}function xA(i){return i<=247?jd[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?zd[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const Zd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class wt{get dir(){return this.level%2?JE:As}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,r){let n=-1;for(let o=0;o<e.length;o++){let E=e[o];if(E.from<=t&&E.to>=t){if(E.level==s)return o;(n<0||(r!=0?r<0?E.from<t:E.to>t:e[n].level>E.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}function HA(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let s=i[t],r=e[t];if(s.from!=r.from||s.to!=r.to||s.direction!=r.direction||!HA(s.inner,r.inner))return!1}return!0}const Ee=[];function eC(i,e,t,s,r){for(let n=0;n<=s.length;n++){let o=n?s[n-1].to:e,E=n<s.length?s[n].from:t,l=n?256:r;for(let a=o,T=l,h=l;a<E;a++){let A=xA(i.charCodeAt(a));A==512?A=T:A==8&&h==4&&(A=16),Ee[a]=A==4?2:A,A&7&&(h=A),T=A}for(let a=o,T=l,h=l;a<E;a++){let A=Ee[a];if(A==128)a<E-1&&T==Ee[a+1]&&T&24?A=Ee[a]=T:Ee[a]=256;else if(A==64){let R=a+1;for(;R<E&&Ee[R]==64;)R++;let S=a&&T==8||R<t&&Ee[R]==8?h==1?1:8:256;for(let c=a;c<R;c++)Ee[c]=S;a=R-1}else A==8&&h==1&&(Ee[a]=1);T=A,A&7&&(h=A)}}}function tC(i,e,t,s,r){let n=r==1?2:1;for(let o=0,E=0,l=0;o<=s.length;o++){let a=o?s[o-1].to:e,T=o<s.length?s[o].from:t;for(let h=a,A,R,S;h<T;h++)if(R=hE[A=i.charCodeAt(h)])if(R<0){for(let c=E-3;c>=0;c-=3)if(Rt[c+1]==-R){let O=Rt[c+2],f=O&2?r:O&4?O&1?n:r:0;f&&(Ee[h]=Ee[Rt[c]]=f),E=c;break}}else{if(Rt.length==189)break;Rt[E++]=h,Rt[E++]=A,Rt[E++]=l}else if((S=Ee[h])==2||S==1){let c=S==r;l=c?0:1;for(let O=E-3;O>=0;O-=3){let f=Rt[O+2];if(f&2)break;if(c)Rt[O+2]|=2;else{if(f&4)break;Rt[O+2]|=4}}}}}function sC(i,e,t,s){for(let r=0,n=s;r<=t.length;r++){let o=r?t[r-1].to:i,E=r<t.length?t[r].from:e;for(let l=o;l<E;){let a=Ee[l];if(a==256){let T=l+1;for(;;)if(T==E){if(r==t.length)break;T=t[r++].to,E=r<t.length?t[r].from:e}else if(Ee[T]==256)T++;else break;let h=n==1,A=(T<e?Ee[T]:s)==1,R=h==A?h?1:2:s;for(let S=T,c=r,O=c?t[c-1].to:i;S>l;)S==O&&(S=t[--c].from,O=c?t[c-1].to:i),Ee[--S]=R;l=T}else n=a,l++}}}function AE(i,e,t,s,r,n,o){let E=s%2?2:1;if(s%2==r%2)for(let l=e,a=0;l<t;){let T=!0,h=!1;if(a==n.length||l<n[a].from){let c=Ee[l];c!=E&&(T=!1,h=c==16)}let A=!T&&E==1?[]:null,R=T?s:s+1,S=l;e:for(;;)if(a<n.length&&S==n[a].from){if(h)break e;let c=n[a];if(!T)for(let O=c.to,f=a+1;;){if(O==t)break e;if(f<n.length&&n[f].from==O)O=n[f++].to;else{if(Ee[O]==E)break e;break}}if(a++,A)A.push(c);else{c.from>l&&o.push(new wt(l,c.from,R));let O=c.direction==As!=!(R%2);RE(i,O?s+1:s,r,c.inner,c.from,c.to,o),l=c.to}S=c.to}else{if(S==t||(T?Ee[S]!=E:Ee[S]==E))break;S++}A?AE(i,l,S,s+1,r,A,o):l<S&&o.push(new wt(l,S,R)),l=S}else for(let l=t,a=n.length;l>e;){let T=!0,h=!1;if(!a||l>n[a-1].to){let c=Ee[l-1];c!=E&&(T=!1,h=c==16)}let A=!T&&E==1?[]:null,R=T?s:s+1,S=l;e:for(;;)if(a&&S==n[a-1].to){if(h)break e;let c=n[--a];if(!T)for(let O=c.from,f=a;;){if(O==e)break e;if(f&&n[f-1].to==O)O=n[--f].from;else{if(Ee[O-1]==E)break e;break}}if(A)A.push(c);else{c.to<l&&o.push(new wt(c.to,l,R));let O=c.direction==As!=!(R%2);RE(i,O?s+1:s,r,c.inner,c.from,c.to,o),l=c.from}S=c.from}else{if(S==e||(T?Ee[S-1]!=E:Ee[S-1]==E))break;S--}A?AE(i,S,l,s+1,r,A,o):S<l&&o.push(new wt(S,l,R)),l=S}}function RE(i,e,t,s,r,n,o){let E=e%2?2:1;eC(i,r,n,s,E),tC(i,r,n,s,E),sC(r,n,s,E),AE(i,r,n,e,t,s,o)}function iC(i,e,t){if(!i)return[new wt(0,0,e==JE?1:0)];if(e==As&&!t.length&&!Zd.test(i))return FA(i.length);if(t.length)for(;i.length>Ee.length;)Ee[Ee.length]=256;let s=[],r=e==As?0:1;return RE(i,r,r,t,0,i.length,s),s}function FA(i){return[new wt(0,i,0)]}let YA="";function rC(i,e,t,s,r){var n;let o=s.head-i.from,E=wt.find(e,o,(n=s.bidiLevel)!==null&&n!==void 0?n:-1,s.assoc),l=e[E],a=l.side(r,t);if(o==a){let A=E+=r?1:-1;if(A<0||A>=e.length)return null;l=e[E=A],o=l.side(!r,t),a=l.side(r,t)}let T=Be(i.text,o,l.forward(r,t));(T<l.from||T>l.to)&&(T=a),YA=i.text.slice(Math.min(o,T),Math.max(o,T));let h=E==(r?e.length-1:0)?null:e[E+(r?1:-1)];return h&&T==a&&h.level+(r?0:1)<l.level?p.cursor(h.side(!r,t)+i.from,h.forward(r,t)?1:-1,h.level):p.cursor(T+i.from,l.forward(r,t)?-1:1,l.level)}function nC(i,e,t){for(let s=e;s<t;s++){let r=xA(i.charCodeAt(s));if(r==1)return As;if(r==2||r==4)return JE}return As}const vA=x.define(),wA=x.define(),VA=x.define(),kA=x.define(),SE=x.define(),WA=x.define(),XA=x.define(),QE=x.define(),qE=x.define(),KA=x.define({combine:i=>i.some(e=>e)}),$A=x.define({combine:i=>i.some(e=>e)}),JA=x.define();class Ms{constructor(e,t="nearest",s="nearest",r=5,n=5,o=!1){this.range=e,this.y=t,this.x=s,this.yMargin=r,this.xMargin=n,this.isSnapshot=o}map(e){return e.empty?this:new Ms(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ms(p.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const rr=Q.define({map:(i,e)=>i.map(e)}),QA=Q.define();function Xe(i,e,t){let s=i.facet(kA);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Pt=x.define({combine:i=>i.length?i[0]:!0});let oC=0;const Ls=x.define({combine(i){return i.filter((e,t)=>{for(let s=0;s<t;s++)if(i[s].plugin==e.plugin)return!1;return!0})}});class ce{constructor(e,t,s,r,n){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=r,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(Ls.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ls.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:r,provide:n,decorations:o}=t||{};return new ce(oC++,e,s,r,E=>{let l=[];return o&&l.push(ui.of(a=>{let T=a.plugin(E);return T?o(T):V.none})),n&&l.push(n(E)),l})}static fromClass(e,t){return ce.define((s,r)=>new e(s,r),t)}}class Ao{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(Xe(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Xe(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){Xe(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qA=x.define(),jE=x.define(),ui=x.define(),jA=x.define(),Hi=x.define(),zA=x.define();function Qa(i,e){let t=i.state.facet(zA);if(!t.length)return t;let s=t.map(n=>n instanceof Function?n(i):n),r=[];return ee.spans(s,e.from,e.to,{point(){},span(n,o,E,l){let a=n-e.from,T=o-e.from,h=r;for(let A=E.length-1;A>=0;A--,l--){let R=E[A].spec.bidiIsolate,S;if(R==null&&(R=nC(e.text,a,T)),l>0&&h.length&&(S=h[h.length-1]).to==a&&S.direction==R)S.to=T,h=S.inner;else{let c={from:a,to:T,direction:R,inner:[]};h.push(c),h=c.inner}}}}),r}const ZA=x.define();function zE(i){let e=0,t=0,s=0,r=0;for(let n of i.state.facet(ZA)){let o=n(i);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(s=Math.max(s,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:s,bottom:r}}const ni=x.define();class st{constructor(e,t,s,r){this.fromA=e,this.toA=t,this.fromB=s,this.toB=r}join(e){return new st(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>s.toA)){if(r.toA<s.fromA)break;s=s.join(r),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let r=0,n=0,o=0,E=0;;r++){let l=r==e.length?null:e[r],a=o-E,T=l?l.fromB:1e9;for(;n<t.length&&t[n]<T;){let h=t[n],A=t[n+1],R=Math.max(E,h),S=Math.min(T,A);if(R<=S&&new st(R+a,S+a,R,S).addToSet(s),A>T)break;n+=2}if(!l)return s;new st(l.fromA,l.toA,l.fromB,l.toB).addToSet(s),o=l.toA,E=l.toB}}}class Xr{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=_e.empty(this.startState.doc.length);for(let n of s)this.changes=this.changes.compose(n.changes);let r=[];this.changes.iterChangedRanges((n,o,E,l)=>r.push(new st(n,o,E,l))),this.changedRanges=r}static create(e,t,s){return new Xr(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class qa extends re{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=V.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ne],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new st(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:a,toA:T})=>T<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!RC(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let n=r>-1?lC(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:a,to:T}=this.hasComposition;s=new st(a,T,e.changes.mapPos(a,-1),e.changes.mapPos(T,1)).addToSet(s.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(y.ie||y.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,E=this.updateDeco(),l=hC(o,E,e.changes);return s=st.extendWithRanges(s,l),!(this.flags&7)&&s.length==0?!1:(this.updateInner(s,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,s){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,s);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=y.chrome||y.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ut&&o.widget instanceof TE&&n.push(o.dom);r.updateGaps(n)}updateChildren(e,t,s){let r=s?s.range.addToSet(e.slice()):e,n=this.childCursor(t);for(let o=r.length-1;;o--){let E=o>=0?r[o]:null;if(!E)break;let{fromA:l,toA:a,fromB:T,toB:h}=E,A,R,S,c;if(s&&s.range.fromB<h&&s.range.toB>T){let g=Ri.build(this.view.state.doc,T,s.range.fromB,this.decorations,this.dynamicDecorationMap),m=Ri.build(this.view.state.doc,s.range.toB,h,this.decorations,this.dynamicDecorationMap);R=g.breakAtStart,S=g.openStart,c=m.openEnd;let U=this.compositionView(s);m.breakAtStart?U.breakAfter=1:m.content.length&&U.merge(U.length,U.length,m.content[0],!1,m.openStart,0)&&(U.breakAfter=m.content[0].breakAfter,m.content.shift()),g.content.length&&U.merge(0,0,g.content[g.content.length-1],!0,0,g.openEnd)&&g.content.pop(),A=g.content.concat(U).concat(m.content)}else({content:A,breakAtStart:R,openStart:S,openEnd:c}=Ri.build(this.view.state.doc,T,h,this.decorations,this.dynamicDecorationMap));let{i:O,off:f}=n.findPos(a,1),{i:C,off:_}=n.findPos(l,-1);PA(this,C,_,O,f,A,R,S,c)}s&&this.fixCompositionDOM(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(QA)&&(this.editContextFormatting=s.value)}compositionView(e){let t=new lt(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new Bt(r,[t],t.length);let s=new Ne;return s.append(t,0),s}fixCompositionDOM(e){let t=(n,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let E=re.get(n);E&&E!=o&&(E.dom=null),o.setDOM(n)},s=this.childPos(e.range.fromB,1),r=this.children[s.i];t(e.line,r);for(let n=e.marks.length-1;n>=-1;n--)s=r.childPos(s.off,1),r=r.children[s.i],t(n>=0?e.marks[n].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let s=this.view.root.activeElement,r=s==this.dom,n=!r&&!(this.view.state.facet(Pt)||this.dom.tabIndex>-1)&&Ur(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s));if(!(r||t||n))return;let o=this.forceSelection;this.forceSelection=!1;let E=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(E.anchor)),a=E.empty?l:this.moveToLine(this.domAtPos(E.head));if(y.gecko&&E.empty&&!this.hasComposition&&EC(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=a=new xe(h,0),o=!0}let T=this.view.observer.selectionRange;(o||!T.focusNode||(!Ai(l.node,l.offset,T.anchorNode,T.anchorOffset)||!Ai(a.node,a.offset,T.focusNode,T.focusOffset))&&!this.suppressWidgetCursorChange(T,E))&&(this.view.observer.ignore(()=>{y.android&&y.chrome&&this.dom.contains(T.focusNode)&&AC(T.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=fi(this.view.root);if(h)if(E.empty){if(y.gecko){let A=aC(l.node,l.offset);if(A&&A!=3){let R=(A==1?mA:DA)(l.node,l.offset);R&&(l=new xe(R.node,R.offset))}}h.collapse(l.node,l.offset),E.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=E.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(a.node,a.offset)}catch{}}else{let A=document.createRange();E.anchor>E.head&&([l,a]=[a,l]),A.setEnd(a.node,a.offset),A.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(A)}n&&this.view.root.activeElement==this.dom&&(this.dom.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(l,a)),this.impreciseAnchor=l.precise?null:new xe(T.anchorNode,T.anchorOffset),this.impreciseHead=a.precise?null:new xe(T.focusNode,T.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ai(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=fi(e.root),{anchorNode:r,anchorOffset:n}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let o=Ne.find(this,t.head);if(!o)return;let E=o.posAtStart;if(t.head==E||t.head==E+o.length)return;let l=this.coordsAt(t.head,-1),a=this.coordsAt(t.head,1);if(!l||!a||l.bottom>a.top)return;let T=this.domAtPos(t.head+t.assoc);s.collapse(T.node,T.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&s.collapse(r,n)}moveToLine(e){let t=this.dom,s;if(e.node!=t)return e;for(let r=e.offset;!s&&r<t.childNodes.length;r++){let n=re.get(t.childNodes[r]);n instanceof Ne&&(s=n.domAtPos(0))}for(let r=e.offset-1;!s&&r>=0;r--){let n=re.get(t.childNodes[r]);n instanceof Ne&&(s=n.domAtPos(n.length))}return s?new xe(s.node,s.offset,!0):e}nearest(e){for(let t=e;t;){let s=re.get(t);if(s&&s.rootView==this)return s;t=t.parentNode}return null}posFromDOM(e,t){let s=this.nearest(e);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(e,t)+s.posAtStart}domAtPos(e){let{i:t,off:s}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(s<r.length||r instanceof Ne)break;t++,s=0}return this.children[t].domAtPos(s)}coordsAt(e,t){let s=null,r=0;for(let n=this.length,o=this.children.length-1;o>=0;o--){let E=this.children[o],l=n-E.breakAfter,a=l-E.length;if(l<e)break;if(a<=e&&(a<e||E.covers(-1))&&(l>e||E.covers(1))&&(!s||E instanceof Ne&&!(s instanceof Ne&&t>=0)))s=E,r=a;else if(s&&a==e&&l==e&&E instanceof Ut&&Math.abs(t)<2){if(E.deco.startSide<0)break;o&&(s=null)}n=a}return s?s.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:s}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Ne))return null;for(;r.children.length;){let{i:E,off:l}=r.childPos(s,1);for(;;E++){if(E==r.children.length)return null;if((r=r.children[E]).length)break}s=l}if(!(r instanceof lt))return null;let n=Be(r.text,s);if(n==s)return null;let o=hs(r.dom,s,n).getClientRects();for(let E=0;E<o.length;E++){let l=o[E];if(E==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:s,to:r}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,E=-1,l=this.view.textDirection==Te.LTR;for(let a=0,T=0;T<this.children.length;T++){let h=this.children[T],A=a+h.length;if(A>r)break;if(a>=s){let R=h.dom.getBoundingClientRect();if(t.push(R.height),o){let S=h.dom.lastChild,c=S?xs(S):[];if(c.length){let O=c[c.length-1],f=l?O.right-R.left:R.right-O.left;f>E&&(E=f,this.minWidth=n,this.minWidthFrom=a,this.minWidthTo=A)}}}a=A+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Te.RTL:Te.LTR}measureTextSize(){for(let n of this.children)if(n instanceof Ne){let o=n.measureTextSize();if(o)return o}let e=document.createElement("div"),t,s,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=xs(e.firstChild)[0];t=e.getBoundingClientRect().height,s=n?n.width/27:7,r=n?n.height:t,e.remove()}),{lineHeight:t,charWidth:s,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new gA(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,r=0;;r++){let n=r==t.viewports.length?null:t.viewports[r],o=n?n.from-1:this.length;if(o>s){let E=(t.lineBlockAt(o).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(V.replace({widget:new TE(E),block:!0,inclusive:!0,isBlockGap:!0}).range(s,o))}if(!n)break;s=n.to+1}return V.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ui).map(n=>(this.dynamicDecorationMap[e++]=typeof n=="function")?n(this.view):n),s=!1,r=this.view.state.facet(jA).map((n,o)=>{let E=typeof n=="function";return E&&(s=!0),E?n(this.view):n});for(r.length&&(this.dynamicDecorationMap[e++]=s,t.push(ee.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let a=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=a.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let a of this.view.state.facet(JA))try{if(a(this.view,e.range,e))return!0}catch(T){Xe(this.view.state,T,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!s)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,r.left),top:Math.min(s.top,r.top),right:Math.max(s.right,r.right),bottom:Math.max(s.bottom,r.bottom)});let n=zE(this.view),o={left:s.left-n.left,top:s.top-n.top,right:s.right+n.right,bottom:s.bottom+n.bottom},{offsetWidth:E,offsetHeight:l}=this.view.scrollDOM;vd(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,E),-E),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Te.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let s=r=>r instanceof Mt||r.children.some(s);return s(this.children[t])}}function EC(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function eR(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let s=mA(t.focusNode,t.focusOffset),r=DA(t.focusNode,t.focusOffset),n=s||r;if(r&&s&&r.node!=s.node){let E=re.get(r.node);if(!E||E instanceof lt&&E.text!=r.node.nodeValue)n=r;else if(i.docView.lastCompositionAfterCursor){let l=re.get(s.node);!l||l instanceof lt&&l.text!=s.node.nodeValue||(n=r)}}if(i.docView.lastCompositionAfterCursor=n!=s,!n)return null;let o=e-n.offset;return{from:o,to:o+n.node.nodeValue.length,node:n.node}}function lC(i,e,t){let s=eR(i,t);if(!s)return null;let{node:r,from:n,to:o}=s,E=r.nodeValue;if(/[\n\r]/.test(E)||i.state.doc.sliceString(s.from,s.to)!=E)return null;let l=e.invertedDesc,a=new st(l.mapPos(n),l.mapPos(o),n,o),T=[];for(let h=r.parentNode;;h=h.parentNode){let A=re.get(h);if(A instanceof Bt)T.push({node:h,deco:A.mark});else{if(A instanceof Ne||h.nodeName=="DIV"&&h.parentNode==i.contentDOM)return{range:a,text:r,marks:T,line:h};if(h!=i.contentDOM)T.push({node:h,deco:new yi({inclusive:!0,attributes:Qd(h),tagName:h.tagName.toLowerCase()})});else return null}}}function aC(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let TC=class{constructor(){this.changes=[]}compareRange(e,t){br(e,t,this.changes)}comparePoint(e,t){br(e,t,this.changes)}boundChange(e){br(e,e,this.changes)}};function hC(i,e,t){let s=new TC;return ee.compare(i,e,t,s),s.changes}function AC(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function RC(i,e){let t=!1;return e&&i.iterChangedRanges((s,r)=>{s<e.to&&r>e.from&&(t=!0)}),t}function SC(i,e,t=1){let s=i.charCategorizer(e),r=i.doc.lineAt(e),n=e-r.from;if(r.length==0)return p.cursor(e);n==0?t=1:n==r.length&&(t=-1);let o=n,E=n;t<0?o=Be(r.text,n,!1):E=Be(r.text,n);let l=s(r.text.slice(o,E));for(;o>0;){let a=Be(r.text,o,!1);if(s(r.text.slice(a,o))!=l)break;o=a}for(;E<r.length;){let a=Be(r.text,E);if(s(r.text.slice(E,a))!=l)break;E=a}return p.range(o+r.from,E+r.from)}function cC(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function OC(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function Ro(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function ja(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function za(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function cE(i,e,t){let s,r,n,o,E=!1,l,a,T,h;for(let S=i.firstChild;S;S=S.nextSibling){let c=xs(S);for(let O=0;O<c.length;O++){let f=c[O];r&&Ro(r,f)&&(f=ja(za(f,r.bottom),r.top));let C=cC(e,f),_=OC(t,f);if(C==0&&_==0)return S.nodeType==3?Za(S,e,t):cE(S,e,t);(!s||o>_||o==_&&n>C)&&(s=S,r=f,n=C,o=_,E=C?e<f.left?O>0:O<c.length-1:!0),C==0?t>f.bottom&&(!T||T.bottom<f.bottom)?(l=S,T=f):t<f.top&&(!h||h.top>f.top)&&(a=S,h=f):T&&Ro(T,f)?T=za(T,f.bottom):h&&Ro(h,f)&&(h=ja(h,f.top))}}if(T&&T.bottom>=t?(s=l,r=T):h&&h.top<=t&&(s=a,r=h),!s)return{node:i,offset:0};let A=Math.max(r.left,Math.min(r.right,e));if(s.nodeType==3)return Za(s,A,t);if(E&&s.contentEditable!="false")return cE(s,A,t);let R=Array.prototype.indexOf.call(i.childNodes,s)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:R}}function Za(i,e,t){let s=i.nodeValue.length,r=-1,n=1e9,o=0;for(let E=0;E<s;E++){let l=hs(i,E,E+1).getClientRects();for(let a=0;a<l.length;a++){let T=l[a];if(T.top==T.bottom)continue;o||(o=e-T.left);let h=(T.top>t?T.top-t:t-T.bottom)-1;if(T.left-1<=e&&T.right+1>=e&&h<n){let A=e>=(T.left+T.right)/2,R=A;if(y.chrome||y.gecko){let S=hs(i,E).getBoundingClientRect();Math.abs(S.left-T.right)<.1&&(R=!A)}if(h<=0)return{node:i,offset:E+(R?1:0)};r=E+(R?1:0),n=h}}}return{node:i,offset:r>-1?r:o>0?i.nodeValue.length:0}}function tR(i,e,t,s=-1){var r,n;let o=i.contentDOM.getBoundingClientRect(),E=o.top+i.viewState.paddingTop,l,{docHeight:a}=i.viewState,{x:T,y:h}=e,A=h-E;if(A<0)return 0;if(A>a)return i.state.doc.length;for(let g=i.viewState.heightOracle.textHeight/2,m=!1;l=i.elementAtHeight(A),l.type!=ve.Text;)for(;A=s>0?l.bottom+g:l.top-g,!(A>=0&&A<=a);){if(m)return t?null:0;m=!0,s=-s}h=E+A;let R=l.from;if(R<i.viewport.from)return i.viewport.from==0?0:t?null:eT(i,o,l,T,h);if(R>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:eT(i,o,l,T,h);let S=i.dom.ownerDocument,c=i.root.elementFromPoint?i.root:S,O=c.elementFromPoint(T,h);O&&!i.contentDOM.contains(O)&&(O=null),O||(T=Math.max(o.left+1,Math.min(o.right-1,T)),O=c.elementFromPoint(T,h),O&&!i.contentDOM.contains(O)&&(O=null));let f,C=-1;if(O&&((r=i.docView.nearest(O))===null||r===void 0?void 0:r.isEditable)!=!1){if(S.caretPositionFromPoint){let g=S.caretPositionFromPoint(T,h);g&&({offsetNode:f,offset:C}=g)}else if(S.caretRangeFromPoint){let g=S.caretRangeFromPoint(T,h);g&&({startContainer:f,startOffset:C}=g)}f&&(!i.contentDOM.contains(f)||y.safari&&NC(f,C,T)||y.chrome&&IC(f,C,T))&&(f=void 0),f&&(C=Math.min(_t(f),C))}if(!f||!i.docView.dom.contains(f)){let g=Ne.find(i.docView,R);if(!g)return A>l.top+l.height/2?l.to:l.from;({node:f,offset:C}=cE(g.dom,T,h))}let _=i.docView.nearest(f);if(!_)return null;if(_.isWidget&&((n=_.dom)===null||n===void 0?void 0:n.nodeType)==1){let g=_.dom.getBoundingClientRect();return e.y<g.top||e.y<=g.bottom&&e.x<=(g.left+g.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(f,C)+_.posAtStart}function eT(i,e,t,s,r){let n=Math.round((s-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let E=i.viewState.heightOracle.textHeight,l=Math.floor((r-t.top-(i.defaultLineHeight-E)*.5)/E);n+=l*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+eE(o,n,i.state.tabSize)}function sR(i,e,t){let s,r=i;if(i.nodeType!=3||e!=(s=i.nodeValue.length))return!1;for(;;){let n=r.nextSibling;if(n){if(n.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return hs(i,s-1,s).getBoundingClientRect().right>t}function NC(i,e,t){return sR(i,e,t)}function IC(i,e,t){if(e!=0)return sR(i,e,t);for(let r=i;;){let n=r.parentNode;if(!n||n.nodeType!=1||n.firstChild!=r)return!1;if(n.classList.contains("cm-line"))break;r=n}let s=i.nodeType==1?i.getBoundingClientRect():hs(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-s.left>5}function OE(i,e,t){let s=i.lineBlockAt(e);if(Array.isArray(s.type)){let r;for(let n of s.type){if(n.from>e)break;if(!(n.to<e)){if(n.from<e&&n.to>e)return n;(!r||n.type==ve.Text&&(r.type!=n.type||(t<0?n.from<e:n.to>e)))&&(r=n)}}return r||s}return s}function fC(i,e,t,s){let r=OE(i,e.head,e.assoc||-1),n=!s||r.type!=ve.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(n){let o=i.dom.getBoundingClientRect(),E=i.textDirectionAt(r.from),l=i.posAtCoords({x:t==(E==Te.LTR)?o.right-1:o.left+1,y:(n.top+n.bottom)/2});if(l!=null)return p.cursor(l,t?-1:1)}return p.cursor(t?r.to:r.from,t?-1:1)}function tT(i,e,t,s){let r=i.state.doc.lineAt(e.head),n=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let E=e,l=null;;){let a=rC(r,n,o,E,t),T=YA;if(!a){if(r.number==(t?i.state.doc.lines:1))return E;T=`
`,r=i.state.doc.line(r.number+(t?1:-1)),n=i.bidiSpans(r),a=i.visualLineSide(r,!t)}if(l){if(!l(T))return E}else{if(!s)return a;l=s(T)}E=a}}function uC(i,e,t){let s=i.state.charCategorizer(e),r=s(t);return n=>{let o=s(n);return r==he.Space&&(r=o),r==o}}function dC(i,e,t,s){let r=e.head,n=t?1:-1;if(r==(t?i.state.doc.length:0))return p.cursor(r,e.assoc);let o=e.goalColumn,E,l=i.contentDOM.getBoundingClientRect(),a=i.coordsAtPos(r,e.assoc||-1),T=i.documentTop;if(a)o==null&&(o=a.left-l.left),E=n<0?a.top:a.bottom;else{let R=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,i.defaultCharacterWidth*(r-R.from))),E=(n<0?R.top:R.bottom)+T}let h=l.left+o,A=s??i.viewState.heightOracle.textHeight>>1;for(let R=0;;R+=10){let S=E+(A+R)*n,c=tR(i,{x:h,y:S},!1,n);if(S<l.top||S>l.bottom||(n<0?c<r:c>r)){let O=i.docView.coordsForChar(c),f=!O||S<O.top?-1:1;return p.cursor(c,f,void 0,o)}}}function Si(i,e,t){for(;;){let s=0;for(let r of i)r.between(e-1,e+1,(n,o,E)=>{if(e>n&&e<o){let l=s||t||(e-n<o-e?-1:1);e=l<0?n:o,s=l}});if(!s)return e}}function iR(i,e){let t=null;for(let s=0;s<e.ranges.length;s++){let r=e.ranges[s],n=null;if(r.empty){let o=Si(i,r.from,0);o!=r.from&&(n=p.cursor(o,-1))}else{let o=Si(i,r.from,-1),E=Si(i,r.to,1);(o!=r.from||E!=r.to)&&(n=p.range(r.from==r.anchor?o:E,r.from==r.head?o:E))}n&&(t||(t=e.ranges.slice()),t[s]=n)}return t?p.create(t,e.mainIndex):e}function So(i,e,t){let s=Si(i.state.facet(Hi).map(r=>r(i)),t.from,e.head>t.from?-1:1);return s==t.from?t:p.cursor(s,s<t.from?1:-1)}const oi="￿";class CC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=oi}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let r=e;;){this.findPointBefore(s,r);let n=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let E=re.get(r),l=re.get(o);(E&&l?E.breakAfter:(E?E.breakAfter:kr(r))||kr(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>n)&&!LC(o,t)&&this.lineBreak(),r=o}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,o=1,E;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,s),o=this.lineSeparator.length):(E=r.exec(t))&&(n=E.index,o=E[0].length),this.append(t.slice(s,n<0?t.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);s=n+o}}readNode(e){if(e.cmIgnore)return;let t=re.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let r=s.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(_C(e,s.node,s.offset)?t:0))}}function _C(i,e,t){for(;;){if(!e||t<_t(e))return!1;if(e==i)return!0;t=Ts(e)+1,e=e.parentNode}}function LC(i,e){let t;for(;!(i==e||!i);i=i.nextSibling){let s=re.get(i);if(!(s?.isWidget||i.cmIgnore))return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let r=s.overrideDOMText;if(r?.length)return!1}return!0}class sT{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class pC{constructor(e,t,s,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,s,0))){let E=n||o?[]:DC(e),l=new CC(E,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=gC(E,this.bounds.from)}else{let E=e.observer.selectionRange,l=n&&n.node==E.focusNode&&n.offset==E.focusOffset||!EE(e.contentDOM,E.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(E.focusNode,E.focusOffset),a=o&&o.node==E.anchorNode&&o.offset==E.anchorOffset||!EE(e.contentDOM,E.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(E.anchorNode,E.anchorOffset),T=e.viewport;if((y.ios||y.chrome)&&e.state.selection.main.empty&&l!=a&&(T.from>0||T.to<e.state.doc.length)){let h=Math.min(l,a),A=Math.max(l,a),R=T.from-h,S=T.to-A;(R==0||R==1||h==0)&&(S==0||S==-1||A==e.state.doc.length)&&(l=0,a=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(p.range(a,l)):this.newSel=p.single(a,l)}}}function rR(i,e){let t,{newSel:s}=e,r=i.state.selection.main,n=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:E}=e.bounds,l=r.from,a=null;(n===8||y.android&&e.text.length<E-o)&&(l=r.to,a="end");let T=nR(i.state.doc.sliceString(o,E,oi),e.text,l-o,a);T&&(y.chrome&&n==13&&T.toB==T.from+2&&e.text.slice(T.from,T.toB)==oi+oi&&T.toB--,t={from:o+T.from,to:o+T.toA,insert:te.of(e.text.slice(T.from,T.toB).split(oi))})}else s&&(!i.hasFocus&&i.state.facet(Pt)||s.main.eq(r))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!r.empty&&s&&s.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:(y.mac||y.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=p.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:te.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:i.state.doc.lineAt(r.from).to<r.to&&i.docView.lineHasWidget(r.to)&&i.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:i.state.toText(i.inputState.insertingText)}:y.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(s&&(s=p.single(s.main.anchor-1,s.main.head-1)),t={from:r.from,to:r.to,insert:te.of([" "])}),t)return ZE(i,t,s,n);if(s&&!s.main.eq(r)){let o=!1,E="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(o=!0),E=i.inputState.lastSelectionOrigin,E=="select.pointer"&&(s=iR(i.state.facet(Hi).map(l=>l(i)),s))),i.dispatch({selection:s,scrollIntoView:o,userEvent:E}),!0}else return!1}function ZE(i,e,t,s=-1){if(y.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(y.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ps(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Ps(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Ps(i.contentDOM,"Delete",46)))return!0;let n=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let o,E=()=>o||(o=mC(i,e,t));return i.state.facet(WA).some(l=>l(i,e.from,e.to,n,E))||i.dispatch(E()),!0}function mC(i,e,t){let s,r=i.state,n=r.selection.main,o=-1;if(e.from==e.to&&e.from<n.from||e.from>n.to){let l=e.from<n.from?-1:1,a=l<0?n.from:n.to,T=Si(r.facet(Hi).map(h=>h(i)),a,l);e.from==T&&(o=T)}if(o>-1)s={changes:e,selection:p.cursor(e.from+e.insert.length,-1)};else if(e.from>=n.from&&e.to<=n.to&&e.to-e.from>=(n.to-n.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let l=n.from<e.from?r.sliceDoc(n.from,e.from):"",a=n.to>e.to?r.sliceDoc(e.to,n.to):"";s=r.replaceSelection(i.state.toText(l+e.insert.sliceString(0,void 0,i.state.lineBreak)+a))}else{let l=r.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(i.inputState.composing>=0||i.inputState.compositionPendingChange)&&e.to<=n.to+10&&e.to>=n.to-10){let T=i.state.sliceDoc(e.from,e.to),h,A=t&&eR(i,t.main.head);if(A){let S=e.insert.length-(e.to-e.from);h={from:A.from,to:A.to-S}}else h=i.state.doc.lineAt(n.head);let R=n.to-e.to;s=r.changeByRange(S=>{if(S.from==n.from&&S.to==n.to)return{changes:l,range:a||S.map(l)};let c=S.to-R,O=c-T.length;if(i.state.sliceDoc(O,c)!=T||c>=h.from&&O<=h.to)return{range:S};let f=r.changes({from:O,to:c,insert:e.insert}),C=S.to-n.to;return{changes:f,range:a?p.range(Math.max(0,a.anchor+C),Math.max(0,a.head+C)):S.map(f)}})}else s={changes:l,selection:a&&r.selection.replaceRange(a)}}let E="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,E+=".compose",i.inputState.compositionFirstChange&&(E+=".start",i.inputState.compositionFirstChange=!1)),r.update(s,{userEvent:E,scrollIntoView:!0})}function nR(i,e,t,s){let r=Math.min(i.length,e.length),n=0;for(;n<r&&i.charCodeAt(n)==e.charCodeAt(n);)n++;if(n==r&&i.length==e.length)return null;let o=i.length,E=e.length;for(;o>0&&E>0&&i.charCodeAt(o-1)==e.charCodeAt(E-1);)o--,E--;if(s=="end"){let l=Math.max(0,n-Math.min(o,E));t-=o+l-n}if(o<n&&i.length<e.length){let l=t<=n&&t>=o?n-t:0;n-=l,E=n+(E-o),o=n}else if(E<n){let l=t<=n&&t>=E?n-t:0;n-=l,o=n+(o-E),E=n}return{from:n,toA:o,toB:E}}function DC(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:r,focusOffset:n}=i.observer.selectionRange;return t&&(e.push(new sT(t,s)),(r!=t||n!=s)&&e.push(new sT(r,n))),e}function gC(i,e){if(i.length==0)return null;let t=i[0].pos,s=i.length==2?i[1].pos:t;return t>-1&&s>-1?p.single(t+e,s+e):null}class PC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,y.safari&&e.contentDOM.addEventListener("input",()=>null),y.gecko&&XC(e.contentDOM.ownerDocument)}handleEvent(e){!HC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let r of s.observers)r(this.view,t);for(let r of s.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=MC(e),s=this.handlers,r=this.view.contentDOM;for(let n in t)if(n!="scroll"){let o=!t[n].handlers.length,E=s[n];E&&o!=!E.handlers.length&&(r.removeEventListener(n,this.handleEvent),E=null),E||r.addEventListener(n,this.handleEvent,{passive:o})}for(let n in s)n!="scroll"&&!t[n]&&r.removeEventListener(n,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&ER.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),y.android&&y.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return y.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=oR.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||UC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ps(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:y.safari&&!y.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function iT(i,e){return(t,s)=>{try{return e.call(i,s,t)}catch(r){Xe(t.state,r)}}}function MC(i){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of i){let r=s.spec,n=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(n)for(let E in n){let l=n[E];l&&t(E).handlers.push(iT(s.value,l))}if(o)for(let E in o){let l=o[E];l&&t(E).observers.push(iT(s.value,l))}}for(let s in at)t(s).handlers.push(at[s]);for(let s in rt)t(s).observers.push(rt[s]);return e}const oR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],UC="dthko",ER=[16,17,18,20,91,92,224,225],nr=6;function or(i){return Math.max(0,i)*.7+8}function bC(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class BC{constructor(e,t,s,r){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=wd(e.contentDOM),this.atoms=e.state.facet(Hi).map(o=>o(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(z.allowMultipleSelections)&&GC(e,t),this.dragging=xC(e,t)&&TR(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,r=0,n=0,o=this.view.win.innerWidth,E=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:E}=this.scrollParents.y.getBoundingClientRect());let l=zE(this.view);e.clientX-l.left<=r+nr?t=-or(r-e.clientX):e.clientX+l.right>=o-nr&&(t=or(e.clientX-o)),e.clientY-l.top<=n+nr?s=-or(n-e.clientY):e.clientY+l.bottom>=E-nr&&(s=or(e.clientY-E)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=iR(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function GC(i,e){let t=i.state.facet(vA);return t.length?t[0](e):y.mac?e.metaKey:e.ctrlKey}function yC(i,e){let t=i.state.facet(wA);return t.length?t[0](e):y.mac?!e.altKey:!e.ctrlKey}function xC(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let s=fi(i.root);if(!s||s.rangeCount==0)return!0;let r=s.getRangeAt(0).getClientRects();for(let n=0;n<r.length;n++){let o=r[n];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function HC(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=re.get(t))&&s.ignoreEvent(e))return!1;return!0}const at=Object.create(null),rt=Object.create(null),lR=y.ie&&y.ie_version<15||y.ios&&y.webkit_version<604;function FC(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),aR(i,t.value)},50)}function In(i,e,t){for(let s of i.facet(e))t=s(t,i);return t}function aR(i,e){e=In(i.state,QE,e);let{state:t}=i,s,r=1,n=t.toText(e),o=n.lines==t.selection.ranges.length;if(NE!=null&&t.selection.ranges.every(l=>l.empty)&&NE==n.toString()){let l=-1;s=t.changeByRange(a=>{let T=t.doc.lineAt(a.from);if(T.from==l)return{range:a};l=T.from;let h=t.toText((o?n.line(r++).text:e)+t.lineBreak);return{changes:{from:T.from,insert:h},range:p.cursor(a.from+h.length)}})}else o?s=t.changeByRange(l=>{let a=n.line(r++);return{changes:{from:l.from,to:l.to,insert:a.text},range:p.cursor(l.from+a.length)}}):s=t.replaceSelection(n);i.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}rt.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};at.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);rt.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};rt.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};at.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of i.state.facet(VA))if(t=s(i,e),t)break;if(!t&&e.button==0&&(t=wC(i,e)),t){let s=!i.hasFocus;i.inputState.startMouseSelection(new BC(i,e,t,s)),s&&i.observer.ignore(()=>{_A(i.contentDOM);let n=i.root.activeElement;n&&!n.contains(i.contentDOM)&&n.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else i.inputState.setSelectionOrigin("select.pointer");return!1};function rT(i,e,t,s){if(s==1)return p.cursor(e,t);if(s==2)return SC(i.state,e,t);{let r=Ne.find(i.docView,e),n=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:n.from,E=r?r.posAtEnd:n.to;return E<i.state.doc.length&&E==n.to&&E++,p.range(o,E)}}let nT=(i,e,t)=>e>=t.top&&e<=t.bottom&&i>=t.left&&i<=t.right;function YC(i,e,t,s){let r=Ne.find(i.docView,e);if(!r)return 1;let n=e-r.posAtStart;if(n==0)return 1;if(n==r.length)return-1;let o=r.coordsAt(n,-1);if(o&&nT(t,s,o))return-1;let E=r.coordsAt(n,1);return E&&nT(t,s,E)?1:o&&o.bottom>=s?-1:1}function oT(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:YC(i,t,e.clientX,e.clientY)}}const vC=y.ie&&y.ie_version<=11;let ET=null,lT=0,aT=0;function TR(i){if(!vC)return i.detail;let e=ET,t=aT;return ET=i,aT=Date.now(),lT=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(lT+1)%3:1}function wC(i,e){let t=oT(i,e),s=TR(e),r=i.state.selection;return{update(n){n.docChanged&&(t.pos=n.changes.mapPos(t.pos),r=r.map(n.changes))},get(n,o,E){let l=oT(i,n),a,T=rT(i,l.pos,l.bias,s);if(t.pos!=l.pos&&!o){let h=rT(i,t.pos,t.bias,s),A=Math.min(h.from,T.from),R=Math.max(h.to,T.to);T=A<T.from?p.range(A,R):p.range(R,A)}return o?r.replaceRange(r.main.extend(T.from,T.to)):E&&s==1&&r.ranges.length>1&&(a=VC(r,l.pos))?a:E?r.addRange(T):p.create([T])}}}function VC(i,e){for(let t=0;t<i.ranges.length;t++){let{from:s,to:r}=i.ranges[t];if(s<=e&&r>=e)return p.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}at.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let r=i.docView.nearest(e.target);if(r&&r.isWidget){let n=r.posAtStart,o=n+r.length;(n>=t.to||o<=t.from)&&(t=p.range(n,o))}}let{inputState:s}=i;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",In(i.state,qE,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};at.dragend=i=>(i.inputState.draggedContent=null,!1);function TT(i,e,t,s){if(t=In(i.state,QE,t),!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:n}=i.inputState,o=s&&n&&yC(i,e)?{from:n.from,to:n.to}:null,E={from:r,insert:t},l=i.state.changes(o?[o,E]:E);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),i.inputState.draggedContent=null}at.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),r=0,n=()=>{++r==t.length&&TT(i,e,s.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let E=new FileReader;E.onerror=n,E.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(E.result)||(s[o]=E.result),n()},E.readAsText(t[o])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return TT(i,e,s,!0),!0}return!1};at.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=lR?null:e.clipboardData;return t?(aR(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(FC(i),!1)};function kC(i,e){let t=i.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),i.focus()},50)}function WC(i){let e=[],t=[],s=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:n}of i.selection.ranges){let o=i.doc.lineAt(n);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}s=!0}return{text:In(i,qE,e.join(i.lineBreak)),ranges:t,linewise:s}}let NE=null;at.copy=at.cut=(i,e)=>{let{text:t,ranges:s,linewise:r}=WC(i.state);if(!t&&!r)return!1;NE=r?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let n=lR?null:e.clipboardData;return n?(n.clearData(),n.setData("text/plain",t),!0):(kC(i,t),!1)};const hR=Lt.define();function AR(i,e){let t=[];for(let s of i.facet(XA)){let r=s(i,e);r&&t.push(r)}return t.length?i.update({effects:t,annotations:hR.of(!0)}):null}function RR(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=AR(i.state,e);t?i.dispatch(t):i.update([])}},10)}rt.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),RR(i)};rt.blur=i=>{i.observer.clearSelectionRange(),RR(i)};rt.compositionstart=rt.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};rt.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,y.chrome&&y.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};rt.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};at.beforeinput=(i,e)=>{var t,s;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(i.inputState.insertingText=e.data,i.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&i.observer.editContext){let n=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(n&&o.length){let E=o[0],l=i.posAtDOM(E.startContainer,E.startOffset),a=i.posAtDOM(E.endContainer,E.endOffset);return ZE(i,{from:l,to:a,insert:i.state.toText(n)},null),!0}}let r;if(y.chrome&&y.android&&(r=oR.find(n=>n.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let n=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return y.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),y.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>rt.compositionend(i,e),20),!1};const hT=new Set;function XC(i){hT.has(i)||(hT.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const AT=["pre-wrap","normal","pre-line","break-spaces"];let Ys=!1;function RT(){Ys=!1}class KC{constructor(e){this.lineWrapping=e,this.doc=te.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return AT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let r=e[s];r<0?s++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,s,r,n,o){let E=AT.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=E;if(this.lineWrapping=E,this.lineHeight=t,this.charWidth=s,this.textHeight=r,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<o.length;a++){let T=o[a];T<0?a++:this.heightSamples[Math.floor(T*10)]=!0}}return l}}class $C{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ft{constructor(e,t,s,r,n){this.from=e,this.length=t,this.top=s,this.height=r,this._content=n}get type(){return typeof this._content=="number"?ve.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Xt?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ft(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ae=(function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i})(ae||(ae={}));const Br=.001;class we{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Br&&(Ys=!0),this.height=e)}replace(e,t,s){return we.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,r){let n=this,o=s.doc;for(let E=r.length-1;E>=0;E--){let{fromA:l,toA:a,fromB:T,toB:h}=r[E],A=n.lineAt(l,ae.ByPosNoHeight,s.setDoc(t),0,0),R=A.to>=a?A:n.lineAt(a,ae.ByPosNoHeight,s,0,0);for(h+=R.to-a,a=R.to;E>0&&A.from<=r[E-1].toA;)l=r[E-1].fromA,T=r[E-1].fromB,E--,l<A.from&&(A=n.lineAt(l,ae.ByPosNoHeight,s,0,0));T+=A.from-l,l=A.from;let S=el.build(s.setDoc(o),e,T,h);n=Kr(n,n.replace(l,a,S))}return n.updateHeight(s,0)}static empty(){return new je(0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,r=0,n=0;for(;;)if(t==s)if(r>n*2){let E=e[t-1];E.break?e.splice(--t,1,E.left,null,E.right):e.splice(--t,1,E.left,E.right),s+=1+E.break,r-=E.size}else if(n>r*2){let E=e[s];E.break?e.splice(s,1,E.left,null,E.right):e.splice(s,1,E.left,E.right),s+=2+E.break,n-=E.size}else break;else if(r<n){let E=e[t++];E&&(r+=E.size)}else{let E=e[--s];E&&(n+=E.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,s++),new JC(we.of(e.slice(0,t)),o,we.of(e.slice(s)))}}function Kr(i,e){return i==e?i:(i.constructor!=e.constructor&&(Ys=!0),e)}we.prototype.size=1;class SR extends we{constructor(e,t,s){super(e,t),this.deco=s}blockAt(e,t,s,r){return new ft(r,this.length,s,this.height,this.deco||0)}lineAt(e,t,s,r,n){return this.blockAt(0,s,r,n)}forEachLine(e,t,s,r,n,o){e<=n+this.length&&t>=n&&o(this.blockAt(0,s,r,n))}updateHeight(e,t=0,s=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class je extends SR{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,s,r){return new ft(r,this.length,s,this.height,this.breaks)}replace(e,t,s){let r=s[0];return s.length==1&&(r instanceof je||r instanceof be&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof be?r=new je(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):we.of(s)}updateHeight(e,t=0,s=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(s||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class be extends we{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,n=r-s+1,o,E=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*n);o=l/n,this.length>n+1&&(E=(this.height-l)/(this.length-n-1))}else o=this.height/n;return{firstLine:s,lastLine:r,perLine:o,perChar:E}}blockAt(e,t,s,r){let{firstLine:n,lastLine:o,perLine:E,perChar:l}=this.heightMetrics(t,r);if(t.lineWrapping){let a=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),T=t.doc.lineAt(a),h=E+T.length*l,A=Math.max(s,e-h/2);return new ft(T.from,T.length,A,h,0)}else{let a=Math.max(0,Math.min(o-n,Math.floor((e-s)/E))),{from:T,length:h}=t.doc.line(n+a);return new ft(T,h,s+E*a,E,0)}}lineAt(e,t,s,r,n){if(t==ae.ByHeight)return this.blockAt(e,s,r,n);if(t==ae.ByPosNoHeight){let{from:R,to:S}=s.doc.lineAt(e);return new ft(R,S-R,0,0,0)}let{firstLine:o,perLine:E,perChar:l}=this.heightMetrics(s,n),a=s.doc.lineAt(e),T=E+a.length*l,h=a.number-o,A=r+E*h+l*(a.from-n-h);return new ft(a.from,a.length,Math.max(r,Math.min(A,r+this.height-T)),T,0)}forEachLine(e,t,s,r,n,o){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:E,perLine:l,perChar:a}=this.heightMetrics(s,n);for(let T=e,h=r;T<=t;){let A=s.doc.lineAt(T);if(T==e){let S=A.number-E;h+=l*S+a*(e-n-S)}let R=l+a*A.length;o(new ft(A.from,A.length,h,R,0)),h+=R,T=A.to+1}}replace(e,t,s){let r=this.length-t;if(r>0){let n=s[s.length-1];n instanceof be?s[s.length-1]=new be(n.length+r):s.push(null,new be(r-1))}if(e>0){let n=s[0];n instanceof be?s[0]=new be(e+n.length):s.unshift(new be(e-1),null)}return we.of(s)}decomposeLeft(e,t){t.push(new be(e-1),null)}decomposeRight(e,t){t.push(null,new be(this.length-e-1))}updateHeight(e,t=0,s=!1,r){let n=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],E=Math.max(t,r.from),l=-1;for(r.from>t&&o.push(new be(r.from-t-1).updateHeight(e,t));E<=n&&r.more;){let T=e.doc.lineAt(E).length;o.length&&o.push(null);let h=r.heights[r.index++];l==-1?l=h:Math.abs(h-l)>=Br&&(l=-2);let A=new je(T,h);A.outdated=!1,o.push(A),E+=T+1}E<=n&&o.push(null,new be(n-E).updateHeight(e,E));let a=we.of(o);return(l<0||Math.abs(a.height-this.height)>=Br||Math.abs(l-this.heightMetrics(e,t).perLine)>=Br)&&(Ys=!0),Kr(this,a)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class JC extends we{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,r){let n=s+this.left.height;return e<n?this.left.blockAt(e,t,s,r):this.right.blockAt(e,t,n,r+this.left.length+this.break)}lineAt(e,t,s,r,n){let o=r+this.left.height,E=n+this.left.length+this.break,l=t==ae.ByHeight?e<o:e<E,a=l?this.left.lineAt(e,t,s,r,n):this.right.lineAt(e,t,s,o,E);if(this.break||(l?a.to<E:a.from>E))return a;let T=t==ae.ByPosNoHeight?ae.ByPosNoHeight:ae.ByPos;return l?a.join(this.right.lineAt(E,T,s,o,E)):this.left.lineAt(E,T,s,r,n).join(a)}forEachLine(e,t,s,r,n,o){let E=r+this.left.height,l=n+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,s,r,n,o),t>=l&&this.right.forEachLine(e,t,s,E,l,o);else{let a=this.lineAt(l,ae.ByPos,s,r,n);e<a.from&&this.left.forEachLine(e,a.from-1,s,r,n,o),a.to>=e&&a.from<=t&&o(a),t>a.to&&this.right.forEachLine(a.to+1,t,s,E,l,o)}}replace(e,t,s){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,s));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let E of s)n.push(E);if(e>0&&ST(n,o-1),t<this.length){let E=n.length;this.decomposeRight(t,n),ST(n,E)}return we.of(n)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,r=s+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?we.of(this.break?[e,null,t]:[e,t]):(this.left=Kr(this.left,e),this.right=Kr(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,r){let{left:n,right:o}=this,E=t+n.length+this.break,l=null;return r&&r.from<=t+n.length&&r.more?l=n=n.updateHeight(e,t,s,r):n.updateHeight(e,t,s),r&&r.from<=E+o.length&&r.more?l=o=o.updateHeight(e,E,s,r):o.updateHeight(e,E,s),l?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ST(i,e){let t,s;i[e]==null&&(t=i[e-1])instanceof be&&(s=i[e+1])instanceof be&&i.splice(e-1,3,new be(t.length+1+s.length))}const QC=5;class el{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof je?r.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new je(s-this.pos,-1)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let r=s.widget?s.widget.estimatedHeight:0,n=s.widget?s.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;s.block?this.addBlock(new SR(o,r,s)):(o||n||r>=QC)&&this.addLineDeco(r,n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new je(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let s=new be(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof je)return e;let t=new je(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let r=this.ensureLine();r.length+=s,r.collapsed+=s,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof je)&&!this.isCovered?this.nodes.push(new je(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let r of this.nodes)r instanceof je&&r.updateHeight(this.oracle,s),s+=r?r.length:1;return this.nodes}static build(e,t,s,r){let n=new el(s,e);return ee.spans(t,s,r,n,0),n.finish(s)}}function qC(i,e,t){let s=new jC;return ee.compare(i,e,t,s,0),s.changes}class jC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,r){(e<t||s&&s.heightRelevant||r&&r.heightRelevant)&&br(e,t,this.changes,5)}}function zC(i,e){let t=i.getBoundingClientRect(),s=i.ownerDocument,r=s.defaultView||window,n=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),E=Math.max(0,t.top),l=Math.min(r.innerHeight,t.bottom);for(let a=i.parentNode;a&&a!=s.body;)if(a.nodeType==1){let T=a,h=window.getComputedStyle(T);if((T.scrollHeight>T.clientHeight||T.scrollWidth>T.clientWidth)&&h.overflow!="visible"){let A=T.getBoundingClientRect();n=Math.max(n,A.left),o=Math.min(o,A.right),E=Math.max(E,A.top),l=Math.min(a==i.parentNode?r.innerHeight:l,A.bottom)}a=h.position=="absolute"||h.position=="fixed"?T.offsetParent:T.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:n-t.left,right:Math.max(n,o)-t.left,top:E-(t.top+e),bottom:Math.max(E,l)-(t.top+e)}}function ZC(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function e_(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class co{constructor(e,t,s,r){this.from=e,this.to=t,this.size=s,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let r=e[s],n=t[s];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(e,t){return V.replace({widget:new t_(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class t_ extends yt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class cT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=OT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Te.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(jE).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new KC(t),this.stateDeco=e.facet(ui).filter(s=>typeof s!="function"),this.heightMap=we.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle.setDoc(e.doc),[new st(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=V.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let r=s?t.head:t.anchor;if(!e.some(({from:n,to:o})=>r>=n&&r<=o)){let{from:n,to:o}=this.lineBlockAt(r);e.push(new Er(n,o))}}return this.viewports=e.sort((s,r)=>s.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?OT:new tl(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ei(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(ui).filter(T=>typeof T!="function");let r=e.changedRanges,n=st.extendWithRanges(r,qC(s,this.stateDeco,e?e.changes:_e.empty(this.state.doc.length))),o=this.heightMap.height,E=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);RT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=o||Ys)&&(e.flags|=2),E?(this.scrollAnchorPos=e.changes.mapPos(E.from,-1),this.scrollAnchorHeight=E.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(a||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($A)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),r=this.heightOracle,n=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Te.RTL:Te.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),E=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=E.height;this.contentDOMHeight=E.height,this.mustMeasureContent=!1;let a=0,T=0;if(E.width&&E.height){let{scaleX:g,scaleY:m}=CA(t,E);(g>.005&&Math.abs(this.scaleX-g)>.005||m>.005&&Math.abs(this.scaleY-m)>.005)&&(this.scaleX=g,this.scaleY=m,a|=16,o=l=!0)}let h=(parseInt(s.paddingTop)||0)*this.scaleY,A=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=A)&&(this.paddingTop=h,this.paddingBottom=A,a|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=16);let R=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=R&&(this.scrollAnchorHeight=-1,this.scrollTop=R),this.scrolledToBottom=pA(e.scrollDOM);let S=(this.printing?e_:zC)(t,this.paddingTop),c=S.top-this.pixelViewport.top,O=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(l=!0)),!this.inView&&!this.scrollTarget&&!ZC(e.dom))return 0;let C=E.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=E.width,this.editorHeight=e.scrollDOM.clientHeight,a|=16),l){let g=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(g)&&(o=!0),o||r.lineWrapping&&Math.abs(C-this.contentDOMWidth)>r.charWidth){let{lineHeight:m,charWidth:U,textHeight:b}=e.docView.measureTextSize();o=m>0&&r.refresh(n,m,U,b,Math.max(5,C/U),g),o&&(e.docView.minWidth=0,a|=16)}c>0&&O>0?T=Math.max(c,O):c<0&&O<0&&(T=Math.min(c,O)),RT();for(let m of this.viewports){let U=m.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(m);this.heightMap=(o?we.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle,[new st(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new $C(m.from,U))}Ys&&(a|=2)}let _=!this.viewportIsAppropriate(this.viewport,T)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(a&2&&(a|=this.updateScaler()),this.viewport=this.getViewport(T,this.scrollTarget),a|=this.updateForViewport()),(a&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,n=this.heightOracle,{visibleTop:o,visibleBottom:E}=this,l=new Er(r.lineAt(o-s*1e3,ae.ByHeight,n,0,0).from,r.lineAt(E+(1-s)*1e3,ae.ByHeight,n,0,0).to);if(t){let{head:a}=t.range;if(a<l.from||a>l.to){let T=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=r.lineAt(a,ae.ByPos,n,0,0),A;t.y=="center"?A=(h.top+h.bottom)/2-T/2:t.y=="start"||t.y=="nearest"&&a<l.from?A=h.top:A=h.bottom-T,l=new Er(r.lineAt(A-1e3/2,ae.ByHeight,n,0,0).from,r.lineAt(A+T+1e3/2,ae.ByHeight,n,0,0).to)}}return l}mapViewport(e,t){let s=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Er(this.heightMap.lineAt(s,ae.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,ae.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,ae.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:E}=this;return(e==0||r<=o-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||n>=E+Math.max(10,Math.min(s,250)))&&r>o-2*1e3&&n<E+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let r of e)t.touchesRange(r.from,r.to)||s.push(new co(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,r=s?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=Te.LTR&&!s)return[];let E=[],l=(T,h,A,R)=>{if(h-T<n)return;let S=this.state.selection.main,c=[S.from];S.empty||c.push(S.to);for(let f of c)if(f>T&&f<h){l(T,f-10,A,R),l(f+10,h,A,R);return}let O=i_(e,f=>f.from>=A.from&&f.to<=A.to&&Math.abs(f.from-T)<n&&Math.abs(f.to-h)<n&&!c.some(C=>f.from<C&&f.to>C));if(!O){if(h<A.to&&t&&s&&t.visibleRanges.some(_=>_.from<=h&&_.to>=h)){let _=t.moveToLineBoundary(p.cursor(h),!1,!0).head;_>T&&(h=_)}let f=this.gapSize(A,T,h,R),C=s||f<2e6?f:2e6;O=new co(T,h,f,C)}E.push(O)},a=T=>{if(T.length<o||T.type!=ve.Text)return;let h=s_(T.from,T.to,this.stateDeco);if(h.total<o)return;let A=this.scrollTarget?this.scrollTarget.range.head:null,R,S;if(s){let c=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,f;if(A!=null){let C=ar(h,A),_=((this.visibleBottom-this.visibleTop)/2+c)/T.height;O=C-_,f=C+_}else O=(this.visibleTop-T.top-c)/T.height,f=(this.visibleBottom-T.top+c)/T.height;R=lr(h,O),S=lr(h,f)}else{let c=h.total*this.heightOracle.charWidth,O=r*this.heightOracle.charWidth,f=0;if(c>2e6)for(let U of e)U.from>=T.from&&U.from<T.to&&U.size!=U.displaySize&&U.from*this.heightOracle.charWidth+f<this.pixelViewport.left&&(f=U.size-U.displaySize);let C=this.pixelViewport.left+f,_=this.pixelViewport.right+f,g,m;if(A!=null){let U=ar(h,A),b=((_-C)/2+O)/c;g=U-b,m=U+b}else g=(C-O)/c,m=(_+O)/c;R=lr(h,g),S=lr(h,m)}R>T.from&&l(T.from,R,T,h),S<T.to&&l(S,T.to,T,h)};for(let T of this.viewportLines)Array.isArray(T.type)?T.type.forEach(a):a(T);return E}gapSize(e,t,s,r){let n=ar(r,s)-ar(r,t);return this.heightOracle.lineWrapping?e.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(e){co.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=V.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];ee.spans(t,this.viewport.from,this.viewport.to,{span(n,o){s.push({from:n,to:o})},point(){}},20);let r=0;if(s.length!=this.visibleRanges.length)r=12;else for(let n=0;n<s.length&&!(r&8);n++){let o=this.visibleRanges[n],E=s[n];(o.from!=E.from||o.to!=E.to)&&(r|=4,e&&e.mapPos(o.from,-1)==E.from&&e.mapPos(o.to,1)==E.to||(r|=8))}return this.visibleRanges=s,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ei(this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ei(this.heightMap.lineAt(this.scaler.fromDOM(e),ae.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ei(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Er{constructor(e,t){this.from=e,this.to=t}}function s_(i,e,t){let s=[],r=i,n=0;return ee.spans(t,i,e,{span(){},point(o,E){o>r&&(s.push({from:r,to:o}),n+=o-r),r=E}},20),r<e&&(s.push({from:r,to:e}),n+=e-r),{total:n,ranges:s}}function lr({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(i*t);for(let r=0;;r++){let{from:n,to:o}=e[r],E=o-n;if(s<=E)return n+s;s-=E}}function ar(i,e){let t=0;for(let{from:s,to:r}of i.ranges){if(e<=r){t+=e-s;break}t+=r-s}return t/i.total}function i_(i,e){for(let t of i)if(e(t))return t}const OT={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class tl{constructor(e,t,s){let r=0,n=0,o=0;this.viewports=s.map(({from:E,to:l})=>{let a=t.lineAt(E,ae.ByPos,e,0,0).top,T=t.lineAt(l,ae.ByPos,e,0,0).bottom;return r+=T-a,{from:E,to:l,top:a,bottom:T,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let E of this.viewports)E.domTop=o+(E.top-n)*this.scale,o=E.domBottom=E.domTop+(E.bottom-E.top),n=E.bottom}toDOM(e){for(let t=0,s=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return r+(e-s)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);s=n.bottom,r=n.domBottom}}fromDOM(e){for(let t=0,s=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return s+(e-r)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);s=n.bottom,r=n.domBottom}}eq(e){return e instanceof tl?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function Ei(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),s=e.toDOM(i.bottom);return new ft(i.from,i.length,t,s-t,Array.isArray(i._content)?i._content.map(r=>Ei(r,e)):i._content)}const Tr=x.define({combine:i=>i.join(" ")}),IE=x.define({combine:i=>i.indexOf(!0)>-1}),fE=Wt.newName(),cR=Wt.newName(),NR=Wt.newName(),IR={"&light":"."+cR,"&dark":"."+NR};function uE(i,e,t){return new Wt(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+s}})}const r_=uE("."+fE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},IR),n_={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Oo=y.ie&&y.ie_version<=11;class o_{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Vd,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(y.ie&&y.ie_version<=11||y.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&y.android&&e.constructor.EDIT_CONTEXT!==!1&&!(y.chrome&&y.chrome_version<126)&&(this.editContext=new l_(e),e.state.facet(Pt)&&(e.contentDOM.editContext=this.editContext.editContext)),Oo&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,r=this.selectionRange;if(s.state.facet(Pt)?s.root.activeElement!=this.dom:!Ur(this.dom,r))return;let n=r.anchorNode&&s.docView.nearest(r.anchorNode);if(n&&n.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(y.ie&&y.ie_version<=11||y.android&&y.chrome)&&!s.state.selection.main.empty&&r.focusNode&&Ai(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=fi(e.root);if(!t)return!1;let s=y.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&E_(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let r=Ur(this.dom,s);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Wd(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,n_),Oo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Oo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let r=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=n.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&n.force&&Ps(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,r=!1;for(let n of e){let o=this.readMutation(n);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:s}=o:(t=Math.min(o.from,t),s=Math.max(o.to,s)))}return{from:t,to:s,typeOver:r}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),r=this.selectionChanged&&Ur(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new pC(this.view,e,t,s);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,r=rR(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let s=NT(t,e.previousSibling||e.target.previousSibling,-1),r=NT(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Pt)!=e.state.facet(Pt)&&(e.view.contentDOM.editContext=e.state.facet(Pt)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function NT(i,e,t){for(;e;){let s=re.get(e);if(s&&s.parent==i)return s;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function IT(i,e){let t=e.startContainer,s=e.startOffset,r=e.endContainer,n=e.endOffset,o=i.docView.domAtPos(i.state.selection.main.anchor);return Ai(o.node,o.offset,r,n)&&([t,s,r,n]=[r,n,t,s]),{anchorNode:t,anchorOffset:s,focusNode:r,focusOffset:n}}function E_(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return IT(i,r)}let t=null;function s(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",s,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",s,!0),t?IT(i,t):null}class l_{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let r=e.state.selection.main,{anchor:n,head:o}=r,E=this.toEditorPos(s.updateRangeStart),l=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:E,drifted:!1});let a=l-E>s.text.length;E==this.from&&n<this.from?E=n:l==this.to&&n>this.to&&(l=n);let T=nR(e.state.sliceDoc(E,l),s.text,(a?r.from:r.to)-E,a?"end":null);if(!T){let A=p.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));A.main.eq(r)||e.dispatch({selection:A,userEvent:"select"});return}let h={from:T.from+E,to:T.toA+E,insert:te.of(s.text.slice(T.from,T.toB).split(`
`))};if((y.mac||y.android)&&h.from==o-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:E,to:l,insert:te.of([s.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let A=this.to-this.from+(h.to-h.from+h.insert.length);ZE(e,h,p.single(this.toEditorPos(s.selectionStart,A),this.toEditorPos(s.selectionEnd,A)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let r=[],n=null;for(let o=this.toEditorPos(s.rangeStart),E=this.toEditorPos(s.rangeEnd);o<E;o++){let l=e.coordsForChar(o);n=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||n||new DOMRect,r.push(n)}t.updateCharacterBounds(s.rangeStart,r)},this.handlers.textformatupdate=s=>{let r=[];for(let n of s.getTextFormats()){let o=n.underlineStyle,E=n.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(E)){let l=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);if(l<a){let T=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(E)?1:2}px`;r.push(V.mark({attributes:{style:T}}).range(l,a))}}}e.dispatch({effects:QA.of(V.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let r=fi(s.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,r=this.pendingContextChange;return e.changes.iterChanges((n,o,E,l,a)=>{if(s)return;let T=a.length-(o-n);if(r&&o>=r.to)if(r.from==n&&r.to==o&&r.insert.eq(a)){r=this.pendingContextChange=null,t+=T,this.to+=T;return}else r=null,this.revertPending(e.state);if(n+=t,o+=t,o<=this.from)this.from+=T,this.to+=T;else if(n<this.to){if(n<this.from||o>this.to||this.to-this.from+a.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(o),a.toString()),this.to+=T}t+=T}),r&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(s,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class G{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(r=>r.forEach(n=>s(n,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||kd(e.parent)||document,this.viewState=new cT(e.state||z.create(e)),e.scrollTo&&e.scrollTo.is(rr)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ls).map(r=>new Ao(r));for(let r of this.plugins)r.update(this);this.observer=new o_(this),this.inputState=new PC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new qa(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Le?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,r,n=this.state;for(let A of e){if(A.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=A.state}if(this.destroyed){this.viewState.state=n;return}let o=this.hasFocus,E=0,l=null;e.some(A=>A.annotation(hR))?(this.inputState.notifiedFocused=o,E=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=AR(n,o),l||(E=1));let a=this.observer.delayedAndroidKey,T=null;if(a?(this.observer.clearDelayedAndroidKey(),T=this.observer.readChange(),(T&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(T=null)):this.observer.clear(),n.facet(z.phrases)!=this.state.facet(z.phrases))return this.setState(n);r=Xr.create(this,n,e),r.flags|=E;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let A of e){if(h&&(h=h.map(A.changes)),A.scrollIntoView){let{main:R}=A.state.selection;h=new Ms(R.empty?R:p.cursor(R.head,R.head>R.anchor?-1:1))}for(let R of A.effects)R.is(rr)&&(h=R.value.clip(this.state))}this.viewState.update(r,h),this.bidiCache=$r.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(ni)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(A=>A.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Tr)!=r.state.facet(Tr)&&(this.viewState.mustMeasureContent=!0),(t||s||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let A of this.state.facet(SE))try{A(r)}catch(R){Xe(this.state,R,"update listener")}(l||T)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),T&&!rR(this,T)&&a.force&&Ps(this.contentDOM,a.key,a.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new cT(e),this.plugins=e.facet(Ls).map(s=>new Ao(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new qa(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ls),s=e.state.facet(Ls);if(t!=s){let r=[];for(let n of s){let o=t.indexOf(n);if(o<0)r.push(new Ao(n));else{let E=this.plugins[o];E.mustUpdate=e,r.push(E)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){Xe(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,r=s.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let E=0;;E++){if(o<0)if(pA(s))n=-1,o=this.viewState.heightMap.height;else{let R=this.viewState.scrollAnchorAt(r);n=R.from,o=R.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(E>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];l&4||([this.measureRequests,a]=[a,this.measureRequests]);let T=a.map(R=>{try{return R.read(this)}catch(S){return Xe(this.state,S),fT}}),h=Xr.create(this,this.state,[]),A=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),A=this.docView.update(h),A&&this.docViewUpdate());for(let R=0;R<a.length;R++)if(T[R]!=fT)try{let S=a[R];S.write&&S.write(T[R],this)}catch(S){Xe(this.state,S)}if(A&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let S=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-o;if(S>1||S<-1){r=r+S,s.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let E of this.state.facet(SE))E(t)}get themeClasses(){return fE+" "+(this.state.facet(IE)?NR:cR)+" "+this.state.facet(Tr)}updateAttrs(){let e=uT(this,qA,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pt)?"true":"false",class:"cm-content",style:`${y.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),uT(this,jE,t);let s=this.observer.ignore(()=>{let r=aE(this.contentDOM,this.contentAttrs,t),n=aE(this.dom,this.editorAttrs,e);return r||n});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let r of s.effects)if(r.is(G.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ni);let e=this.state.facet(G.cspNonce);Wt.mount(this.root,this.styleModules.concat(r_).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return So(this,e,tT(this,e,t,s))}moveByGroup(e,t){return So(this,e,tT(this,e,t,s=>uC(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),r=this.textDirectionAt(e.from),n=s[t?s.length-1:0];return p.cursor(n.side(t,r)+e.from,n.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,s=!0){return fC(this,e,t,s)}moveVertically(e,t,s){return So(this,e,dC(this,e,t,s))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),tR(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let r=this.state.doc.lineAt(e),n=this.bidiSpans(r),o=n[wt.find(n,e-r.from,-1,t)];return Gi(s,o.dir==Te.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(KA)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>a_)return FA(e.length);let t=this.textDirectionAt(e.from),s;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||HA(n.isolates,s=Qa(this,e))))return n.order;s||(s=Qa(this,e));let r=iC(e.text,t,s);return this.bidiCache.push(new $r(e.from,e.to,t,s,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||y.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{_A(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return rr.of(new Ms(typeof e=="number"?p.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return rr.of(new Ms(p.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ce.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ce.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=Wt.newName(),r=[Tr.of(s),ni.of(uE(`.${s}`,e))];return t&&t.dark&&r.push(IE.of(!0)),r}static baseTheme(e){return Os.lowest(ni.of(uE("."+fE,e,IR)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),r=s&&re.get(s)||re.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}G.styleModule=ni;G.inputHandler=WA;G.clipboardInputFilter=QE;G.clipboardOutputFilter=qE;G.scrollHandler=JA;G.focusChangeEffect=XA;G.perLineTextDirection=KA;G.exceptionSink=kA;G.updateListener=SE;G.editable=Pt;G.mouseSelectionStyle=VA;G.dragMovesSelection=wA;G.clickAddsSelectionRange=vA;G.decorations=ui;G.outerDecorations=jA;G.atomicRanges=Hi;G.bidiIsolatedRanges=zA;G.scrollMargins=ZA;G.darkTheme=IE;G.cspNonce=x.define({combine:i=>i.length?i[0]:""});G.contentAttributes=jE;G.editorAttributes=qA;G.lineWrapping=G.contentAttributes.of({class:"cm-lineWrapping"});G.announce=Q.define();const a_=4096,fT={};class $r{constructor(e,t,s,r,n,o){this.from=e,this.to=t,this.dir=s,this.isolates=r,this.fresh=n,this.order=o}static update(e,t){if(t.empty&&!e.some(n=>n.fresh))return e;let s=[],r=e.length?e[e.length-1].dir:Te.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir==r&&!t.touchesRange(o.from,o.to)&&s.push(new $r(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return s}}function uT(i,e,t){for(let s=i.state.facet(e),r=s.length-1;r>=0;r--){let n=s[r],o=typeof n=="function"?n(i):n;o&&lE(o,t)}return t}const T_=y.mac?"mac":y.windows?"win":y.linux?"linux":"key";function h_(i,e){const t=i.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let r,n,o,E;for(let l=0;l<t.length-1;++l){const a=t[l];if(/^(cmd|meta|m)$/i.test(a))E=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))e=="mac"?E=!0:n=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(s="Alt-"+s),n&&(s="Ctrl-"+s),E&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function hr(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const A_=Os.default(G.domEventHandlers({keydown(i,e){return uR(fR(e.state),i,e,"editor")}})),Fi=x.define({enables:A_}),dT=new WeakMap;function fR(i){let e=i.facet(Fi),t=dT.get(e);return t||dT.set(e,t=c_(e.reduce((s,r)=>s.concat(r),[]))),t}function R_(i,e,t){return uR(fR(i.state),e,i,t)}let Yt=null;const S_=4e3;function c_(i,e=T_){let t=Object.create(null),s=Object.create(null),r=(o,E)=>{let l=s[o];if(l==null)s[o]=E;else if(l!=E)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},n=(o,E,l,a,T)=>{var h,A;let R=t[o]||(t[o]=Object.create(null)),S=E.split(/ (?!$)/).map(f=>h_(f,e));for(let f=1;f<S.length;f++){let C=S.slice(0,f).join(" ");r(C,!0),R[C]||(R[C]={preventDefault:!0,stopPropagation:!1,run:[_=>{let g=Yt={view:_,prefix:C,scope:o};return setTimeout(()=>{Yt==g&&(Yt=null)},S_),!0}]})}let c=S.join(" ");r(c,!1);let O=R[c]||(R[c]={preventDefault:!1,stopPropagation:!1,run:((A=(h=R._any)===null||h===void 0?void 0:h.run)===null||A===void 0?void 0:A.slice())||[]});l&&O.run.push(l),a&&(O.preventDefault=!0),T&&(O.stopPropagation=!0)};for(let o of i){let E=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let a of E){let T=t[a]||(t[a]=Object.create(null));T._any||(T._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let A in T)T[A].run.push(R=>h(R,dE))}let l=o[e]||o.key;if(l)for(let a of E)n(a,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&n(a,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let dE=null;function uR(i,e,t,s){dE=e;let r=zc(e),n=ke(r,0),o=It(n)==r.length&&r!=" ",E="",l=!1,a=!1,T=!1;Yt&&Yt.view==t&&Yt.scope==s&&(E=Yt.prefix+" ",ER.indexOf(e.keyCode)<0&&(a=!0,Yt=null));let h=new Set,A=O=>{if(O){for(let f of O.run)if(!h.has(f)&&(h.add(f),f(t)))return O.stopPropagation&&(T=!0),!0;O.preventDefault&&(O.stopPropagation&&(T=!0),a=!0)}return!1},R=i[s],S,c;return R&&(A(R[E+hr(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(y.windows&&e.ctrlKey&&e.altKey)&&!(y.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(S=Zc[e.keyCode])&&S!=r?(A(R[E+hr(S,e,!0)])||e.shiftKey&&(c=eO[e.keyCode])!=r&&c!=S&&A(R[E+hr(c,e,!1)]))&&(l=!0):o&&e.shiftKey&&A(R[E+hr(r,e,!0)])&&(l=!0),!l&&A(R._any)&&(l=!0)),a&&(l=!0),l&&T&&e.stopPropagation(),dE=null,l}class Yi{constructor(e,t,s,r,n){this.className=e,this.left=t,this.top=s,this.width=r,this.height=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,s){if(s.empty){let r=e.coordsAtPos(s.head,s.assoc||1);if(!r)return[];let n=dR(e);return[new Yi(t,r.left-n.left,r.top-n.top,null,r.bottom-r.top)]}else return O_(e,t,s)}}function dR(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==Te.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function CT(i,e,t,s){let r=i.coordsAtPos(e,t*2);if(!r)return s;let n=i.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,E=i.posAtCoords({x:n.left+1,y:o}),l=i.posAtCoords({x:n.right-1,y:o});return E==null||l==null?s:{from:Math.max(s.from,Math.min(E,l)),to:Math.min(s.to,Math.max(E,l))}}function O_(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let s=Math.max(t.from,i.viewport.from),r=Math.min(t.to,i.viewport.to),n=i.textDirection==Te.LTR,o=i.contentDOM,E=o.getBoundingClientRect(),l=dR(i),a=o.querySelector(".cm-line"),T=a&&window.getComputedStyle(a),h=E.left+(T?parseInt(T.paddingLeft)+Math.min(0,parseInt(T.textIndent)):0),A=E.right-(T?parseInt(T.paddingRight):0),R=OE(i,s,1),S=OE(i,r,-1),c=R.type==ve.Text?R:null,O=S.type==ve.Text?S:null;if(c&&(i.lineWrapping||R.widgetLineBreaks)&&(c=CT(i,s,1,c)),O&&(i.lineWrapping||S.widgetLineBreaks)&&(O=CT(i,r,-1,O)),c&&O&&c.from==O.from&&c.to==O.to)return C(_(t.from,t.to,c));{let m=c?_(t.from,null,c):g(R,!1),U=O?_(null,t.to,O):g(S,!0),b=[];return(c||R).to<(O||S).from-(c&&O?1:0)||R.widgetLineBreaks>1&&m.bottom+i.defaultLineHeight/2<U.top?b.push(f(h,m.bottom,A,U.top)):m.bottom<U.top&&i.elementAtHeight((m.bottom+U.top)/2).type==ve.Text&&(m.bottom=U.top=(m.bottom+U.top)/2),C(m).concat(b).concat(C(U))}function f(m,U,b,W){return new Yi(e,m-l.left,U-l.top,b-m,W-U)}function C({top:m,bottom:U,horizontal:b}){let W=[];for(let v=0;v<b.length;v+=2)W.push(f(b[v],m,b[v+1],U));return W}function _(m,U,b){let W=1e9,v=-1e9,q=[];function X($,Z,Re,ne,fe){let se=i.coordsAtPos($,$==b.to?-2:2),Ae=i.coordsAtPos(Re,Re==b.from?2:-2);!se||!Ae||(W=Math.min(se.top,Ae.top,W),v=Math.max(se.bottom,Ae.bottom,v),fe==Te.LTR?q.push(n&&Z?h:se.left,n&&ne?A:Ae.right):q.push(!n&&ne?h:Ae.left,!n&&Z?A:se.right))}let w=m??b.from,K=U??b.to;for(let $ of i.visibleRanges)if($.to>w&&$.from<K)for(let Z=Math.max($.from,w),Re=Math.min($.to,K);;){let ne=i.state.doc.lineAt(Z);for(let fe of i.bidiSpans(ne)){let se=fe.from+ne.from,Ae=fe.to+ne.from;if(se>=Re)break;Ae>Z&&X(Math.max(se,Z),m==null&&se<=w,Math.min(Ae,Re),U==null&&Ae>=K,fe.dir)}if(Z=ne.to+1,Z>=Re)break}return q.length==0&&X(w,m==null,K,U==null,i.textDirection),{top:W,bottom:v,horizontal:q}}function g(m,U){let b=E.top+(U?m.top:m.bottom);return{top:b,bottom:b,horizontal:[]}}}function N_(i,e){return i.constructor==e.constructor&&i.eq(e)}class I_{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Gr)!=e.state.facet(Gr)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,s=e.facet(Gr);for(;t<s.length&&s[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,s)=>!N_(t,this.drawn[s]))){let t=this.dom.firstChild,s=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[s].constructor&&r.update(t,this.drawn[s])?(t=t.nextSibling,s++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,y.safari&&y.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Gr=x.define();function CR(i){return[ce.define(e=>new I_(e,i)),Gr.of(i)]}const di=x.define({combine(i){return pt(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function f_(i={}){return[di.of(i),u_,d_,C_,$A.of(!0)]}function _R(i){return i.startState.facet(di)!=i.state.facet(di)}const u_=CR({above:!0,markers(i){let{state:e}=i,t=e.facet(di),s=[];for(let r of e.selection.ranges){let n=r==e.selection.main;if(r.empty||t.drawRangeCursor){let o=n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",E=r.empty?r:p.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Yi.forRange(i,o,E))s.push(l)}}return s},update(i,e){i.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=_R(i);return t&&_T(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){_T(e.state,i)},class:"cm-cursorLayer"});function _T(i,e){e.style.animationDuration=i.facet(di).cursorBlinkRate+"ms"}const d_=CR({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:Yi.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||_R(i)},class:"cm-selectionLayer"}),C_=Os.highest(G.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),LR=Q.define({map(i,e){return i==null?null:e.mapPos(i)}}),li=Ge.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,s)=>s.is(LR)?s.value:t,i)}}),__=ce.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(li);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(li)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(li),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let s=i.scrollDOM.getBoundingClientRect();return{left:t.left-s.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-s.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(li)!=i&&this.view.dispatch({effects:LR.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function L_(){return[li,__]}function LT(i,e,t,s,r){e.lastIndex=0;for(let n=i.iterRange(t,s),o=t,E;!n.next().done;o+=n.value.length)if(!n.lineBreak)for(;E=e.exec(n.value);)r(o+E.index,E)}function p_(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let s=[];for(let{from:r,to:n}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),n=Math.min(i.state.doc.lineAt(n).to,n+e),s.length&&s[s.length-1].to>=r?s[s.length-1].to=n:s.push({from:r,to:n});return s}class m_{constructor(e){const{regexp:t,decoration:s,decorate:r,boundary:n,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(E,l,a,T)=>r(T,a,a+E[0].length,E,l);else if(typeof s=="function")this.addMatch=(E,l,a,T)=>{let h=s(E,l,a);h&&T(a,a+E[0].length,h)};else if(s)this.addMatch=(E,l,a,T)=>T(a,a+E[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=n,this.maxLength=o}createDeco(e){let t=new bt,s=t.add.bind(t);for(let{from:r,to:n}of p_(e,this.maxLength))LT(e.state.doc,this.regexp,r,n,(o,E)=>this.addMatch(E,e,o,s));return t.finish()}updateDeco(e,t){let s=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((n,o,E,l)=>{l>=e.view.viewport.from&&E<=e.view.viewport.to&&(s=Math.min(E,s),r=Math.max(l,r))}),e.viewportMoved||r-s>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),s,r):t}updateRange(e,t,s,r){for(let n of e.visibleRanges){let o=Math.max(n.from,s),E=Math.min(n.to,r);if(E>=o){let l=e.state.doc.lineAt(o),a=l.to<E?e.state.doc.lineAt(E):l,T=Math.max(n.from,l.from),h=Math.min(n.to,a.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){T=o;break}for(;E<a.to;E++)if(this.boundary.test(a.text[E-a.from])){h=E;break}}let A=[],R,S=(c,O,f)=>A.push(f.range(c,O));if(l==a)for(this.regexp.lastIndex=T-l.from;(R=this.regexp.exec(l.text))&&R.index<h-l.from;)this.addMatch(R,e,R.index+l.from,S);else LT(e.state.doc,this.regexp,T,h,(c,O)=>this.addMatch(O,e,c,S));t=t.update({filterFrom:T,filterTo:h,filter:(c,O)=>c<T||O>h,add:A})}}return t}}const CE=/x/.unicode!=null?"gu":"g",D_=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,CE),g_={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let No=null;function P_(){var i;if(No==null&&typeof document<"u"&&document.body){let e=document.body.style;No=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return No||!1}const yr=x.define({combine(i){let e=pt(i,{render:null,specialChars:D_,addSpecialChars:null});return(e.replaceTabs=!P_())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,CE)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,CE)),e}});function M_(i={}){return[yr.of(i),U_()]}let pT=null;function U_(){return pT||(pT=ce.fromClass(class{constructor(i){this.view=i,this.decorations=V.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(yr)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new m_({regexp:i.specialChars,decoration:(e,t,s)=>{let{doc:r}=t.state,n=ke(e[0],0);if(n==9){let o=r.lineAt(s),E=t.state.tabSize,l=Ws(o.text,E,s-o.from);return V.replace({widget:new y_((E-l%E)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[n]||(this.decorationCache[n]=V.replace({widget:new G_(i,n)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(yr);i.startState.facet(yr)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const b_="•";function B_(i){return i>=32?b_:i==10?"␤":String.fromCharCode(9216+i)}class G_ extends yt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=B_(this.code),s=e.state.phrase("Control character")+" "+(g_[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,s,t);if(r)return r;let n=document.createElement("span");return n.textContent=t,n.title=s,n.setAttribute("aria-label",s),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class y_ extends yt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function x_(){return F_}const H_=V.line({class:"cm-activeLine"}),F_=ce.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let s of i.state.selection.ranges){let r=i.lineBlockAt(s.head);r.from>e&&(t.push(H_.range(r.from)),e=r.from)}return V.set(t)}},{decorations:i=>i.decorations});class Y_ extends yt{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?xs(e.firstChild):[];if(!t.length)return null;let s=window.getComputedStyle(e.parentNode),r=Gi(t[0],s.direction!="rtl"),n=parseInt(s.lineHeight);return r.bottom-r.top>n*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+n}:r}ignoreEvent(){return!1}}function v_(i){let e=ce.fromClass(class{constructor(t){this.view=t,this.placeholder=i?V.set([V.widget({widget:new Y_(i),side:1}).range(0)]):V.none}get decorations(){return this.view.state.doc.length?V.none:this.placeholder}},{decorations:t=>t.decorations});return typeof i=="string"?[e,G.contentAttributes.of({"aria-placeholder":i})]:e}const _E=2e3;function w_(i,e,t){let s=Math.min(e.line,t.line),r=Math.max(e.line,t.line),n=[];if(e.off>_E||t.off>_E||e.col<0||t.col<0){let o=Math.min(e.off,t.off),E=Math.max(e.off,t.off);for(let l=s;l<=r;l++){let a=i.doc.line(l);a.length<=E&&n.push(p.range(a.from+o,a.to+E))}}else{let o=Math.min(e.col,t.col),E=Math.max(e.col,t.col);for(let l=s;l<=r;l++){let a=i.doc.line(l),T=eE(a.text,o,i.tabSize,!0);if(T<0)n.push(p.cursor(a.to));else{let h=eE(a.text,E,i.tabSize);n.push(p.range(a.from+T,a.from+h))}}}return n}function V_(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function mT(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),s=i.state.doc.lineAt(t),r=t-s.from,n=r>_E?-1:r==s.length?V_(i,e.clientX):Ws(s.text,i.state.tabSize,t-s.from);return{line:s.number,col:n,off:r}}function k_(i,e){let t=mT(i,e),s=i.state.selection;return t?{update(r){if(r.docChanged){let n=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(n);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},s=s.map(r.changes)}},get(r,n,o){let E=mT(i,r);if(!E)return s;let l=w_(i.state,t,E);return l.length?o?p.create(l.concat(s.ranges)):p.create(l):s}}:null}function W_(i){let e=(t=>t.altKey&&t.button==0);return G.mouseSelectionStyle.of((t,s)=>e(s)?k_(t,s):null)}const X_={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},K_={style:"cursor: crosshair"};function $_(i={}){let[e,t]=X_[i.key||"Alt"],s=ce.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[s,G.contentAttributes.of(r=>{var n;return!((n=r.plugin(s))===null||n===void 0)&&n.isDown?K_:null})]}const Ar="-10000px";class pR{constructor(e,t,s,r){this.facet=t,this.createTooltipView=s,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let n=null;this.tooltipViews=this.tooltips.map(o=>n=s(o,n))}update(e,t){var s;let r=e.state.facet(this.facet),n=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],E=t?[]:null;for(let l=0;l<n.length;l++){let a=n[l],T=-1;if(a){for(let h=0;h<this.tooltips.length;h++){let A=this.tooltips[h];A&&A.create==a.create&&(T=h)}if(T<0)o[l]=this.createTooltipView(a,l?o[l-1]:null),E&&(E[l]=!!a.above);else{let h=o[l]=this.tooltipViews[T];E&&(E[l]=t[T]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(s=l.destroy)===null||s===void 0||s.call(l));return t&&(E.forEach((l,a)=>t[a]=l),t.length=E.length),this.input=r,this.tooltips=n,this.tooltipViews=o,!0}}function J_(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Io=x.define({combine:i=>{var e,t,s;return{position:y.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((s=i.find(r=>r.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||J_}}}),DT=new WeakMap,sl=ce.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(Io);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new pR(i,il,(t,s)=>this.createTooltip(t,s),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,s=i.state.facet(Io);if(s.position!=this.position&&!this.madeAbsolute){this.position=s.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),s=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=Ar,t.dom.style.left="0px",this.container.insertBefore(t.dom,s),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let s of this.manager.tooltipViews)s.dom.remove(),(i=s.destroy)===null||i===void 0||i.call(s);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(y.safari){let o=n.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else t=!!n.offsetParent&&n.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(i=n.width/this.parent.offsetWidth,e=n.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let s=this.view.scrollDOM.getBoundingClientRect(),r=zE(this.view);return{visible:{left:s.left+r.left,top:s.top+r.top,right:s.right-r.right,bottom:s.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((n,o)=>{let E=this.manager.tooltipViews[o];return E.getCoords?E.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(Io).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let E of this.manager.tooltipViews)E.dom.style.position="absolute"}let{visible:t,space:s,scaleX:r,scaleY:n}=i,o=[];for(let E=0;E<this.manager.tooltips.length;E++){let l=this.manager.tooltips[E],a=this.manager.tooltipViews[E],{dom:T}=a,h=i.pos[E],A=i.size[E];if(!h||l.clip!==!1&&(h.bottom<=Math.max(t.top,s.top)||h.top>=Math.min(t.bottom,s.bottom)||h.right<Math.max(t.left,s.left)-.1||h.left>Math.min(t.right,s.right)+.1)){T.style.top=Ar;continue}let R=l.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,S=R?7:0,c=A.right-A.left,O=(e=DT.get(a))!==null&&e!==void 0?e:A.bottom-A.top,f=a.offset||q_,C=this.view.textDirection==Te.LTR,_=A.width>s.right-s.left?C?s.left:s.right-A.width:C?Math.max(s.left,Math.min(h.left-(R?14:0)+f.x,s.right-c)):Math.min(Math.max(s.left,h.left-c+(R?14:0)-f.x),s.right-c),g=this.above[E];!l.strictSide&&(g?h.top-O-S-f.y<s.top:h.bottom+O+S+f.y>s.bottom)&&g==s.bottom-h.bottom>h.top-s.top&&(g=this.above[E]=!g);let m=(g?h.top-s.top:s.bottom-h.bottom)-S;if(m<O&&a.resize!==!1){if(m<this.view.defaultLineHeight){T.style.top=Ar;continue}DT.set(a,O),T.style.height=(O=m)/n+"px"}else T.style.height&&(T.style.height="");let U=g?h.top-O-S-f.y:h.bottom+S+f.y,b=_+c;if(a.overlap!==!0)for(let W of o)W.left<b&&W.right>_&&W.top<U+O&&W.bottom>U&&(U=g?W.top-O-2-S:W.bottom+S+2);if(this.position=="absolute"?(T.style.top=(U-i.parent.top)/n+"px",gT(T,(_-i.parent.left)/r)):(T.style.top=U/n+"px",gT(T,_/r)),R){let W=h.left+(C?f.x:-f.x)-(_+14-7);R.style.left=W/r+"px"}a.overlap!==!0&&o.push({left:_,top:U,right:b,bottom:U+O}),T.classList.toggle("cm-tooltip-above",g),T.classList.toggle("cm-tooltip-below",!g),a.positioned&&a.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=Ar}},{eventObservers:{scroll(){this.maybeMeasure()}}});function gT(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}const Q_=G.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),q_={x:0,y:0},il=x.define({enables:[sl,Q_]}),Jr=x.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])});class fn{static create(e){return new fn(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new pR(e,Jr,(t,s)=>this.createHostedView(t,s),t=>t.dom.remove())}createHostedView(e,t){let s=e.create(this.view);return s.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(s.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&s.mount&&s.mount(this.view),s}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let s of this.manager.tooltipViews){let r=s[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const j_=il.compute([Jr],i=>{let e=i.facet(Jr);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var s;return(s=t.end)!==null&&s!==void 0?s:t.pos})),create:fn.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class z_{constructor(e,t,s,r,n){this.view=e,this.source=t,this.field=s,this.setHover=r,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,s=e.docView.nearest(t.target);if(!s)return;let r,n=1;if(s instanceof Mt)r=s.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let E=e.coordsAtPos(r);if(!E||t.y<E.top||t.y>E.bottom||t.x<E.left-e.defaultCharacterWidth||t.x>E.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(T=>T.from<=r&&T.to>=r),a=l&&l.dir==Te.RTL?-1:1;n=t.x<E.left?-a:a}let o=this.source(e,r,n);if(o?.then){let E=this.pending={pos:r};o.then(l=>{this.pending==E&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Xe(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(sl),t=e?e.manager.tooltips.findIndex(s=>s.create==fn.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,s;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:n}=this;if(r.length&&n&&!Z_(n.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,E=(s=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&s!==void 0?s:o;(o==E?this.view.posAtCoords(this.lastMove)!=o:!eL(this.view,o,E,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:s}=this;s&&s.dom.contains(e.relatedTarget)?this.watchTooltipLeave(s.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=s=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Rr=4;function Z_(i,e){let{left:t,right:s,top:r,bottom:n}=i.getBoundingClientRect(),o;if(o=i.querySelector(".cm-tooltip-arrow")){let E=o.getBoundingClientRect();r=Math.min(E.top,r),n=Math.max(E.bottom,n)}return e.clientX>=t-Rr&&e.clientX<=s+Rr&&e.clientY>=r-Rr&&e.clientY<=n+Rr}function eL(i,e,t,s,r,n){let o=i.scrollDOM.getBoundingClientRect(),E=i.documentTop+i.documentPadding.top+i.contentHeight;if(o.left>s||o.right<s||o.top>r||Math.min(o.bottom,E)<r)return!1;let l=i.posAtCoords({x:s,y:r},!1);return l>=e&&l<=t}function tL(i,e={}){let t=Q.define(),s=Ge.define({create(){return[]},update(r,n){if(r.length&&(e.hideOnChange&&(n.docChanged||n.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(n,o))),n.docChanged)){let o=[];for(let E of r){let l=n.changes.mapPos(E.pos,-1,Ye.TrackDel);if(l!=null){let a=Object.assign(Object.create(null),E);a.pos=l,a.end!=null&&(a.end=n.changes.mapPos(a.end)),o.push(a)}}r=o}for(let o of n.effects)o.is(t)&&(r=o.value),o.is(sL)&&(r=[]);return r},provide:r=>Jr.from(r)});return{active:s,extension:[s,ce.define(r=>new z_(r,i,s,t,e.hoverTime||300)),j_]}}function mR(i,e){let t=i.plugin(sl);if(!t)return null;let s=t.manager.tooltips.indexOf(e);return s<0?null:t.manager.tooltipViews[s]}const sL=Q.define(),PT=x.define({combine(i){let e,t;for(let s of i)e=e||s.topContainer,t=t||s.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ci(i,e){let t=i.plugin(DR),s=t?t.specs.indexOf(e):-1;return s>-1?t.panels[s]:null}const DR=ce.fromClass(class{constructor(i){this.input=i.state.facet(_i),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(PT);this.top=new Sr(i,!0,e.topContainer),this.bottom=new Sr(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(PT);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Sr(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sr(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(_i);if(t!=this.input){let s=t.filter(l=>l),r=[],n=[],o=[],E=[];for(let l of s){let a=this.specs.indexOf(l),T;a<0?(T=l(i.view),E.push(T)):(T=this.panels[a],T.update&&T.update(i)),r.push(T),(T.top?n:o).push(T)}this.specs=s,this.panels=r,this.top.sync(n),this.bottom.sync(o);for(let l of E)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let s of this.panels)s.update&&s.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>G.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Sr{constructor(e,t,s){this.view=e,this.top=t,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=MT(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=MT(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function MT(i){let e=i.nextSibling;return i.remove(),e}const _i=x.define({enables:DR});class Gt extends as{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Gt.prototype.elementClass="";Gt.prototype.toDOM=void 0;Gt.prototype.mapMode=Ye.TrackBefore;Gt.prototype.startSide=Gt.prototype.endSide=-1;Gt.prototype.point=!0;const xr=x.define(),iL=x.define(),rL={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ee.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ci=x.define();function nL(i){return[gR(),ci.of({...rL,...i})]}const UT=x.define({combine:i=>i.some(e=>e)});function gR(i){return[oL]}const oL=ce.fromClass(class{constructor(i){this.view=i,this.domAfter=null,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(ci).map(e=>new BT(i,e)),this.fixed=!i.state.facet(UT);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(i.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(UT)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=ee.iter(this.view.state.facet(xr),this.view.viewport.from),s=[],r=this.gutters.map(n=>new EL(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(n.type)){let o=!0;for(let E of n.type)if(E.type==ve.Text&&o){LE(t,s,E.from);for(let l of r)l.line(this.view,E,s);o=!1}else if(E.widget)for(let l of r)l.widget(this.view,E)}else if(n.type==ve.Text){LE(t,s,n.from);for(let o of r)o.line(this.view,n,s)}else if(n.widget)for(let o of r)o.widget(this.view,n);for(let n of r)n.finish();i&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(i){let e=i.startState.facet(ci),t=i.state.facet(ci),s=i.docChanged||i.heightChanged||i.viewportChanged||!ee.eq(i.startState.facet(xr),i.state.facet(xr),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(s=!0);else{s=!0;let r=[];for(let n of t){let o=e.indexOf(n);o<0?r.push(new BT(this.view,n)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let n of this.gutters)n.dom.remove(),r.indexOf(n)<0&&n.destroy();for(let n of r)n.config.side=="after"?this.getDOMAfter().appendChild(n.dom):this.dom.appendChild(n.dom);this.gutters=r}return s}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:i=>G.scrollMargins.of(e=>{let t=e.plugin(i);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Te.LTR?{left:s,right:r}:{right:s,left:r}})});function bT(i){return Array.isArray(i)?i:[i]}function LE(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class EL{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=ee.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:r}=this,n=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let E=new PR(e,o,n,s);r.elements.push(E),r.dom.appendChild(E.dom)}else r.elements[this.i].update(e,o,n,s);this.height=t.bottom,this.i++}line(e,t,s){let r=[];LE(this.cursor,r,t.from),s.length&&(r=r.concat(s));let n=this.gutter.config.lineMarker(e,t,r);n&&r.unshift(n);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),r=s?[s]:null;for(let n of e.state.facet(iL)){let o=n(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class BT{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,r=>{let n=r.target,o;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let l=n.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let E=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[s](e,E,r)&&r.preventDefault()});this.markers=bT(t.markers(e)),t.initialSpacer&&(this.spacer=new PR(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=bT(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let s=e.view.viewport;return!ee.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class PR{constructor(e,t,s,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,r)}update(e,t,s,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),lL(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let s="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let E=o,l=n<t.length?t[n++]:null,a=!1;if(l){let T=l.elementClass;T&&(s+=" "+T);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){E=h,a=!0;break}}else E=this.markers.length;for(;o<E;){let T=this.markers[o++];if(T.toDOM){T.destroy(r);let h=r.nextSibling;r.remove(),r=h}}if(!l)break;l.toDOM&&(a?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),a&&o++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function lL(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const aL=x.define(),TL=x.define(),ps=x.define({combine(i){return pt(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let r in t){let n=s[r],o=t[r];s[r]=n?(E,l,a)=>n(E,l,a)||o(E,l,a):o}return s}})}});class fo extends Gt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function uo(i,e){return i.state.facet(ps).formatNumber(e,i.state)}const hL=ci.compute([ps],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(aL)},lineMarker(e,t,s){return s.some(r=>r.toDOM)?null:new fo(uo(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let r of e.state.facet(TL)){let n=r(e,t,s);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(ps)!=e.state.facet(ps),initialSpacer(e){return new fo(uo(e,GT(e.state.doc.lines)))},updateSpacer(e,t){let s=uo(t.view,GT(t.view.state.doc.lines));return s==e.number?e:new fo(s)},domEventHandlers:i.facet(ps).domEventHandlers,side:"before"}));function AL(i={}){return[ps.of(i),gR(),hL]}function GT(i){let e=9;for(;e<i;)e=e*10+9;return e}const RL=new class extends Gt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},SL=xr.compute(["selection"],i=>{let e=[],t=-1;for(let s of i.selection.ranges){let r=i.doc.lineAt(s.head).from;r>t&&(t=r,e.push(RL.range(r)))}return ee.of(e)});function cL(){return SL}const MR=1024;let OL=0;class Co{constructor(e,t){this.from=e,this.to=t}}class j{constructor(e={}){this.id=OL++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=$e.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}j.closedBy=new j({deserialize:i=>i.split(" ")});j.openedBy=new j({deserialize:i=>i.split(" ")});j.group=new j({deserialize:i=>i.split(" ")});j.isolate=new j({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});j.contextHash=new j({perNode:!0});j.lookAhead=new j({perNode:!0});j.mounted=new j({perNode:!0});class Qr{constructor(e,t,s){this.tree=e,this.overlay=t,this.parser=s}static get(e){return e&&e.props&&e.props[j.mounted.id]}}const NL=Object.create(null);class $e{constructor(e,t,s,r=0){this.name=e,this.props=t,this.id=s,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):NL,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new $e(e.name||"",t,e.id,s);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(j.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let r of s.split(" "))t[r]=e[s];return s=>{for(let r=s.prop(j.group),n=-1;n<(r?r.length:0);n++){let o=t[n<0?s.name:r[n]];if(o)return o}}}}$e.none=new $e("",Object.create(null),0,8);class rl{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let r=null;for(let n of e){let o=n(s);if(o){r||(r=Object.assign({},s.props));let E=o[1],l=o[0];l.combine&&l.id in r&&(E=l.combine(r[l.id],E)),r[l.id]=E}}t.push(r?new $e(s.name,r,s.id,s.flags):s)}return new rl(t)}}const cr=new WeakMap,yT=new WeakMap;var Pe;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Pe||(Pe={}));class Ie{constructor(e,t,s,r,n){if(this.type=e,this.children=t,this.positions=s,this.length=r,this.props=null,n&&n.length){this.props=Object.create(null);for(let[o,E]of n)this.props[typeof o=="number"?o:o.id]=E}}toString(){let e=Qr.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let r=s.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new mE(this.topNode,e)}cursorAt(e,t=0,s=0){let r=cr.get(this)||this.topNode,n=new mE(r);return n.moveTo(e,t),cr.set(this,n._tree),n}get topNode(){return new it(this,0,0,null)}resolve(e,t=0){let s=Li(cr.get(this)||this.topNode,e,t,!1);return cr.set(this,s),s}resolveInner(e,t=0){let s=Li(yT.get(this)||this.topNode,e,t,!0);return yT.set(this,s),s}resolveStack(e,t=0){return uL(this,e,t)}iterate(e){let{enter:t,leave:s,from:r=0,to:n=this.length}=e,o=e.mode||0,E=(o&Pe.IncludeAnonymous)>0;for(let l=this.cursor(o|Pe.IncludeAnonymous);;){let a=!1;if(l.from<=n&&l.to>=r&&(!E&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;a=!0}for(;a&&s&&(E||!l.type.isAnonymous)&&s(l),!l.nextSibling();){if(!l.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:El($e.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,r)=>new Ie(this.type,t,s,r,this.propValues),e.makeTree||((t,s,r)=>new Ie($e.none,t,s,r)))}static build(e){return dL(e)}}Ie.empty=new Ie($e.none,[],[],0);class nl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new nl(this.buffer,this.index)}}class Kt{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return $e.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],r=this.set.types[t],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),e+=4,s==e)return n;let o=[];for(;e<s;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,s,r,n){let{buffer:o}=this,E=-1;for(let l=e;l!=t&&!(UR(n,r,o[l+1],o[l+2])&&(E=l,s>0));l=o[l+3]);return E}slice(e,t,s){let r=this.buffer,n=new Uint16Array(t-e),o=0;for(let E=e,l=0;E<t;){n[l++]=r[E++],n[l++]=r[E++]-s;let a=n[l++]=r[E++]-s;n[l++]=r[E++]-e,o=Math.max(o,a)}return new Kt(n,o,this.set)}}function UR(i,e,t,s){switch(i){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function Li(i,e,t,s){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!s&&i instanceof it&&i.index<0?null:i.parent;if(!o)return i;i=o}let n=s?0:Pe.IgnoreOverlays;if(s)for(let o=i,E=o.parent;E;o=E,E=o.parent)o instanceof it&&o.index<0&&((r=E.enter(e,t,n))===null||r===void 0?void 0:r.from)!=o.from&&(i=E);for(;;){let o=i.enter(e,t,n);if(!o)return i;i=o}}class bR{cursor(e=0){return new mE(this,e)}getChild(e,t=null,s=null){let r=xT(this,e,t,s);return r.length?r[0]:null}getChildren(e,t=null,s=null){return xT(this,e,t,s)}resolve(e,t=0){return Li(this,e,t,!1)}resolveInner(e,t=0){return Li(this,e,t,!0)}matchContext(e){return pE(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(s=t,t=r.prevSibling):t=r}return s}get node(){return this}get next(){return this.parent}}class it extends bR{constructor(e,t,s,r){super(),this._tree=e,this.from=t,this.index=s,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,r,n=0){for(let o=this;;){for(let{children:E,positions:l}=o._tree,a=t>0?E.length:-1;e!=a;e+=t){let T=E[e],h=l[e]+o.from;if(UR(r,s,h,h+T.length)){if(T instanceof Kt){if(n&Pe.ExcludeBuffers)continue;let A=T.findChild(0,T.buffer.length,t,s-h,r);if(A>-1)return new Vt(new IL(o,T,e,h),null,A)}else if(n&Pe.IncludeAnonymous||!T.type.isAnonymous||ol(T)){let A;if(!(n&Pe.IgnoreMounts)&&(A=Qr.get(T))&&!A.overlay)return new it(A.tree,h,e,o);let R=new it(T,h,e,o);return n&Pe.IncludeAnonymous||!R.type.isAnonymous?R:R.nextChild(t<0?T.children.length-1:0,t,s,r)}}}if(n&Pe.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,s=0){let r;if(!(s&Pe.IgnoreOverlays)&&(r=Qr.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:o,to:E}of r.overlay)if((t>0?o<=n:o<n)&&(t<0?E>=n:E>n))return new it(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function xT(i,e,t,s){let r=i.cursor(),n=[];if(!r.firstChild())return n;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return n}for(;;){if(s!=null&&r.type.is(s))return n;if(r.type.is(e)&&n.push(r.node),!r.nextSibling())return s==null?n:[]}}function pE(i,e,t=e.length-1){for(let s=i;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class IL{constructor(e,t,s,r){this.parent=e,this.buffer=t,this.index=s,this.start=r}}class Vt extends bR{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,s);return n<0?null:new Vt(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,s=0){if(s&Pe.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Vt(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Vt(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Vt(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,r=this.index+4,n=s.buffer[this.index+3];if(n>r){let o=s.buffer[this.index+1];e.push(s.slice(r,n,o)),t.push(0)}return new Ie(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function BR(i){if(!i.length)return null;let e=0,t=i[0];for(let n=1;n<i.length;n++){let o=i[n];(o.from>t.from||o.to<t.to)&&(t=o,e=n)}let s=t instanceof it&&t.index<0?null:t.parent,r=i.slice();return s?r[e]=s:r.splice(e,1),new fL(r,t)}class fL{constructor(e,t){this.heads=e,this.node=t}get next(){return BR(this.heads)}}function uL(i,e,t){let s=i.resolveInner(e,t),r=null;for(let n=s instanceof it?s:s.context.parent;n;n=n.parent)if(n.index<0){let o=n.parent;(r||(r=[s])).push(o.resolve(e,t)),n=o}else{let o=Qr.get(n.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let E=new it(o.tree,o.overlay[0].from+n.from,-1,n);(r||(r=[s])).push(Li(E,e,t,!1))}}return r?BR(r):s}class mE{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof it)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=s+r.buffer[e+1],this.to=s+r.buffer[e+2],!0}yield(e){return e?e instanceof it?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,s);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&Pe.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Pe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let r=s<0?0:this.stack[s]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(r)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(r.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:s}=r)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let n=t+e,o=e<0?-1:s._tree.children.length;n!=o;n+=e){let E=s._tree.children[n];if(this.mode&Pe.IncludeAnonymous||E instanceof Kt||!E.type.isAnonymous||ol(E))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,s=n+1;break e}r=this.stack[--n]}for(let r=s;r<this.stack.length;r++)t=new Vt(this.buffer,t,this.stack[r]);return this.bufferNode=new Vt(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,r=!0}}}matchContext(e){if(!this.buffer)return pE(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let r=e.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return pE(this._tree,e,r);let o=s[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function ol(i){return i.children.some(e=>e instanceof Kt||!e.type.isAnonymous||ol(e))}function dL(i){var e;let{buffer:t,nodeSet:s,maxBufferLength:r=MR,reused:n=[],minRepeatType:o=s.types.length}=i,E=Array.isArray(t)?new nl(t,t.length):t,l=s.types,a=0,T=0;function h(m,U,b,W,v,q){let{id:X,start:w,end:K,size:$}=E,Z=T,Re=a;if($<0)if(E.next(),$==-1){let ue=n[X];b.push(ue),W.push(w-m);return}else if($==-3){a=X;return}else if($==-4){T=X;return}else throw new RangeError(`Unrecognized record size: ${$}`);let ne=l[X],fe,se,Ae=w-m;if(K-w<=r&&(se=O(E.pos-U,v))){let ue=new Uint16Array(se.size-se.skip),pe=E.pos-se.size,Ve=ue.length;for(;E.pos>pe;)Ve=f(se.start,ue,Ve);fe=new Kt(ue,K-se.start,s),Ae=se.start-m}else{let ue=E.pos-$;E.next();let pe=[],Ve=[],At=X>=o?X:-1,mt=0,Ns=K;for(;E.pos>ue;)At>=0&&E.id==At&&E.size>=0?(E.end<=Ns-r&&(S(pe,Ve,w,mt,E.end,Ns,At,Z,Re),mt=pe.length,Ns=E.end),E.next()):q>2500?A(w,ue,pe,Ve):h(w,ue,pe,Ve,At,q+1);if(At>=0&&mt>0&&mt<pe.length&&S(pe,Ve,w,mt,w,Ns,At,Z,Re),pe.reverse(),Ve.reverse(),At>-1&&mt>0){let Is=R(ne,Re);fe=El(ne,pe,Ve,0,pe.length,0,K-w,Is,Is)}else fe=c(ne,pe,Ve,K-w,Z-K,Re)}b.push(fe),W.push(Ae)}function A(m,U,b,W){let v=[],q=0,X=-1;for(;E.pos>U;){let{id:w,start:K,end:$,size:Z}=E;if(Z>4)E.next();else{if(X>-1&&K<X)break;X<0&&(X=$-r),v.push(w,K,$),q++,E.next()}}if(q){let w=new Uint16Array(q*4),K=v[v.length-2];for(let $=v.length-3,Z=0;$>=0;$-=3)w[Z++]=v[$],w[Z++]=v[$+1]-K,w[Z++]=v[$+2]-K,w[Z++]=Z;b.push(new Kt(w,v[2]-K,s)),W.push(K-m)}}function R(m,U){return(b,W,v)=>{let q=0,X=b.length-1,w,K;if(X>=0&&(w=b[X])instanceof Ie){if(!X&&w.type==m&&w.length==v)return w;(K=w.prop(j.lookAhead))&&(q=W[X]+w.length+K)}return c(m,b,W,v,q,U)}}function S(m,U,b,W,v,q,X,w,K){let $=[],Z=[];for(;m.length>W;)$.push(m.pop()),Z.push(U.pop()+b-v);m.push(c(s.types[X],$,Z,q-v,w-q,K)),U.push(v-b)}function c(m,U,b,W,v,q,X){if(q){let w=[j.contextHash,q];X=X?[w].concat(X):[w]}if(v>25){let w=[j.lookAhead,v];X=X?[w].concat(X):[w]}return new Ie(m,U,b,W,X)}function O(m,U){let b=E.fork(),W=0,v=0,q=0,X=b.end-r,w={size:0,start:0,skip:0};e:for(let K=b.pos-m;b.pos>K;){let $=b.size;if(b.id==U&&$>=0){w.size=W,w.start=v,w.skip=q,q+=4,W+=4,b.next();continue}let Z=b.pos-$;if($<0||Z<K||b.start<X)break;let Re=b.id>=o?4:0,ne=b.start;for(b.next();b.pos>Z;){if(b.size<0)if(b.size==-3||b.size==-4)Re+=4;else break e;else b.id>=o&&(Re+=4);b.next()}v=ne,W+=$,q+=Re}return(U<0||W==m)&&(w.size=W,w.start=v,w.skip=q),w.size>4?w:void 0}function f(m,U,b){let{id:W,start:v,end:q,size:X}=E;if(E.next(),X>=0&&W<o){let w=b;if(X>4){let K=E.pos-(X-4);for(;E.pos>K;)b=f(m,U,b)}U[--b]=w,U[--b]=q-m,U[--b]=v-m,U[--b]=W}else X==-3?a=W:X==-4&&(T=W);return b}let C=[],_=[];for(;E.pos>0;)h(i.start||0,i.bufferStart||0,C,_,-1,0);let g=(e=i.length)!==null&&e!==void 0?e:C.length?_[0]+C[0].length:0;return new Ie(l[i.topID],C.reverse(),_.reverse(),g)}const HT=new WeakMap;function Hr(i,e){if(!i.isAnonymous||e instanceof Kt||e.type!=i)return 1;let t=HT.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=i||!(s instanceof Ie)){t=1;break}t+=Hr(i,s)}HT.set(e,t)}return t}function El(i,e,t,s,r,n,o,E,l){let a=0;for(let S=s;S<r;S++)a+=Hr(i,e[S]);let T=Math.ceil(a*1.5/8),h=[],A=[];function R(S,c,O,f,C){for(let _=O;_<f;){let g=_,m=c[_],U=Hr(i,S[_]);for(_++;_<f;_++){let b=Hr(i,S[_]);if(U+b>=T)break;U+=b}if(_==g+1){if(U>T){let b=S[g];R(b.children,b.positions,0,b.children.length,c[g]+C);continue}h.push(S[g])}else{let b=c[_-1]+S[_-1].length-m;h.push(El(i,S,c,g,_,m,b,null,l))}A.push(m+C-n)}}return R(e,t,s,r,0),(E||l)(h,A,o)}class os{constructor(e,t,s,r,n=!1,o=!1){this.from=e,this.to=t,this.tree=s,this.offset=r,this.open=(n?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let r=[new os(0,e.length,e,0,!1,s)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,s=128){if(!t.length)return e;let r=[],n=1,o=e.length?e[0]:null;for(let E=0,l=0,a=0;;E++){let T=E<t.length?t[E]:null,h=T?T.fromA:1e9;if(h-l>=s)for(;o&&o.from<h;){let A=o;if(l>=A.from||h<=A.to||a){let R=Math.max(A.from,l)-a,S=Math.min(A.to,h)-a;A=R>=S?null:new os(R,S,A.tree,A.offset+a,E>0,!!T)}if(A&&r.push(A),o.to>h)break;o=n<e.length?e[n++]:null}if(!T)break;l=T.toA,a=T.toA-T.toB}return r}}class GR{startParse(e,t,s){return typeof e=="string"&&(e=new CL(e)),s=s?s.length?s.map(r=>new Co(r.from,r.to)):[new Co(0,0)]:[new Co(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let r=this.startParse(e,t,s);for(;;){let n=r.advance();if(n)return n}}}class CL{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new j({perNode:!0});let _L=0;class Ze{constructor(e,t,s,r){this.name=e,this.set=t,this.base=s,this.modified=r,this.id=_L++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof Ze&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new Ze(s,[],null,[]);if(r.set.push(r),t)for(let n of t.set)r.set.push(n);return r}static defineModifier(e){let t=new qr(e);return s=>s.modified.indexOf(t)>-1?s:qr.get(s.base||s,s.modified.concat(t).sort((r,n)=>r.id-n.id))}}let LL=0;class qr{constructor(e){this.name=e,this.instances=[],this.id=LL++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(E=>E.base==e&&pL(t,E.modified));if(s)return s;let r=[],n=new Ze(e.name,r,e,t);for(let E of t)E.instances.push(n);let o=mL(t);for(let E of e.set)if(!E.modified.length)for(let l of o)r.push(qr.get(E,l));return n}}function pL(i,e){return i.length==e.length&&i.every((t,s)=>t==e[s])}function mL(i){let e=[[]];for(let t=0;t<i.length;t++)for(let s=0,r=e.length;s<r;s++)e.push(e[s].concat(i[t]));return e.sort((t,s)=>s.length-t.length)}function yR(i){let e=Object.create(null);for(let t in i){let s=i[t];Array.isArray(s)||(s=[s]);for(let r of t.split(" "))if(r){let n=[],o=2,E=r;for(let h=0;;){if(E=="..."&&h>0&&h+3==r.length){o=1;break}let A=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(E);if(!A)throw new RangeError("Invalid path: "+r);if(n.push(A[0]=="*"?"":A[0][0]=='"'?JSON.parse(A[0]):A[0]),h+=A[0].length,h==r.length)break;let R=r[h++];if(h==r.length&&R=="!"){o=0;break}if(R!="/")throw new RangeError("Invalid path: "+r);E=r.slice(h)}let l=n.length-1,a=n[l];if(!a)throw new RangeError("Invalid path: "+r);let T=new pi(s,o,l>0?n.slice(0,l):null);e[a]=T.sort(e[a])}}return xR.add(e)}const xR=new j({combine(i,e){let t,s,r;for(;i||e;){if(!i||e&&i.depth>=e.depth?(r=e,e=e.next):(r=i,i=i.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let n=new pi(r.tags,r.mode,r.context);t?t.next=n:s=n,t=n}return s}});class pi{constructor(e,t,s,r){this.tags=e,this.mode=t,this.context=s,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}pi.empty=new pi([],2,null);function HR(i,e){let t=Object.create(null);for(let n of i)if(!Array.isArray(n.tag))t[n.tag.id]=n.class;else for(let o of n.tag)t[o.id]=n.class;let{scope:s,all:r=null}=e||{};return{style:n=>{let o=r;for(let E of n)for(let l of E.set){let a=t[l.id];if(a){o=o?o+" "+a:a;break}}return o},scope:s}}function DL(i,e){let t=null;for(let s of i){let r=s.style(e);r&&(t=t?t+" "+r:r)}return t}function gL(i,e,t,s=0,r=i.length){let n=new PL(s,Array.isArray(e)?e:[e],t);n.highlightRange(i.cursor(),s,r,"",n.highlighters),n.flush(r)}class PL{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,r,n){let{type:o,from:E,to:l}=e;if(E>=s||l<=t)return;o.isTop&&(n=this.highlighters.filter(R=>!R.scope||R.scope(o)));let a=r,T=ML(e)||pi.empty,h=DL(n,T.tags);if(h&&(a&&(a+=" "),a+=h,T.mode==1&&(r+=(r?" ":"")+h)),this.startSpan(Math.max(t,E),a),T.opaque)return;let A=e.tree&&e.tree.prop(j.mounted);if(A&&A.overlay){let R=e.node.enter(A.overlay[0].from+E,1),S=this.highlighters.filter(O=>!O.scope||O.scope(A.tree.type)),c=e.firstChild();for(let O=0,f=E;;O++){let C=O<A.overlay.length?A.overlay[O]:null,_=C?C.from+E:l,g=Math.max(t,f),m=Math.min(s,_);if(g<m&&c)for(;e.from<m&&(this.highlightRange(e,g,m,r,n),this.startSpan(Math.min(m,e.to),a),!(e.to>=_||!e.nextSibling())););if(!C||_>s)break;f=C.to+E,f>t&&(this.highlightRange(R.cursor(),Math.max(t,C.from+E),Math.min(s,f),"",S),this.startSpan(Math.min(s,f),a))}c&&e.parent()}else if(e.firstChild()){A&&(r="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,r,n),this.startSpan(Math.min(s,e.to),a)}while(e.nextSibling());e.parent()}}}function ML(i){let e=i.type.prop(xR);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const B=Ze.define,Or=B(),Ht=B(),FT=B(Ht),YT=B(Ht),Ft=B(),Nr=B(Ft),_o=B(Ft),Ot=B(),jt=B(Ot),St=B(),ct=B(),DE=B(),si=B(DE),Ir=B(),u={comment:Or,lineComment:B(Or),blockComment:B(Or),docComment:B(Or),name:Ht,variableName:B(Ht),typeName:FT,tagName:B(FT),propertyName:YT,attributeName:B(YT),className:B(Ht),labelName:B(Ht),namespace:B(Ht),macroName:B(Ht),literal:Ft,string:Nr,docString:B(Nr),character:B(Nr),attributeValue:B(Nr),number:_o,integer:B(_o),float:B(_o),bool:B(Ft),regexp:B(Ft),escape:B(Ft),color:B(Ft),url:B(Ft),keyword:St,self:B(St),null:B(St),atom:B(St),unit:B(St),modifier:B(St),operatorKeyword:B(St),controlKeyword:B(St),definitionKeyword:B(St),moduleKeyword:B(St),operator:ct,derefOperator:B(ct),arithmeticOperator:B(ct),logicOperator:B(ct),bitwiseOperator:B(ct),compareOperator:B(ct),updateOperator:B(ct),definitionOperator:B(ct),typeOperator:B(ct),controlOperator:B(ct),punctuation:DE,separator:B(DE),bracket:si,angleBracket:B(si),squareBracket:B(si),paren:B(si),brace:B(si),content:Ot,heading:jt,heading1:B(jt),heading2:B(jt),heading3:B(jt),heading4:B(jt),heading5:B(jt),heading6:B(jt),contentSeparator:B(Ot),list:B(Ot),quote:B(Ot),emphasis:B(Ot),strong:B(Ot),link:B(Ot),monospace:B(Ot),strikethrough:B(Ot),inserted:B(),deleted:B(),changed:B(),invalid:B(),meta:Ir,documentMeta:B(Ir),annotation:B(Ir),processingInstruction:B(Ir),definition:Ze.defineModifier("definition"),constant:Ze.defineModifier("constant"),function:Ze.defineModifier("function"),standard:Ze.defineModifier("standard"),local:Ze.defineModifier("local"),special:Ze.defineModifier("special")};for(let i in u){let e=u[i];e instanceof Ze&&(e.name=i)}HR([{tag:u.link,class:"tok-link"},{tag:u.heading,class:"tok-heading"},{tag:u.emphasis,class:"tok-emphasis"},{tag:u.strong,class:"tok-strong"},{tag:u.keyword,class:"tok-keyword"},{tag:u.atom,class:"tok-atom"},{tag:u.bool,class:"tok-bool"},{tag:u.url,class:"tok-url"},{tag:u.labelName,class:"tok-labelName"},{tag:u.inserted,class:"tok-inserted"},{tag:u.deleted,class:"tok-deleted"},{tag:u.literal,class:"tok-literal"},{tag:u.string,class:"tok-string"},{tag:u.number,class:"tok-number"},{tag:[u.regexp,u.escape,u.special(u.string)],class:"tok-string2"},{tag:u.variableName,class:"tok-variableName"},{tag:u.local(u.variableName),class:"tok-variableName tok-local"},{tag:u.definition(u.variableName),class:"tok-variableName tok-definition"},{tag:u.special(u.variableName),class:"tok-variableName2"},{tag:u.definition(u.propertyName),class:"tok-propertyName tok-definition"},{tag:u.typeName,class:"tok-typeName"},{tag:u.namespace,class:"tok-namespace"},{tag:u.className,class:"tok-className"},{tag:u.macroName,class:"tok-macroName"},{tag:u.propertyName,class:"tok-propertyName"},{tag:u.operator,class:"tok-operator"},{tag:u.comment,class:"tok-comment"},{tag:u.meta,class:"tok-meta"},{tag:u.invalid,class:"tok-invalid"},{tag:u.punctuation,class:"tok-punctuation"}]);var Lo;const ms=new j;function UL(i){return x.define({combine:i?e=>e.concat(i):void 0})}const bL=new j;class ot{constructor(e,t,s=[],r=""){this.data=e,this.name=r,z.prototype.hasOwnProperty("tree")||Object.defineProperty(z.prototype,"tree",{get(){return Ue(this)}}),this.parser=t,this.extension=[$t.of(this),z.languageData.of((n,o,E)=>{let l=vT(n,o,E),a=l.type.prop(ms);if(!a)return[];let T=n.facet(a),h=l.type.prop(bL);if(h){let A=l.resolve(o-l.from,E);for(let R of h)if(R.test(A,n)){let S=n.facet(R.facet);return R.type=="replace"?S:S.concat(T)}}return T})].concat(s)}isActiveAt(e,t,s=-1){return vT(e,t,s).type.prop(ms)==this.data}findRegions(e){let t=e.facet($t);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],r=(n,o)=>{if(n.prop(ms)==this.data){s.push({from:o,to:o+n.length});return}let E=n.prop(j.mounted);if(E){if(E.tree.prop(ms)==this.data){if(E.overlay)for(let l of E.overlay)s.push({from:l.from+o,to:l.to+o});else s.push({from:o,to:o+n.length});return}else if(E.overlay){let l=s.length;if(r(E.tree,E.overlay[0].from+o),s.length>l)return}}for(let l=0;l<n.children.length;l++){let a=n.children[l];a instanceof Ie&&r(a,n.positions[l]+o)}};return r(Ue(e),0),s}get allowsNesting(){return!0}}ot.setState=Q.define();function vT(i,e,t){let s=i.facet($t),r=Ue(i).topNode;if(!s||s.allowsNesting)for(let n=r;n;n=n.enter(e,t,Pe.ExcludeBuffers))n.type.isTop&&(r=n);return r}class jr extends ot{constructor(e,t,s){super(e,t,[],s),this.parser=t}static define(e){let t=UL(e.languageData);return new jr(t,e.parser.configure({props:[ms.add(s=>s.isTop?t:void 0)]}),e.name)}configure(e,t){return new jr(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ue(i){let e=i.field(ot.state,!1);return e?e.tree:Ie.empty}class BL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let ii=null;class zr{constructor(e,t,s=[],r,n,o,E,l){this.parser=e,this.state=t,this.fragments=s,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=E,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new zr(e,t,[],Ie.empty,0,s,[],null)}startParse(){return this.parser.startParse(new BL(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ie.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(os.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(os.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ii;ii=this;try{return e()}finally{ii=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=wT(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:r,treeLen:n,viewport:o,skipped:E}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((a,T,h,A)=>l.push({fromA:a,toA:T,fromB:h,toB:A})),s=os.applyChanges(s,l),r=Ie.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){E=[];for(let a of this.skipped){let T=e.mapPos(a.from,1),h=e.mapPos(a.to,-1);T<h&&E.push({from:T,to:h})}}}return new zr(this.parser,t,s,r,n,o,E,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:r,to:n}=this.skipped[s];r<e.to&&n>e.from&&(this.fragments=wT(this.fragments,r,n),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends GR{createParse(t,s,r){let n=r[0].from,o=r[r.length-1].to;return{parsedPos:n,advance(){let l=ii;if(l){for(let a of r)l.tempSkipped.push(a);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ie($e.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ii}}function wT(i,e,t){return os.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class vs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new vs(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=zr.create(e.facet($t).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new vs(s)}}ot.state=Ge.define({create:vs.init,update(i,e){for(let t of e.effects)if(t.is(ot.setState))return t.value;return e.startState.facet($t)!=e.state.facet($t)?vs.init(e.state):i.apply(e)}});let FR=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(FR=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const po=typeof navigator<"u"&&(!((Lo=navigator.scheduling)===null||Lo===void 0)&&Lo.isInputPending)?()=>navigator.scheduling.isInputPending():null,GL=ce.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ot.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ot.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=FR(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:r}}=this.view,n=s.field(ot.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!po?Math.max(25,e.timeRemaining()-5):1e9),E=n.context.treeLen<r&&s.doc.length>r+1e3,l=n.context.work(()=>po&&po()||Date.now()>o,r+(E?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:ot.setState.of(new vs(n.context))})),this.chunkBudget>0&&!(l&&!E)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xe(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),$t=x.define({combine(i){return i.length?i[0]:null},enables:i=>[ot.state,GL,G.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class yL{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const xL=x.define(),un=x.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Zr(i){let e=i.facet(un);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function mi(i,e){let t="",s=i.tabSize,r=i.facet(un)[0];if(r=="	"){for(;e>=s;)t+="	",e-=s;r=" "}for(let n=0;n<e;n++)t+=r;return t}function ll(i,e){i instanceof z&&(i=new dn(i));for(let s of i.state.facet(xL)){let r=s(i,e);if(r!==void 0)return r}let t=Ue(i.state);return t.length>=e?HL(i,t,e):null}class dn{constructor(e,t={}){this.state=e,this.options=t,this.unit=Zr(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:n}=this.options;return r!=null&&r>=s.from&&r<=s.to?n&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:s.text.slice(r-s.from),from:r}:{text:s.text.slice(0,r-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:r}=this.lineAt(e,t);return s.slice(e-r,Math.min(s.length,e+100-r))}column(e,t=1){let{text:s,from:r}=this.lineAt(e,t),n=this.countColumn(s,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(s,s.search(/\S|$/))),n}countColumn(e,t=e.length){return Ws(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:r}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let o=n(r);if(o>-1)return o}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const YR=new j;function HL(i,e,t){let s=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=s.node){let n=[];for(let o=r;o&&!(o.from<s.node.from||o.to>s.node.to||o.from==s.node.from&&o.type==s.node.type);o=o.parent)n.push(o);for(let o=n.length-1;o>=0;o--)s={node:n[o],next:s}}return vR(s,i,t)}function vR(i,e,t){for(let s=i;s;s=s.next){let r=YL(s.node);if(r)return r(al.create(e,t,s))}return 0}function FL(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function YL(i){let e=i.type.prop(YR);if(e)return e;let t=i.firstChild,s;if(t&&(s=t.type.prop(j.closedBy))){let r=i.lastChild,n=r&&s.indexOf(r.name)>-1;return o=>kL(o,!0,1,void 0,n&&!FL(o)?r.from:void 0)}return i.parent==null?vL:null}function vL(){return 0}class al extends dn{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new al(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(wL(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return vR(this.context.next,this.base,this.pos)}}function wL(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function VL(i){let e=i.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,n=i.state.doc.lineAt(t.from),o=r==null||r<=n.from?n.to:Math.min(n.to,r);for(let E=t.to;;){let l=e.childAfter(E);if(!l||l==s)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let a=/^ */.exec(n.text.slice(t.to-n.from))[0].length;return{from:t.from,to:t.to+a}}E=l.to}}function kL(i,e,t,s,r){let n=i.textAfter,o=n.match(/^\s*/)[0].length,E=s&&n.slice(o,o+s.length)==s||r==i.pos+o,l=VL(i);return l?E?i.column(l.from):i.column(l.to):i.baseIndent+(E?0:i.unit*t)}function WL({except:i,units:e=1}={}){return t=>{let s=i&&i.test(t.textAfter);return t.baseIndent+(s?0:e*t.unit)}}const XL=200;function KL(){return z.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:s}=i.newSelection.main,r=t.lineAt(s);if(s>r.from+XL)return i;let n=t.sliceString(r.from,s);if(!e.some(a=>a.test(n)))return i;let{state:o}=i,E=-1,l=[];for(let{head:a}of o.selection.ranges){let T=o.doc.lineAt(a);if(T.from==E)continue;E=T.from;let h=ll(o,T.from);if(h==null)continue;let A=/^\s*/.exec(T.text)[0],R=mi(o,h);A!=R&&l.push({from:T.from,to:T.from+A.length,insert:R})}return l.length?[i,{changes:l,sequential:!0}]:i})}const $L=x.define(),wR=new j;function JL(i,e,t){let s=Ue(i);if(s.length<t)return null;let r=s.resolveStack(t,1),n=null;for(let o=r;o;o=o.next){let E=o.node;if(E.to<=t||E.from>t)continue;if(n&&E.from<e)break;let l=E.type.prop(wR);if(l&&(E.to<s.length-50||s.length==i.doc.length||!QL(E))){let a=l(E,i);a&&a.from<=t&&a.from>=e&&a.to>t&&(n=a)}}return n}function QL(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function en(i,e,t){for(let s of i.facet($L)){let r=s(i,e,t);if(r)return r}return JL(i,e,t)}function VR(i,e){let t=e.mapPos(i.from,1),s=e.mapPos(i.to,-1);return t>=s?void 0:{from:t,to:s}}const Cn=Q.define({map:VR}),vi=Q.define({map:VR});function kR(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(s=>s.from<=t&&s.to>=t)||e.push(i.lineBlockAt(t));return e}const Rs=Ge.define({create(){return V.none},update(i,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,s)=>i=VT(i,t,s)),i=i.map(e.changes);for(let t of e.effects)if(t.is(Cn)&&!qL(i,t.value.from,t.value.to)){let{preparePlaceholder:s}=e.state.facet(KR),r=s?V.replace({widget:new ip(s(e.state,t.value))}):kT;i=i.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(vi)&&(i=i.update({filter:(s,r)=>t.value.from!=s||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(i=VT(i,e.selection.main.head)),i},provide:i=>G.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(s,r)=>{t.push(s,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let s=i[t++],r=i[t++];if(typeof s!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(kT.range(s,r))}return V.set(e,!0)}});function VT(i,e,t=e){let s=!1;return i.between(e,t,(r,n)=>{r<t&&n>e&&(s=!0)}),s?i.update({filterFrom:e,filterTo:t,filter:(r,n)=>r>=t||n<=e}):i}function tn(i,e,t){var s;let r=null;return(s=i.field(Rs,!1))===null||s===void 0||s.between(e,t,(n,o)=>{(!r||r.from>n)&&(r={from:n,to:o})}),r}function qL(i,e,t){let s=!1;return i.between(e,e,(r,n)=>{r==e&&n==t&&(s=!0)}),s}function WR(i,e){return i.field(Rs,!1)?e:e.concat(Q.appendConfig.of($R()))}const jL=i=>{for(let e of kR(i)){let t=en(i.state,e.from,e.to);if(t)return i.dispatch({effects:WR(i.state,[Cn.of(t),XR(i,t)])}),!0}return!1},zL=i=>{if(!i.state.field(Rs,!1))return!1;let e=[];for(let t of kR(i)){let s=tn(i.state,t.from,t.to);s&&e.push(vi.of(s),XR(i,s,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function XR(i,e,t=!0){let s=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return G.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${s} ${i.state.phrase("to")} ${r}.`)}const ZL=i=>{let{state:e}=i,t=[];for(let s=0;s<e.doc.length;){let r=i.lineBlockAt(s),n=en(e,r.from,r.to);n&&t.push(Cn.of(n)),s=(n?i.lineBlockAt(n.to):r).to+1}return t.length&&i.dispatch({effects:WR(i.state,t)}),!!t.length},ep=i=>{let e=i.state.field(Rs,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(s,r)=>{t.push(vi.of({from:s,to:r}))}),i.dispatch({effects:t}),!0},tp=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:jL},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:zL},{key:"Ctrl-Alt-[",run:ZL},{key:"Ctrl-Alt-]",run:ep}],sp={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},KR=x.define({combine(i){return pt(i,sp)}});function $R(i){return[Rs,op]}function JR(i,e){let{state:t}=i,s=t.facet(KR),r=o=>{let E=i.lineBlockAt(i.posAtDOM(o.target)),l=tn(i.state,E.from,E.to);l&&i.dispatch({effects:vi.of(l)}),o.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(i,r,e);let n=document.createElement("span");return n.textContent=s.placeholderText,n.setAttribute("aria-label",t.phrase("folded code")),n.title=t.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=r,n}const kT=V.replace({widget:new class extends yt{toDOM(i){return JR(i,null)}}});class ip extends yt{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return JR(e,this.value)}}const rp={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class mo extends Gt{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function np(i={}){let e={...rp,...i},t=new mo(e,!0),s=new mo(e,!1),r=ce.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet($t)!=o.state.facet($t)||o.startState.field(Rs,!1)!=o.state.field(Rs,!1)||Ue(o.startState)!=Ue(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let E=new bt;for(let l of o.viewportLineBlocks){let a=tn(o.state,l.from,l.to)?s:en(o.state,l.from,l.to)?t:null;a&&E.add(l.from,l.from,a)}return E.finish()}}),{domEventHandlers:n}=e;return[r,nL({class:"cm-foldGutter",markers(o){var E;return((E=o.plugin(r))===null||E===void 0?void 0:E.markers)||ee.empty},initialSpacer(){return new mo(e,!1)},domEventHandlers:{...n,click:(o,E,l)=>{if(n.click&&n.click(o,E,l))return!0;let a=tn(o.state,E.from,E.to);if(a)return o.dispatch({effects:vi.of(a)}),!0;let T=en(o.state,E.from,E.to);return T?(o.dispatch({effects:Cn.of(T)}),!0):!1}}}),$R()]}const op=G.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Xs{constructor(e,t){this.specs=e;let s;function r(E){let l=Wt.newName();return(s||(s=Object.create(null)))["."+l]=E,l}const n=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof ot?E=>E.prop(ms)==o.data:o?E=>E==o:void 0,this.style=HR(e.map(E=>({tag:E.tag,class:E.class||r(Object.assign({},E,{tag:null}))})),{all:n}).style,this.module=s?new Wt(s):null,this.themeType=t.themeType}static define(e,t){return new Xs(e,t||{})}}const gE=x.define(),QR=x.define({combine(i){return i.length?[i[0]]:null}});function Do(i){let e=i.facet(gE);return e.length?e:i.facet(QR)}function Tl(i,e){let t=[lp],s;return i instanceof Xs&&(i.module&&t.push(G.styleModule.of(i.module)),s=i.themeType),e?.fallback?t.push(QR.of(i)):s?t.push(gE.computeN([G.darkTheme],r=>r.facet(G.darkTheme)==(s=="dark")?[i]:[])):t.push(gE.of(i)),t}class Ep{constructor(e){this.markCache=Object.create(null),this.tree=Ue(e.state),this.decorations=this.buildDeco(e,Do(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ue(e.state),s=Do(e.state),r=s!=Do(e.startState),{viewport:n}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!r&&t.type==this.tree.type&&o>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return V.none;let s=new bt;for(let{from:r,to:n}of e.visibleRanges)gL(this.tree,t,(o,E,l)=>{s.add(o,E,this.markCache[l]||(this.markCache[l]=V.mark({class:l})))},r,n);return s.finish()}}const lp=Os.high(ce.fromClass(Ep,{decorations:i=>i.decorations})),ap=Xs.define([{tag:u.meta,color:"#404740"},{tag:u.link,textDecoration:"underline"},{tag:u.heading,textDecoration:"underline",fontWeight:"bold"},{tag:u.emphasis,fontStyle:"italic"},{tag:u.strong,fontWeight:"bold"},{tag:u.strikethrough,textDecoration:"line-through"},{tag:u.keyword,color:"#708"},{tag:[u.atom,u.bool,u.url,u.contentSeparator,u.labelName],color:"#219"},{tag:[u.literal,u.inserted],color:"#164"},{tag:[u.string,u.deleted],color:"#a11"},{tag:[u.regexp,u.escape,u.special(u.string)],color:"#e40"},{tag:u.definition(u.variableName),color:"#00f"},{tag:u.local(u.variableName),color:"#30a"},{tag:[u.typeName,u.namespace],color:"#085"},{tag:u.className,color:"#167"},{tag:[u.special(u.variableName),u.macroName],color:"#256"},{tag:u.definition(u.propertyName),color:"#00c"},{tag:u.comment,color:"#940"},{tag:u.invalid,color:"#f00"}]),Tp=G.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),qR=1e4,jR="()[]{}",zR=x.define({combine(i){return pt(i,{afterCursor:!0,brackets:jR,maxScanDistance:qR,renderMatch:Rp})}}),hp=V.mark({class:"cm-matchingBracket"}),Ap=V.mark({class:"cm-nonmatchingBracket"});function Rp(i){let e=[],t=i.matched?hp:Ap;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const Sp=Ge.define({create(){return V.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],s=e.state.facet(zR);for(let r of e.state.selection.ranges){if(!r.empty)continue;let n=ut(e.state,r.head,-1,s)||r.head>0&&ut(e.state,r.head-1,1,s)||s.afterCursor&&(ut(e.state,r.head,1,s)||r.head<e.state.doc.length&&ut(e.state,r.head+1,-1,s));n&&(t=t.concat(s.renderMatch(n,e.state)))}return V.set(t,!0)},provide:i=>G.decorations.from(i)}),cp=[Sp,Tp];function Op(i={}){return[zR.of(i),cp]}const Np=new j;function PE(i,e,t){let s=i.prop(e<0?j.openedBy:j.closedBy);if(s)return s;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function ME(i){let e=i.type.prop(Np);return e?e(i.node):i}function ut(i,e,t,s={}){let r=s.maxScanDistance||qR,n=s.brackets||jR,o=Ue(i),E=o.resolveInner(e,t);for(let l=E;l;l=l.parent){let a=PE(l.type,t,n);if(a&&l.from<l.to){let T=ME(l);if(T&&(t>0?e>=T.from&&e<T.to:e>T.from&&e<=T.to))return Ip(i,e,t,l,T,a,n)}}return fp(i,e,t,o,E.type,r,n)}function Ip(i,e,t,s,r,n,o){let E=s.parent,l={from:r.from,to:r.to},a=0,T=E?.cursor();if(T&&(t<0?T.childBefore(s.from):T.childAfter(s.to)))do if(t<0?T.to<=s.from:T.from>=s.to){if(a==0&&n.indexOf(T.type.name)>-1&&T.from<T.to){let h=ME(T);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(PE(T.type,t,o))a++;else if(PE(T.type,-t,o)){if(a==0){let h=ME(T);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}a--}}while(t<0?T.prevSibling():T.nextSibling());return{start:l,matched:!1}}function fp(i,e,t,s,r,n,o){let E=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),l=o.indexOf(E);if(l<0||l%2==0!=t>0)return null;let a={from:t<0?e-1:e,to:t>0?e+1:e},T=i.doc.iterRange(e,t>0?i.doc.length:0),h=0;for(let A=0;!T.next().done&&A<=n;){let R=T.value;t<0&&(A+=R.length);let S=e+A*t;for(let c=t>0?0:R.length-1,O=t>0?R.length:-1;c!=O;c+=t){let f=o.indexOf(R[c]);if(!(f<0||s.resolveInner(S+c,1).type!=r))if(f%2==0==t>0)h++;else{if(h==1)return{start:a,end:{from:S+c,to:S+c+1},matched:f>>1==l>>1};h--}}t>0&&(A+=R.length)}return T.done?{start:a,matched:!1}:null}const up=Object.create(null),WT=[$e.none],XT=[],KT=Object.create(null),dp=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])dp[i]=Cp(up,e);function go(i,e){XT.indexOf(i)>-1||(XT.push(i),console.warn(e))}function Cp(i,e){let t=[];for(let E of e.split(" ")){let l=[];for(let a of E.split(".")){let T=i[a]||u[a];T?typeof T=="function"?l.length?l=l.map(T):go(a,`Modifier ${a} used at start of tag`):l.length?go(a,`Tag ${a} used as modifier`):l=Array.isArray(T)?T:[T]:go(a,`Unknown highlighting tag ${a}`)}for(let a of l)t.push(a)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),r=s+" "+t.map(E=>E.id),n=KT[r];if(n)return n.id;let o=KT[r]=$e.define({id:WT.length,name:s,props:[yR({[s]:t})]});return WT.push(o),o.id}Te.RTL,Te.LTR;const _p=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),s=Al(i.state,t.from);return s.line?Lp(i):s.block?mp(i):!1};function hl(i,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(s(t.update(r)),!0):!1}}const Lp=hl(Pp,0),pp=hl(ZR,0),mp=hl((i,e)=>ZR(i,e,gp(e)),0);function Al(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const ri=50;function Dp(i,{open:e,close:t},s,r){let n=i.sliceDoc(s-ri,s),o=i.sliceDoc(r,r+ri),E=/\s*$/.exec(n)[0].length,l=/^\s*/.exec(o)[0].length,a=n.length-E;if(n.slice(a-e.length,a)==e&&o.slice(l,l+t.length)==t)return{open:{pos:s-E,margin:E&&1},close:{pos:r+l,margin:l&&1}};let T,h;r-s<=2*ri?T=h=i.sliceDoc(s,r):(T=i.sliceDoc(s,s+ri),h=i.sliceDoc(r-ri,r));let A=/^\s*/.exec(T)[0].length,R=/\s*$/.exec(h)[0].length,S=h.length-R-t.length;return T.slice(A,A+e.length)==e&&h.slice(S,S+t.length)==t?{open:{pos:s+A+e.length,margin:/\s/.test(T.charAt(A+e.length))?1:0},close:{pos:r-R-t.length,margin:/\s/.test(h.charAt(S-1))?1:0}}:null}function gp(i){let e=[];for(let t of i.selection.ranges){let s=i.doc.lineAt(t.from),r=t.to<=s.to?s:i.doc.lineAt(t.to);r.from>s.from&&r.from==t.to&&(r=t.to==s.to+1?s:i.doc.lineAt(t.to-1));let n=e.length-1;n>=0&&e[n].to>s.from?e[n].to=r.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:r.to})}return e}function ZR(i,e,t=e.selection.ranges){let s=t.map(n=>Al(e,n.from).block);if(!s.every(n=>n))return null;let r=t.map((n,o)=>Dp(e,s[o],n.from,n.to));if(i!=2&&!r.every(n=>n))return{changes:e.changes(t.map((n,o)=>r[o]?[]:[{from:n.from,insert:s[o].open+" "},{from:n.to,insert:" "+s[o].close}]))};if(i!=1&&r.some(n=>n)){let n=[];for(let o=0,E;o<r.length;o++)if(E=r[o]){let l=s[o],{open:a,close:T}=E;n.push({from:a.pos-l.open.length,to:a.pos+a.margin},{from:T.pos-T.margin,to:T.pos+l.close.length})}return{changes:n}}return null}function Pp(i,e,t=e.selection.ranges){let s=[],r=-1;for(let{from:n,to:o}of t){let E=s.length,l=1e9,a=Al(e,n).line;if(a){for(let T=n;T<=o;){let h=e.doc.lineAt(T);if(h.from>r&&(n==o||o>h.from)){r=h.from;let A=/^\s*/.exec(h.text)[0].length,R=A==h.length,S=h.text.slice(A,A+a.length)==a?A:-1;A<h.text.length&&A<l&&(l=A),s.push({line:h,comment:S,token:a,indent:A,empty:R,single:!1})}T=h.to+1}if(l<1e9)for(let T=E;T<s.length;T++)s[T].indent<s[T].line.text.length&&(s[T].indent=l);s.length==E+1&&(s[E].single=!0)}}if(i!=2&&s.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:E,token:l,indent:a,empty:T,single:h}of s)(h||!T)&&n.push({from:E.from+a,insert:l+" "});let o=e.changes(n);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&s.some(n=>n.comment>=0)){let n=[];for(let{line:o,comment:E,token:l}of s)if(E>=0){let a=o.from+E,T=a+l.length;o.text[T-o.from]==" "&&T++,n.push({from:a,to:T})}return{changes:n}}return null}const UE=Lt.define(),Mp=Lt.define(),Up=x.define(),eS=x.define({combine(i){return pt(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(s,r)=>e(s,r)||t(s,r)})}}),tS=Ge.define({create(){return dt.empty},update(i,e){let t=e.state.facet(eS),s=e.annotation(UE);if(s){let l=Ke.fromTransaction(e,s.selection),a=s.side,T=a==0?i.undone:i.done;return l?T=sn(T,T.length,t.minDepth,l):T=rS(T,e.startState.selection),new dt(a==0?s.rest:T,a==0?T:s.rest)}let r=e.annotation(Mp);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(Le.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let n=Ke.fromTransaction(e),o=e.annotation(Le.time),E=e.annotation(Le.userEvent);return n?i=i.addChanges(n,o,E,t,e):e.selection&&(i=i.addSelection(e.startState.selection,o,E,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new dt(i.done.map(Ke.fromJSON),i.undone.map(Ke.fromJSON))}});function bp(i={}){return[tS,eS.of(i),G.domEventHandlers({beforeinput(e,t){let s=e.inputType=="historyUndo"?sS:e.inputType=="historyRedo"?bE:null;return s?(e.preventDefault(),s(t)):!1}})]}function _n(i,e){return function({state:t,dispatch:s}){if(!e&&t.readOnly)return!1;let r=t.field(tS,!1);if(!r)return!1;let n=r.pop(i,t,e);return n?(s(n),!0):!1}}const sS=_n(0,!1),bE=_n(1,!1),Bp=_n(0,!0),Gp=_n(1,!0);class Ke{constructor(e,t,s,r,n){this.changes=e,this.effects=t,this.mapped=s,this.startSelection=r,this.selectionsAfter=n}setSelAfter(e){return new Ke(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ke(e.changes&&_e.fromJSON(e.changes),[],e.mapped&&Ct.fromJSON(e.mapped),e.startSelection&&p.fromJSON(e.startSelection),e.selectionsAfter.map(p.fromJSON))}static fromTransaction(e,t){let s=et;for(let r of e.startState.facet(Up)){let n=r(e);n.length&&(s=s.concat(n))}return!s.length&&e.changes.empty?null:new Ke(e.changes.invert(e.startState.doc),s,void 0,t||e.startState.selection,et)}static selection(e){return new Ke(void 0,et,void 0,void 0,e)}}function sn(i,e,t,s){let r=e+1>t+20?e-t-1:0,n=i.slice(r,e);return n.push(s),n}function yp(i,e){let t=[],s=!1;return i.iterChangedRanges((r,n)=>t.push(r,n)),e.iterChangedRanges((r,n,o,E)=>{for(let l=0;l<t.length;){let a=t[l++],T=t[l++];E>=a&&o<=T&&(s=!0)}}),s}function xp(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,s)=>t.empty!=e.ranges[s].empty).length===0}function iS(i,e){return i.length?e.length?i.concat(e):i:e}const et=[],Hp=200;function rS(i,e){if(i.length){let t=i[i.length-1],s=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Hp));return s.length&&s[s.length-1].eq(e)?i:(s.push(e),sn(i,i.length-1,1e9,t.setSelAfter(s)))}else return[Ke.selection([e])]}function Fp(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Po(i,e){if(!i.length)return i;let t=i.length,s=et;for(;t;){let r=Yp(i[t-1],e,s);if(r.changes&&!r.changes.empty||r.effects.length){let n=i.slice(0,t);return n[t-1]=r,n}else e=r.mapped,t--,s=r.selectionsAfter}return s.length?[Ke.selection(s)]:et}function Yp(i,e,t){let s=iS(i.selectionsAfter.length?i.selectionsAfter.map(E=>E.map(e)):et,t);if(!i.changes)return Ke.selection(s);let r=i.changes.map(e),n=e.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(n):n;return new Ke(r,Q.mapEffects(i.effects,e),o,i.startSelection.map(n),s)}const vp=/^(input\.type|delete)($|\.)/;class dt{constructor(e,t,s=0,r=void 0){this.done=e,this.undone=t,this.prevTime=s,this.prevUserEvent=r}isolate(){return this.prevTime?new dt(this.done,this.undone):this}addChanges(e,t,s,r,n){let o=this.done,E=o[o.length-1];return E&&E.changes&&!E.changes.empty&&e.changes&&(!s||vp.test(s))&&(!E.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(n,yp(E.changes,e.changes))||s=="input.type.compose")?o=sn(o,o.length-1,r.minDepth,new Ke(e.changes.compose(E.changes),iS(Q.mapEffects(e.effects,E.changes),E.effects),E.mapped,E.startSelection,et)):o=sn(o,o.length,r.minDepth,e),new dt(o,et,t,s)}addSelection(e,t,s,r){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:et;return n.length>0&&t-this.prevTime<r&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&xp(n[n.length-1],e)?this:new dt(rS(this.done,e),this.undone,t,s)}addMapping(e){return new dt(Po(this.done,e),Po(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,s){let r=e==0?this.done:this.undone;if(r.length==0)return null;let n=r[r.length-1],o=n.selectionsAfter[0]||t.selection;if(s&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:UE.of({side:e,rest:Fp(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let E=r.length==1?et:r.slice(0,r.length-1);return n.mapped&&(E=Po(E,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:UE.of({side:e,rest:E,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}dt.empty=new dt(et,et);const nS=[{key:"Mod-z",run:sS,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:bE,preventDefault:!0},{linux:"Ctrl-Shift-z",run:bE,preventDefault:!0},{key:"Mod-u",run:Bp,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Gp,preventDefault:!0}];function Ks(i,e){return p.create(i.ranges.map(e),i.mainIndex)}function Tt(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ht({state:i,dispatch:e},t){let s=Ks(i.selection,t);return s.eq(i.selection,!0)?!1:(e(Tt(i,s)),!0)}function Ln(i,e){return p.cursor(e?i.to:i.from)}function oS(i,e){return ht(i,t=>t.empty?i.moveByChar(t,e):Ln(t,e))}function He(i){return i.textDirectionAt(i.state.selection.main.head)==Te.LTR}const ES=i=>oS(i,!He(i)),lS=i=>oS(i,He(i));function aS(i,e){return ht(i,t=>t.empty?i.moveByGroup(t,e):Ln(t,e))}const wp=i=>aS(i,!He(i)),Vp=i=>aS(i,He(i));function kp(i,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function pn(i,e,t){let s=Ue(i).resolveInner(e.head),r=t?j.closedBy:j.openedBy;for(let l=e.head;;){let a=t?s.childAfter(l):s.childBefore(l);if(!a)break;kp(i,a,r)?s=a:l=t?a.to:a.from}let n=s.type.prop(r),o,E;return n&&(o=t?ut(i,s.from,1):ut(i,s.to,-1))&&o.matched?E=t?o.end.to:o.end.from:E=t?s.to:s.from,p.cursor(E,t?-1:1)}const Wp=i=>ht(i,e=>pn(i.state,e,!He(i))),Xp=i=>ht(i,e=>pn(i.state,e,He(i)));function TS(i,e){return ht(i,t=>{if(!t.empty)return Ln(t,e);let s=i.moveVertically(t,e);return s.head!=t.head?s:i.moveToLineBoundary(t,e)})}const hS=i=>TS(i,!1),AS=i=>TS(i,!0);function RS(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,s=0,r;if(e){for(let n of i.state.facet(G.scrollMargins)){let o=n(i);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(s=Math.max(o?.bottom,s))}r=i.scrollDOM.clientHeight-t-s}else r=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(i.defaultLineHeight,r-5)}}function SS(i,e){let t=RS(i),{state:s}=i,r=Ks(s.selection,o=>o.empty?i.moveVertically(o,e,t.height):Ln(o,e));if(r.eq(s.selection))return!1;let n;if(t.selfScroll){let o=i.coordsAtPos(s.selection.main.head),E=i.scrollDOM.getBoundingClientRect(),l=E.top+t.marginTop,a=E.bottom-t.marginBottom;o&&o.top>l&&o.bottom<a&&(n=G.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return i.dispatch(Tt(s,r),{effects:n}),!0}const $T=i=>SS(i,!1),BE=i=>SS(i,!0);function Jt(i,e,t){let s=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?s.to:s.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==s.from&&s.length){let n=/^\s*/.exec(i.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;n&&e.head!=s.from+n&&(r=p.cursor(s.from+n))}return r}const Kp=i=>ht(i,e=>Jt(i,e,!0)),$p=i=>ht(i,e=>Jt(i,e,!1)),Jp=i=>ht(i,e=>Jt(i,e,!He(i))),Qp=i=>ht(i,e=>Jt(i,e,He(i))),qp=i=>ht(i,e=>p.cursor(i.lineBlockAt(e.head).from,1)),jp=i=>ht(i,e=>p.cursor(i.lineBlockAt(e.head).to,-1));function zp(i,e,t){let s=!1,r=Ks(i.selection,n=>{let o=ut(i,n.head,-1)||ut(i,n.head,1)||n.head>0&&ut(i,n.head-1,1)||n.head<i.doc.length&&ut(i,n.head+1,-1);if(!o||!o.end)return n;s=!0;let E=o.start.from==n.head?o.end.to:o.end.from;return p.cursor(E)});return s?(e(Tt(i,r)),!0):!1}const Zp=({state:i,dispatch:e})=>zp(i,e);function nt(i,e){let t=Ks(i.state.selection,s=>{let r=e(s);return p.range(s.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(Tt(i.state,t)),!0)}function cS(i,e){return nt(i,t=>i.moveByChar(t,e))}const OS=i=>cS(i,!He(i)),NS=i=>cS(i,He(i));function IS(i,e){return nt(i,t=>i.moveByGroup(t,e))}const em=i=>IS(i,!He(i)),tm=i=>IS(i,He(i)),sm=i=>nt(i,e=>pn(i.state,e,!He(i))),im=i=>nt(i,e=>pn(i.state,e,He(i)));function fS(i,e){return nt(i,t=>i.moveVertically(t,e))}const uS=i=>fS(i,!1),dS=i=>fS(i,!0);function CS(i,e){return nt(i,t=>i.moveVertically(t,e,RS(i).height))}const JT=i=>CS(i,!1),QT=i=>CS(i,!0),rm=i=>nt(i,e=>Jt(i,e,!0)),nm=i=>nt(i,e=>Jt(i,e,!1)),om=i=>nt(i,e=>Jt(i,e,!He(i))),Em=i=>nt(i,e=>Jt(i,e,He(i))),lm=i=>nt(i,e=>p.cursor(i.lineBlockAt(e.head).from)),am=i=>nt(i,e=>p.cursor(i.lineBlockAt(e.head).to)),qT=({state:i,dispatch:e})=>(e(Tt(i,{anchor:0})),!0),jT=({state:i,dispatch:e})=>(e(Tt(i,{anchor:i.doc.length})),!0),zT=({state:i,dispatch:e})=>(e(Tt(i,{anchor:i.selection.main.anchor,head:0})),!0),ZT=({state:i,dispatch:e})=>(e(Tt(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),Tm=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),hm=({state:i,dispatch:e})=>{let t=mn(i).map(({from:s,to:r})=>p.range(s,Math.min(r+1,i.doc.length)));return e(i.update({selection:p.create(t),userEvent:"select"})),!0},Am=({state:i,dispatch:e})=>{let t=Ks(i.selection,s=>{let r=Ue(i),n=r.resolveStack(s.from,1);if(s.empty){let o=r.resolveStack(s.from,-1);o.node.from>=n.node.from&&o.node.to<=n.node.to&&(n=o)}for(let o=n;o;o=o.next){let{node:E}=o;if((E.from<s.from&&E.to>=s.to||E.to>s.to&&E.from<=s.from)&&o.next)return p.range(E.to,E.from)}return s});return t.eq(i.selection)?!1:(e(Tt(i,t)),!0)};function _S(i,e){let{state:t}=i,s=t.selection,r=t.selection.ranges.slice();for(let n of t.selection.ranges){let o=t.doc.lineAt(n.head);if(e?o.to<i.state.doc.length:o.from>0)for(let E=n;;){let l=i.moveVertically(E,e);if(l.head<o.from||l.head>o.to){r.some(a=>a.head==l.head)||r.push(l);break}else{if(l.head==E.head)break;E=l}}}return r.length==s.ranges.length?!1:(i.dispatch(Tt(t,p.create(r,r.length-1))),!0)}const Rm=i=>_S(i,!1),Sm=i=>_S(i,!0),cm=({state:i,dispatch:e})=>{let t=i.selection,s=null;return t.ranges.length>1?s=p.create([t.main]):t.main.empty||(s=p.create([p.cursor(t.main.head)])),s?(e(Tt(i,s)),!0):!1};function wi(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:s}=i,r=s.changeByRange(n=>{let{from:o,to:E}=n;if(o==E){let l=e(n);l<o?(t="delete.backward",l=fr(i,l,!1)):l>o&&(t="delete.forward",l=fr(i,l,!0)),o=Math.min(o,l),E=Math.max(E,l)}else o=fr(i,o,!1),E=fr(i,E,!0);return o==E?{range:n}:{changes:{from:o,to:E},range:p.cursor(o,o<n.head?-1:1)}});return r.changes.empty?!1:(i.dispatch(s.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?G.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function fr(i,e,t){if(i instanceof G)for(let s of i.state.facet(G.atomicRanges).map(r=>r(i)))s.between(e,e,(r,n)=>{r<e&&n>e&&(e=t?n:r)});return e}const LS=(i,e,t)=>wi(i,s=>{let r=s.from,{state:n}=i,o=n.doc.lineAt(r),E,l;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(E=o.text.slice(0,r-o.from))){if(E[E.length-1]=="	")return r-1;let a=Ws(E,n.tabSize),T=a%Zr(n)||Zr(n);for(let h=0;h<T&&E[E.length-1-h]==" ";h++)r--;l=r}else l=Be(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?n.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Be(o.text,l-o.from,!1,!1)+o.from);return l}),GE=i=>LS(i,!1,!0),pS=i=>LS(i,!0,!1),mS=(i,e)=>wi(i,t=>{let s=t.head,{state:r}=i,n=r.doc.lineAt(s),o=r.charCategorizer(s);for(let E=null;;){if(s==(e?n.to:n.from)){s==t.head&&n.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);break}let l=Be(n.text,s-n.from,e)+n.from,a=n.text.slice(Math.min(s,l)-n.from,Math.max(s,l)-n.from),T=o(a);if(E!=null&&T!=E)break;(a!=" "||s!=t.head)&&(E=T),s=l}return s}),DS=i=>mS(i,!1),Om=i=>mS(i,!0),Nm=i=>wi(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),Im=i=>wi(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),fm=i=>wi(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),um=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:te.of(["",""])},range:p.cursor(s.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},dm=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(s=>{if(!s.empty||s.from==0||s.from==i.doc.length)return{range:s};let r=s.from,n=i.doc.lineAt(r),o=r==n.from?r-1:Be(n.text,r-n.from,!1)+n.from,E=r==n.to?r+1:Be(n.text,r-n.from,!0)+n.from;return{changes:{from:o,to:E,insert:i.doc.slice(r,E).append(i.doc.slice(o,r))},range:p.cursor(E)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function mn(i){let e=[],t=-1;for(let s of i.selection.ranges){let r=i.doc.lineAt(s.from),n=i.doc.lineAt(s.to);if(!s.empty&&s.to==n.from&&(n=i.doc.lineAt(s.to-1)),t>=r.number){let o=e[e.length-1];o.to=n.to,o.ranges.push(s)}else e.push({from:r.from,to:n.to,ranges:[s]});t=n.number+1}return e}function gS(i,e,t){if(i.readOnly)return!1;let s=[],r=[];for(let n of mn(i)){if(t?n.to==i.doc.length:n.from==0)continue;let o=i.doc.lineAt(t?n.to+1:n.from-1),E=o.length+1;if(t){s.push({from:n.to,to:o.to},{from:n.from,insert:o.text+i.lineBreak});for(let l of n.ranges)r.push(p.range(Math.min(i.doc.length,l.anchor+E),Math.min(i.doc.length,l.head+E)))}else{s.push({from:o.from,to:n.from},{from:n.to,insert:i.lineBreak+o.text});for(let l of n.ranges)r.push(p.range(l.anchor-E,l.head-E))}}return s.length?(e(i.update({changes:s,scrollIntoView:!0,selection:p.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Cm=({state:i,dispatch:e})=>gS(i,e,!1),_m=({state:i,dispatch:e})=>gS(i,e,!0);function PS(i,e,t){if(i.readOnly)return!1;let s=[];for(let r of mn(i))t?s.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):s.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Lm=({state:i,dispatch:e})=>PS(i,e,!1),pm=({state:i,dispatch:e})=>PS(i,e,!0),mm=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(mn(e).map(({from:r,to:n})=>(r>0?r--:n<e.doc.length&&n++,{from:r,to:n}))),s=Ks(e.selection,r=>{let n;if(i.lineWrapping){let o=i.lineBlockAt(r.head),E=i.coordsAtPos(r.head,r.assoc||1);E&&(n=o.bottom+i.documentTop-E.bottom+i.defaultLineHeight/2)}return i.moveVertically(r,!0,n)}).map(t);return i.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Dm(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ue(i).resolveInner(e),s=t.childBefore(e),r=t.childAfter(e),n;return s&&r&&s.to<=e&&r.from>=e&&(n=s.type.prop(j.closedBy))&&n.indexOf(r.name)>-1&&i.doc.lineAt(s.to).from==i.doc.lineAt(r.from).from&&!/\S/.test(i.sliceDoc(s.to,r.from))?{from:s.to,to:r.from}:null}const eh=MS(!1),gm=MS(!0);function MS(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(r=>{let{from:n,to:o}=r,E=e.doc.lineAt(n),l=!i&&n==o&&Dm(e,n);i&&(n=o=(o<=E.to?E:e.doc.lineAt(o)).to);let a=new dn(e,{simulateBreak:n,simulateDoubleBreak:!!l}),T=ll(a,n);for(T==null&&(T=Ws(/^\s*/.exec(e.doc.lineAt(n).text)[0],e.tabSize));o<E.to&&/\s/.test(E.text[o-E.from]);)o++;l?{from:n,to:o}=l:n>E.from&&n<E.from+100&&!/\S/.test(E.text.slice(0,n))&&(n=E.from);let h=["",mi(e,T)];return l&&h.push(mi(e,a.lineIndent(E.from,-1))),{changes:{from:n,to:o,insert:te.of(h)},range:p.cursor(n+1+h[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function Rl(i,e){let t=-1;return i.changeByRange(s=>{let r=[];for(let o=s.from;o<=s.to;){let E=i.doc.lineAt(o);E.number>t&&(s.empty||s.to>E.from)&&(e(E,r,s),t=E.number),o=E.to+1}let n=i.changes(r);return{changes:r,range:p.range(n.mapPos(s.anchor,1),n.mapPos(s.head,1))}})}const Pm=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),s=new dn(i,{overrideIndentation:n=>{let o=t[n];return o??-1}}),r=Rl(i,(n,o,E)=>{let l=ll(s,n.from);if(l==null)return;/\S/.test(n.text)||(l=0);let a=/^\s*/.exec(n.text)[0],T=mi(i,l);(a!=T||E.from<n.from+a.length)&&(t[n.from]=l,o.push({from:n.from,to:n.from+a.length,insert:T}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},US=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(Rl(i,(t,s)=>{s.push({from:t.from,insert:i.facet(un)})}),{userEvent:"input.indent"})),!0),bS=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(Rl(i,(t,s)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let n=Ws(r,i.tabSize),o=0,E=mi(i,Math.max(0,n-Zr(i)));for(;o<r.length&&o<E.length&&r.charCodeAt(o)==E.charCodeAt(o);)o++;s.push({from:t.from+o,to:t.from+r.length,insert:E.slice(o)})}),{userEvent:"delete.dedent"})),!0),Mm=i=>(i.setTabFocusMode(),!0),Um=[{key:"Ctrl-b",run:ES,shift:OS,preventDefault:!0},{key:"Ctrl-f",run:lS,shift:NS},{key:"Ctrl-p",run:hS,shift:uS},{key:"Ctrl-n",run:AS,shift:dS},{key:"Ctrl-a",run:qp,shift:lm},{key:"Ctrl-e",run:jp,shift:am},{key:"Ctrl-d",run:pS},{key:"Ctrl-h",run:GE},{key:"Ctrl-k",run:Nm},{key:"Ctrl-Alt-h",run:DS},{key:"Ctrl-o",run:um},{key:"Ctrl-t",run:dm},{key:"Ctrl-v",run:BE}],bm=[{key:"ArrowLeft",run:ES,shift:OS,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:wp,shift:em,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Jp,shift:om,preventDefault:!0},{key:"ArrowRight",run:lS,shift:NS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Vp,shift:tm,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Qp,shift:Em,preventDefault:!0},{key:"ArrowUp",run:hS,shift:uS,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qT,shift:zT},{mac:"Ctrl-ArrowUp",run:$T,shift:JT},{key:"ArrowDown",run:AS,shift:dS,preventDefault:!0},{mac:"Cmd-ArrowDown",run:jT,shift:ZT},{mac:"Ctrl-ArrowDown",run:BE,shift:QT},{key:"PageUp",run:$T,shift:JT},{key:"PageDown",run:BE,shift:QT},{key:"Home",run:$p,shift:nm,preventDefault:!0},{key:"Mod-Home",run:qT,shift:zT},{key:"End",run:Kp,shift:rm,preventDefault:!0},{key:"Mod-End",run:jT,shift:ZT},{key:"Enter",run:eh,shift:eh},{key:"Mod-a",run:Tm},{key:"Backspace",run:GE,shift:GE,preventDefault:!0},{key:"Delete",run:pS,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:DS,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Om,preventDefault:!0},{mac:"Mod-Backspace",run:Im,preventDefault:!0},{mac:"Mod-Delete",run:fm,preventDefault:!0}].concat(Um.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),BS=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Wp,shift:sm},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Xp,shift:im},{key:"Alt-ArrowUp",run:Cm},{key:"Shift-Alt-ArrowUp",run:Lm},{key:"Alt-ArrowDown",run:_m},{key:"Shift-Alt-ArrowDown",run:pm},{key:"Mod-Alt-ArrowUp",run:Rm},{key:"Mod-Alt-ArrowDown",run:Sm},{key:"Escape",run:cm},{key:"Mod-Enter",run:gm},{key:"Alt-l",mac:"Ctrl-l",run:hm},{key:"Mod-i",run:Am,preventDefault:!0},{key:"Mod-[",run:bS},{key:"Mod-]",run:US},{key:"Mod-Alt-\\",run:Pm},{key:"Shift-Mod-k",run:mm},{key:"Shift-Mod-\\",run:Zp},{key:"Mod-/",run:_p},{key:"Alt-A",run:pp},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Mm}].concat(bm),Bm={key:"Tab",run:US,shift:bS},th=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class ws{constructor(e,t,s=0,r=e.length,n,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,r),this.bufferStart=s,this.normalize=n?E=>n(th(E)):th,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ke(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=kE(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=It(e);let r=this.normalize(t);if(r.length)for(let n=0,o=s;;n++){let E=r.charCodeAt(n),l=this.match(E,o,this.bufferPos+this.bufferStart);if(n==r.length-1){if(l)return this.value=l,this;break}o==s&&n<t.length&&t.charCodeAt(n)==E&&o++}}}match(e,t,s){let r=null;for(let n=0;n<this.matches.length;n+=2){let o=this.matches[n],E=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[n+1],to:s}:(this.matches[n]++,E=!0)),E||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:s}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(ws.prototype[Symbol.iterator]=function(){return this});const GS={from:-1,to:-1,match:/.*/.exec("")},Sl="gm"+(/x/.unicode==null?"":"u");class yS{constructor(e,t,s,r=0,n=e.length){if(this.text=e,this.to=n,this.curLine="",this.done=!1,this.value=GS,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new xS(e,t,s,r,n);this.re=new RegExp(t,Sl+(s?.ignoreCase?"i":"")),this.test=s?.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=rn(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let s=this.curLineStart+t.index,r=s+t[0].length;if(this.matchPos=rn(this.text,r+(s==r?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<r||s>this.value.to)&&(!this.test||this.test(s,r,t)))return this.value={from:s,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Mo=new WeakMap;class Us{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,s){let r=Mo.get(e);if(!r||r.from>=s||r.to<=t){let E=new Us(t,e.sliceString(t,s));return Mo.set(e,E),E}if(r.from==t&&r.to==s)return r;let{text:n,from:o}=r;return o>t&&(n=e.sliceString(t,o)+n,o=t),r.to<s&&(n+=e.sliceString(r.to,s)),Mo.set(e,new Us(o,n)),new Us(t,n.slice(t-o,s-o))}}class xS{constructor(e,t,s,r,n){this.text=e,this.to=n,this.done=!1,this.value=GS,this.matchPos=rn(e,r),this.re=new RegExp(t,Sl+(s?.ignoreCase?"i":"")),this.test=s?.test,this.flat=Us.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let s=this.flat.from+t.index,r=s+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,r,t)))return this.value={from:s,to:r,match:t},this.matchPos=rn(this.text,r+(s==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Us.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(yS.prototype[Symbol.iterator]=xS.prototype[Symbol.iterator]=function(){return this});function Gm(i){try{return new RegExp(i,Sl),!0}catch{return!1}}function rn(i,e){if(e>=i.length)return e;let t=i.lineAt(e),s;for(;e<t.to&&(s=t.text.charCodeAt(e-t.from))>=56320&&s<57344;)e++;return e}function yE(i){let e=String(i.state.doc.lineAt(i.state.selection.main.head).number),t=oe("input",{class:"cm-textfield",name:"line",value:e}),s=oe("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),i.dispatch({effects:Oi.of(!1)}),i.focus()):n.keyCode==13&&(n.preventDefault(),r())},onsubmit:n=>{n.preventDefault(),r()}},oe("label",i.state.phrase("Go to line"),": ",t)," ",oe("button",{class:"cm-button",type:"submit"},i.state.phrase("go")),oe("button",{name:"close",onclick:()=>{i.dispatch({effects:Oi.of(!1)}),i.focus()},"aria-label":i.state.phrase("close"),type:"button"},["×"]));function r(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:o}=i,E=o.doc.lineAt(o.selection.main.head),[,l,a,T,h]=n,A=T?+T.slice(1):0,R=a?+a:E.number;if(a&&h){let O=R/100;l&&(O=O*(l=="-"?-1:1)+E.number/o.doc.lines),R=Math.round(o.doc.lines*O)}else a&&l&&(R=R*(l=="-"?-1:1)+E.number);let S=o.doc.line(Math.max(1,Math.min(o.doc.lines,R))),c=p.cursor(S.from+Math.max(0,Math.min(A,S.length)));i.dispatch({effects:[Oi.of(!1),G.scrollIntoView(c.from,{y:"center"})],selection:c}),i.focus()}return{dom:s}}const Oi=Q.define(),sh=Ge.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(Oi)&&(i=t.value);return i},provide:i=>_i.from(i,e=>e?yE:null)}),ym=i=>{let e=Ci(i,yE);if(!e){let t=[Oi.of(!0)];i.state.field(sh,!1)==null&&t.push(Q.appendConfig.of([sh,xm])),i.dispatch({effects:t}),e=Ci(i,yE)}return e&&e.dom.querySelector("input").select(),!0},xm=G.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Hm={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Fm=x.define({combine(i){return pt(i,Hm,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ym(i){return[Wm,km]}const vm=V.mark({class:"cm-selectionMatch"}),wm=V.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function ih(i,e,t,s){return(t==0||i(e.sliceDoc(t-1,t))!=he.Word)&&(s==e.doc.length||i(e.sliceDoc(s,s+1))!=he.Word)}function Vm(i,e,t,s){return i(e.sliceDoc(t,t+1))==he.Word&&i(e.sliceDoc(s-1,s))==he.Word}const km=ce.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(Fm),{state:t}=i,s=t.selection;if(s.ranges.length>1)return V.none;let r=s.main,n,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return V.none;let l=t.wordAt(r.head);if(!l)return V.none;o=t.charCategorizer(r.head),n=t.sliceDoc(l.from,l.to)}else{let l=r.to-r.from;if(l<e.minSelectionLength||l>200)return V.none;if(e.wholeWords){if(n=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!(ih(o,t,r.from,r.to)&&Vm(o,t,r.from,r.to)))return V.none}else if(n=t.sliceDoc(r.from,r.to),!n)return V.none}let E=[];for(let l of i.visibleRanges){let a=new ws(t.doc,n,l.from,l.to);for(;!a.next().done;){let{from:T,to:h}=a.value;if((!o||ih(o,t,T,h))&&(r.empty&&T<=r.from&&h>=r.to?E.push(wm.range(T,h)):(T>=r.to||h<=r.from)&&E.push(vm.range(T,h)),E.length>e.maxMatches))return V.none}}return V.set(E)}},{decorations:i=>i.decorations}),Wm=G.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Xm=({state:i,dispatch:e})=>{let{selection:t}=i,s=p.create(t.ranges.map(r=>i.wordAt(r.head)||p.cursor(r.head)),t.mainIndex);return s.eq(t)?!1:(e(i.update({selection:s})),!0)};function Km(i,e){let{main:t,ranges:s}=i.selection,r=i.wordAt(t.head),n=r&&r.from==t.from&&r.to==t.to;for(let o=!1,E=new ws(i.doc,e,s[s.length-1].to);;)if(E.next(),E.done){if(o)return null;E=new ws(i.doc,e,0,Math.max(0,s[s.length-1].from-1)),o=!0}else{if(o&&s.some(l=>l.from==E.value.from))continue;if(n){let l=i.wordAt(E.value.from);if(!l||l.from!=E.value.from||l.to!=E.value.to)continue}return E.value}}const $m=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(n=>n.from===n.to))return Xm({state:i,dispatch:e});let s=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(n=>i.sliceDoc(n.from,n.to)!=s))return!1;let r=Km(i,s);return r?(e(i.update({selection:i.selection.addRange(p.range(r.from,r.to),!1),effects:G.scrollIntoView(r.to)})),!0):!1},$s=x.define({combine(i){return pt(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new nD(e),scrollToMatch:e=>G.scrollIntoView(e)})}});class HS{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Gm(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new jm(this):new Qm(this)}getCursor(e,t=0,s){let r=e.doc?e:z.create({doc:e});return s==null&&(s=r.doc.length),this.regexp?_s(this,r,t,s):Cs(this,r,t,s)}}class FS{constructor(e){this.spec=e}}function Cs(i,e,t,s){return new ws(e.doc,i.unquoted,t,s,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?Jm(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Jm(i,e){return(t,s,r,n)=>((n>t||n+r.length<s)&&(n=Math.max(0,t-2),r=i.sliceString(n,Math.min(i.length,s+2))),(e(nn(r,t-n))!=he.Word||e(on(r,t-n))!=he.Word)&&(e(on(r,s-n))!=he.Word||e(nn(r,s-n))!=he.Word))}class Qm extends FS{constructor(e){super(e)}nextMatch(e,t,s){let r=Cs(this.spec,e,s,e.doc.length).nextOverlapping();if(r.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);r=Cs(this.spec,e,0,n).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==s?null:r.value}prevMatchInRange(e,t,s){for(let r=s;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),o=Cs(this.spec,e,n,r),E=null;for(;!o.nextOverlapping().done;)E=o.value;if(E)return E;if(n==t)return null;r-=1e4}}prevMatch(e,t,s){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=s)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let s=Cs(this.spec,e,0,e.doc.length),r=[];for(;!s.next().done;){if(r.length>=t)return null;r.push(s.value)}return r}highlight(e,t,s,r){let n=Cs(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}function _s(i,e,t,s){return new yS(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?qm(e.charCategorizer(e.selection.main.head)):void 0},t,s)}function nn(i,e){return i.slice(Be(i,e,!1),e)}function on(i,e){return i.slice(e,Be(i,e))}function qm(i){return(e,t,s)=>!s[0].length||(i(nn(s.input,s.index))!=he.Word||i(on(s.input,s.index))!=he.Word)&&(i(on(s.input,s.index+s[0].length))!=he.Word||i(nn(s.input,s.index+s[0].length))!=he.Word)}class jm extends FS{nextMatch(e,t,s){let r=_s(this.spec,e,s,e.doc.length).next();return r.done&&(r=_s(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,s){for(let r=1;;r++){let n=Math.max(t,s-r*1e4),o=_s(this.spec,e,n,s),E=null;for(;!o.next().done;)E=o.value;if(E&&(n==t||E.from>n+10))return E;if(n==t)return null}}prevMatch(e,t,s){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let r=s.length;r>0;r--){let n=+s.slice(0,r);if(n>0&&n<e.match.length)return e.match[n]+s.slice(r)}return t})}matchAll(e,t){let s=_s(this.spec,e,0,e.doc.length),r=[];for(;!s.next().done;){if(r.length>=t)return null;r.push(s.value)}return r}highlight(e,t,s,r){let n=_s(this.spec,e,Math.max(0,t-250),Math.min(s+250,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}const Di=Q.define(),cl=Q.define(),kt=Ge.define({create(i){return new Uo(xE(i).create(),null)},update(i,e){for(let t of e.effects)t.is(Di)?i=new Uo(t.value.create(),i.panel):t.is(cl)&&(i=new Uo(i.query,t.value?Ol:null));return i},provide:i=>_i.from(i,e=>e.panel)});class Uo{constructor(e,t){this.query=e,this.panel=t}}const zm=V.mark({class:"cm-searchMatch"}),Zm=V.mark({class:"cm-searchMatch cm-searchMatch-selected"}),eD=ce.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(kt))}update(i){let e=i.state.field(kt);(e!=i.startState.field(kt)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return V.none;let{view:t}=this,s=new bt;for(let r=0,n=t.visibleRanges,o=n.length;r<o;r++){let{from:E,to:l}=n[r];for(;r<o-1&&l>n[r+1].from-500;)l=n[++r].to;i.highlight(t.state,E,l,(a,T)=>{let h=t.state.selection.ranges.some(A=>A.from==a&&A.to==T);s.add(a,T,h?Zm:zm)})}return s.finish()}},{decorations:i=>i.decorations});function Vi(i){return e=>{let t=e.state.field(kt,!1);return t&&t.query.spec.valid?i(e,t):wS(e)}}const En=Vi((i,{query:e})=>{let{to:t}=i.state.selection.main,s=e.nextMatch(i.state,t,t);if(!s)return!1;let r=p.single(s.from,s.to),n=i.state.facet($s);return i.dispatch({selection:r,effects:[Nl(i,s),n.scrollToMatch(r.main,i)],userEvent:"select.search"}),vS(i),!0}),ln=Vi((i,{query:e})=>{let{state:t}=i,{from:s}=t.selection.main,r=e.prevMatch(t,s,s);if(!r)return!1;let n=p.single(r.from,r.to),o=i.state.facet($s);return i.dispatch({selection:n,effects:[Nl(i,r),o.scrollToMatch(n.main,i)],userEvent:"select.search"}),vS(i),!0}),tD=Vi((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:p.create(t.map(s=>p.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),sD=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:s,to:r}=t.main,n=[],o=0;for(let E=new ws(i.doc,i.sliceDoc(s,r));!E.next().done;){if(n.length>1e3)return!1;E.value.from==s&&(o=n.length),n.push(p.range(E.value.from,E.value.to))}return e(i.update({selection:p.create(n,o),userEvent:"select.search.matches"})),!0},rh=Vi((i,{query:e})=>{let{state:t}=i,{from:s,to:r}=t.selection.main;if(t.readOnly)return!1;let n=e.nextMatch(t,s,s);if(!n)return!1;let o=n,E=[],l,a,T=[];o.from==s&&o.to==r&&(a=t.toText(e.getReplacement(o)),E.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(t,o.from,o.to),T.push(G.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(s).number)+".")));let h=i.state.changes(E);return o&&(l=p.single(o.from,o.to).map(h),T.push(Nl(i,o)),T.push(t.facet($s).scrollToMatch(l.main,i))),i.dispatch({changes:h,selection:l,effects:T,userEvent:"input.replace"}),!0}),iD=Vi((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(r=>{let{from:n,to:o}=r;return{from:n,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let s=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:G.announce.of(s),userEvent:"input.replace.all"}),!0});function Ol(i){return i.state.facet($s).createPanel(i)}function xE(i,e){var t,s,r,n,o;let E=i.selection.main,l=E.empty||E.to>E.from+100?"":i.sliceDoc(E.from,E.to);if(e&&!l)return e;let a=i.facet($s);return new HS({search:((t=e?.literal)!==null&&t!==void 0?t:a.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(s=e?.caseSensitive)!==null&&s!==void 0?s:a.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:a.literal,regexp:(n=e?.regexp)!==null&&n!==void 0?n:a.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:a.wholeWord})}function YS(i){let e=Ci(i,Ol);return e&&e.dom.querySelector("[main-field]")}function vS(i){let e=YS(i);e&&e==i.root.activeElement&&e.select()}const wS=i=>{let e=i.state.field(kt,!1);if(e&&e.panel){let t=YS(i);if(t&&t!=i.root.activeElement){let s=xE(i.state,e.query.spec);s.valid&&i.dispatch({effects:Di.of(s)}),t.focus(),t.select()}}else i.dispatch({effects:[cl.of(!0),e?Di.of(xE(i.state,e.query.spec)):Q.appendConfig.of(ED)]});return!0},VS=i=>{let e=i.state.field(kt,!1);if(!e||!e.panel)return!1;let t=Ci(i,Ol);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:cl.of(!1)}),!0},rD=[{key:"Mod-f",run:wS,scope:"editor search-panel"},{key:"F3",run:En,shift:ln,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:En,shift:ln,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:VS,scope:"editor search-panel"},{key:"Mod-Shift-l",run:sD},{key:"Mod-Alt-g",run:ym},{key:"Mod-d",run:$m,preventDefault:!0}];class nD{constructor(e){this.view=e;let t=this.query=e.state.field(kt).query.spec;this.commit=this.commit.bind(this),this.searchField=oe("input",{value:t.search,placeholder:Qe(e,"Find"),"aria-label":Qe(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=oe("input",{value:t.replace,placeholder:Qe(e,"Replace"),"aria-label":Qe(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=oe("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=oe("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=oe("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function s(r,n,o){return oe("button",{class:"cm-button",name:r,onclick:n,type:"button"},o)}this.dom=oe("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,s("next",()=>En(e),[Qe(e,"next")]),s("prev",()=>ln(e),[Qe(e,"previous")]),s("select",()=>tD(e),[Qe(e,"all")]),oe("label",null,[this.caseField,Qe(e,"match case")]),oe("label",null,[this.reField,Qe(e,"regexp")]),oe("label",null,[this.wordField,Qe(e,"by word")]),...e.state.readOnly?[]:[oe("br"),this.replaceField,s("replace",()=>rh(e),[Qe(e,"replace")]),s("replaceAll",()=>iD(e),[Qe(e,"replace all")])],oe("button",{name:"close",onclick:()=>VS(e),"aria-label":Qe(e,"close"),type:"button"},["×"])])}commit(){let e=new HS({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Di.of(e)}))}keydown(e){R_(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ln:En)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),rh(this.view))}update(e){for(let t of e.transactions)for(let s of t.effects)s.is(Di)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($s).top}}function Qe(i,e){return i.state.phrase(e)}const ur=30,dr=/[\s\.,:;?!]/;function Nl(i,{from:e,to:t}){let s=i.state.doc.lineAt(e),r=i.state.doc.lineAt(t).to,n=Math.max(s.from,e-ur),o=Math.min(r,t+ur),E=i.state.sliceDoc(n,o);if(n!=s.from){for(let l=0;l<ur;l++)if(!dr.test(E[l+1])&&dr.test(E[l])){E=E.slice(l);break}}if(o!=r){for(let l=E.length-1;l>E.length-ur;l--)if(!dr.test(E[l-1])&&dr.test(E[l])){E=E.slice(0,l);break}}return G.announce.of(`${i.state.phrase("current match")}. ${E} ${i.state.phrase("on line")} ${s.number}.`)}const oD=G.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ED=[kt,Os.low(eD),oD];class kS{constructor(e,t,s,r){this.state=e,this.pos=t,this.explicit=s,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ue(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),s=Math.max(t.from,this.pos-250),r=t.text.slice(s-t.from,this.pos-t.from),n=r.search(XS(e,!1));return n<0?null:{from:s+n,to:this.pos,text:r.slice(n)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,s){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),s&&s.onDocChange&&(this.abortOnDocChange=!0))}}function nh(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function lD(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let n=1;n<r.length;n++)t[r[n]]=!0}let s=nh(e)+nh(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function WS(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,s]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:lD(e);return r=>{let n=r.matchBefore(s);return n||r.explicit?{from:n?n.from:r.pos,options:e,validFor:t}:null}}function aD(i,e){return t=>{for(let s=Ue(t.state).resolveInner(t.pos,-1);s;s=s.parent){if(i.indexOf(s.name)>-1)return null;if(s.type.isTop)break}return e(t)}}class oh{constructor(e,t,s,r){this.completion=e,this.source=t,this.match=s,this.score=r}}function Es(i){return i.selection.main.from}function XS(i,e){var t;let{source:s}=i,r=e&&s[0]!="^",n=s[s.length-1]!="$";return!r&&!n?i:new RegExp(`${r?"^":""}(?:${s})${n?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}const KS=Lt.define();function TD(i,e,t,s){let{main:r}=i.selection,n=t-r.from,o=s-r.from;return{...i.changeByRange(E=>{if(E!=r&&t!=s&&i.sliceDoc(E.from+n,E.from+o)!=i.sliceDoc(t,s))return{range:E};let l=i.toText(e);return{changes:{from:E.from+n,to:s==r.from?E.to:E.from+o,insert:l},range:p.cursor(E.from+n+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Eh=new WeakMap;function hD(i){if(!Array.isArray(i))return i;let e=Eh.get(i);return e||Eh.set(i,e=WS(i)),e}const an=Q.define(),gi=Q.define();class AD{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let s=ke(e,t),r=It(s);this.chars.push(s);let n=e.slice(t,t+r),o=n.toUpperCase();this.folded.push(ke(o==n?n.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:s,any:r,precise:n,byWord:o}=this;if(t.length==1){let C=ke(e,0),_=It(C),g=_==e.length?0:-100;if(C!=t[0])if(C==s[0])g+=-200;else return null;return this.ret(g,[0,_])}let E=e.indexOf(this.pattern);if(E==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,a=0;if(E<0){for(let C=0,_=Math.min(e.length,200);C<_&&a<l;){let g=ke(e,C);(g==t[a]||g==s[a])&&(r[a++]=C),C+=It(g)}if(a<l)return null}let T=0,h=0,A=!1,R=0,S=-1,c=-1,O=/[a-z]/.test(e),f=!0;for(let C=0,_=Math.min(e.length,200),g=0;C<_&&h<l;){let m=ke(e,C);E<0&&(T<l&&m==t[T]&&(n[T++]=C),R<l&&(m==t[R]||m==s[R]?(R==0&&(S=C),c=C+1,R++):R=0));let U,b=m<255?m>=48&&m<=57||m>=97&&m<=122?2:m>=65&&m<=90?1:0:(U=kE(m))!=U.toLowerCase()?1:U!=U.toUpperCase()?2:0;(!C||b==1&&O||g==0&&b!=0)&&(t[h]==m||s[h]==m&&(A=!0)?o[h++]=C:o.length&&(f=!1)),g=b,C+=It(m)}return h==l&&o[0]==0&&f?this.result(-100+(A?-200:0),o,e):R==l&&S==0?this.ret(-200-e.length+(c==e.length?0:-100),[0,c]):E>-1?this.ret(-700-e.length,[E,E+this.pattern.length]):R==l?this.ret(-900-e.length,[S,c]):h==l?this.result(-100+(A?-200:0)+-700+(f?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,s){let r=[],n=0;for(let o of t){let E=o+(this.astral?It(ke(s,o)):1);n&&r[n-1]==o?r[n-1]=E:(r[n++]=o,r[n++]=E)}return this.ret(e-s.length,r)}}class RD{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),s=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return s==null?null:(this.matched=[0,t.length],this.score=s+(e.length==this.pattern.length?0:-100),this)}}const Me=x.define({combine(i){return pt(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:SD,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>s=>lh(e(s),t(s)),optionClass:(e,t)=>s=>lh(e(s),t(s)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function lh(i,e){return i?e?i+" "+e:i:e}function SD(i,e,t,s,r,n){let o=i.textDirection==Te.RTL,E=o,l=!1,a="top",T,h,A=e.left-r.left,R=r.right-e.right,S=s.right-s.left,c=s.bottom-s.top;if(E&&A<Math.min(S,R)?E=!1:!E&&R<Math.min(S,A)&&(E=!0),S<=(E?A:R))T=Math.max(r.top,Math.min(t.top,r.bottom-c))-e.top,h=Math.min(400,E?A:R);else{l=!0,h=Math.min(400,(o?e.right:r.right-e.left)-30);let C=r.bottom-e.bottom;C>=c||C>e.top?T=t.bottom-e.top:(a="bottom",T=e.bottom-t.top)}let O=(e.bottom-e.top)/n.offsetHeight,f=(e.right-e.left)/n.offsetWidth;return{style:`${a}: ${T/O}px; max-width: ${h/f}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":E?"left":"right")}}function cD(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),t.type&&s.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(t,s,r,n){let o=document.createElement("span");o.className="cm-completionLabel";let E=t.displayLabel||t.label,l=0;for(let a=0;a<n.length;){let T=n[a++],h=n[a++];T>l&&o.appendChild(document.createTextNode(E.slice(l,T)));let A=o.appendChild(document.createElement("span"));A.appendChild(document.createTextNode(E.slice(T,h))),A.className="cm-completionMatchedText",l=h}return l<E.length&&o.appendChild(document.createTextNode(E.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=t.detail,s},position:80}),e.sort((t,s)=>t.position-s.position).map(t=>t.render)}function bo(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let s=Math.floor((i-e)/t);return{from:i-(s+1)*t,to:i-s*t}}class OD{constructor(e,t,s){this.view=e,this.stateField=t,this.applyCompletion=s,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:n,selected:o}=r.open,E=e.state.facet(Me);this.optionContent=cD(E),this.optionClass=E.optionClass,this.tooltipClass=E.tooltipClass,this.range=bo(n.length,o,E.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:a}=e.state.field(t).open;for(let T=l.target,h;T&&T!=this.dom;T=T.parentNode)if(T.nodeName=="LI"&&(h=/-(\d+)$/.exec(T.id))&&+h[1]<a.length){this.applyCompletion(e,a[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let a=e.state.field(this.stateField,!1);a&&a.tooltip&&e.state.facet(Me).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:gi.of(null)})}),this.showOptions(n,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let s=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),s!=r){let{options:n,selected:o,disabled:E}=s.open;(!r.open||r.open.options!=n)&&(this.range=bo(n.length,o,e.state.facet(Me).maxRenderedOptions),this.showOptions(n,s.id)),this.updateSel(),E!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!E)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of t.split(" "))s&&this.dom.classList.add(s);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=bo(t.options.length,t.selected,this.view.state.facet(Me).maxRenderedOptions),this.showOptions(t.options,e.id));let s=this.updateSelectedOption(t.selected);if(s){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:n}=r;if(!n)return;let o=typeof n=="string"?document.createTextNode(n):n(r);if(!o)return;"then"in o?o.then(E=>{E&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(E,r)}).catch(E=>Xe(this.view.state,E,"completion info")):(this.addInfoPane(o,r),s.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let s=this.info=document.createElement("div");if(s.className="cm-tooltip cm-completionInfo",s.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)s.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:n}=e;s.appendChild(r),this.infoDestroy=n||null}this.dom.appendChild(s),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let s=this.list.firstChild,r=this.range.from;s;s=s.nextSibling,r++)s.nodeName!="LI"||!s.id?r--:r==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),t=s):s.hasAttribute("aria-selected")&&(s.removeAttribute("aria-selected"),s.removeAttribute("aria-describedby"));return t&&ID(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),n=this.space;if(!n){let o=this.dom.ownerDocument.documentElement;n={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(n.bottom,t.bottom)-10||r.bottom<Math.max(n.top,t.top)+10?null:this.view.state.facet(Me).positionInfo(this.view,t,r,s,n,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,s){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let n=null;for(let o=s.from;o<s.to;o++){let{completion:E,match:l}=e[o],{section:a}=E;if(a){let A=typeof a=="string"?a:a.name;if(A!=n&&(o>s.from||s.from==0))if(n=A,typeof a!="string"&&a.header)r.appendChild(a.header(a));else{let R=r.appendChild(document.createElement("completion-section"));R.textContent=A}}const T=r.appendChild(document.createElement("li"));T.id=t+"-"+o,T.setAttribute("role","option");let h=this.optionClass(E);h&&(T.className=h);for(let A of this.optionContent){let R=A(E,this.view.state,this.view,l);R&&T.appendChild(R)}}return s.from&&r.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ND(i,e){return t=>new OD(t,i,e)}function ID(i,e){let t=i.getBoundingClientRect(),s=e.getBoundingClientRect(),r=t.height/i.offsetHeight;s.top<t.top?i.scrollTop-=(t.top-s.top)/r:s.bottom>t.bottom&&(i.scrollTop+=(s.bottom-t.bottom)/r)}function ah(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function fD(i,e){let t=[],s=null,r=null,n=T=>{t.push(T);let{section:h}=T.completion;if(h){s||(s=[]);let A=typeof h=="string"?h:h.name;s.some(R=>R.name==A)||s.push(typeof h=="string"?{name:A}:h)}},o=e.facet(Me);for(let T of i)if(T.hasResult()){let h=T.result.getMatch;if(T.result.filter===!1)for(let A of T.result.options)n(new oh(A,T.source,h?h(A):[],1e9-t.length));else{let A=e.sliceDoc(T.from,T.to),R,S=o.filterStrict?new RD(A):new AD(A);for(let c of T.result.options)if(R=S.match(c.label)){let O=c.displayLabel?h?h(c,R.matched):[]:R.matched,f=R.score+(c.boost||0);if(n(new oh(c,T.source,O,f)),typeof c.section=="object"&&c.section.rank==="dynamic"){let{name:C}=c.section;r||(r=Object.create(null)),r[C]=Math.max(f,r[C]||-1e9)}}}}if(s){let T=Object.create(null),h=0,A=(R,S)=>(R.rank==="dynamic"&&S.rank==="dynamic"?r[S.name]-r[R.name]:0)||(typeof R.rank=="number"?R.rank:1e9)-(typeof S.rank=="number"?S.rank:1e9)||(R.name<S.name?-1:1);for(let R of s.sort(A))h-=1e5,T[R.name]=h;for(let R of t){let{section:S}=R.completion;S&&(R.score+=T[typeof S=="string"?S:S.name])}}let E=[],l=null,a=o.compareCompletions;for(let T of t.sort((h,A)=>A.score-h.score||a(h.completion,A.completion))){let h=T.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?E.push(T):ah(T.completion)>ah(l)&&(E[E.length-1]=T),l=T.completion}return E}class Ds{constructor(e,t,s,r,n,o){this.options=e,this.attrs=t,this.tooltip=s,this.timestamp=r,this.selected=n,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ds(this.options,Th(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,s,r,n,o){if(r&&!o&&e.some(a=>a.isPending))return r.setDisabled();let E=fD(e,t);if(!E.length)return r&&e.some(a=>a.isPending)?r.setDisabled():null;let l=t.facet(Me).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let T=0;T<E.length;T++)if(E[T].completion==a){l=T;break}}return new Ds(E,Th(s,l),{pos:e.reduce((a,T)=>T.hasResult()?Math.min(a,T.from):a,1e8),create:pD,above:n.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ds(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ds(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Tn{constructor(e,t,s){this.active=e,this.id=t,this.open=s}static start(){return new Tn(_D,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,s=t.facet(Me),n=(s.override||t.languageDataAt("autocomplete",Es(t)).map(hD)).map(l=>(this.active.find(T=>T.source==l)||new tt(l,this.active.some(T=>T.state!=0)?1:0)).update(e,s));n.length==this.active.length&&n.every((l,a)=>l==this.active[a])&&(n=this.active);let o=this.open,E=e.effects.some(l=>l.is(Il));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||n.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!uD(n,this.active)||E?o=Ds.build(n,t,this.id,o,s,E):o&&o.disabled&&!n.some(l=>l.isPending)&&(o=null),!o&&n.every(l=>!l.isPending)&&n.some(l=>l.hasResult())&&(n=n.map(l=>l.hasResult()?new tt(l.source,0):l));for(let l of e.effects)l.is(JS)&&(o=o&&o.setSelected(l.value,this.id));return n==this.active&&o==this.open?this:new Tn(n,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?dD:CD}}function uD(i,e){if(i==e)return!0;for(let t=0,s=0;;){for(;t<i.length&&!i[t].hasResult();)t++;for(;s<e.length&&!e[s].hasResult();)s++;let r=t==i.length,n=s==e.length;if(r||n)return r==n;if(i[t++].result!=e[s++].result)return!1}}const dD={"aria-autocomplete":"list"},CD={};function Th(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const _D=[];function $S(i,e){if(i.isUserEvent("input.complete")){let s=i.annotation(KS);if(s&&e.activateOnCompletion(s))return 12}let t=i.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}class tt{constructor(e,t,s=!1){this.source=e,this.state=t,this.explicit=s}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let s=$S(e,t),r=this;(s&8||s&16&&this.touches(e))&&(r=new tt(r.source,0)),s&4&&r.state==0&&(r=new tt(this.source,1)),r=r.updateFor(e,s);for(let n of e.effects)if(n.is(an))r=new tt(r.source,1,n.value);else if(n.is(gi))r=new tt(r.source,0);else if(n.is(Il))for(let o of n.value)o.source==r.source&&(r=o);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Es(e.state))}}class bs extends tt{constructor(e,t,s,r,n,o){super(e,3,t),this.limit=s,this.result=r,this.from=n,this.to=o}hasResult(){return!0}updateFor(e,t){var s;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let n=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),E=Es(e.state);if(E>o||!r||t&2&&(Es(e.startState)==this.from||E<this.limit))return new tt(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return LD(r.validFor,e.state,n,o)?new bs(this.source,this.explicit,l,r,n,o):r.update&&(r=r.update(r,n,o,new kS(e.state,E,!1)))?new bs(this.source,this.explicit,l,r,r.from,(s=r.to)!==null&&s!==void 0?s:Es(e.state)):new tt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new bs(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new tt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function LD(i,e,t,s){if(!i)return!1;let r=e.sliceDoc(t,s);return typeof i=="function"?i(r,t,s,e):XS(i,!0).test(r)}const Il=Q.define({map(i,e){return i.map(t=>t.map(e))}}),JS=Q.define(),We=Ge.define({create(){return Tn.start()},update(i,e){return i.update(e)},provide:i=>[il.from(i,e=>e.tooltip),G.contentAttributes.from(i,e=>e.attrs)]});function fl(i,e){const t=e.completion.apply||e.completion.label;let s=i.state.field(We).active.find(r=>r.source==e.source);return s instanceof bs?(typeof t=="string"?i.dispatch({...TD(i.state,t,s.from,s.to),annotations:KS.of(e.completion)}):t(i,e.completion,s.from,s.to),!0):!1}const pD=ND(We,fl);function Cr(i,e="option"){return t=>{let s=t.state.field(We,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<t.state.facet(Me).interactionDelay)return!1;let r=1,n;e=="page"&&(n=mR(t,s.open.tooltip))&&(r=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:o}=s.open.options,E=s.open.selected>-1?s.open.selected+r*(i?1:-1):i?0:o-1;return E<0?E=e=="page"?0:o-1:E>=o&&(E=e=="page"?o-1:0),t.dispatch({effects:JS.of(E)}),!0}}const mD=i=>{let e=i.state.field(We,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(Me).interactionDelay?!1:fl(i,e.open.options[e.open.selected])},Bo=i=>i.state.field(We,!1)?(i.dispatch({effects:an.of(!0)}),!0):!1,DD=i=>{let e=i.state.field(We,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:gi.of(null)}),!0)};class gD{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const PD=50,MD=1e3,UD=ce.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(We).active)e.isPending&&this.startQuery(e)}update(i){let e=i.state.field(We),t=i.state.facet(Me);if(!i.selectionSet&&!i.docChanged&&i.startState.field(We)==e)return;let s=i.transactions.some(n=>{let o=$S(n,t);return o&8||(n.selection||n.docChanged)&&!(o&3)});for(let n=0;n<this.running.length;n++){let o=this.running[n];if(s||o.context.abortOnDocChange&&i.docChanged||o.updates.length+i.transactions.length>PD&&Date.now()-o.time>MD){for(let E of o.context.abortListeners)try{E()}catch(l){Xe(this.view.state,l)}o.context.abortListeners=null,this.running.splice(n--,1)}else o.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(n=>n.effects.some(o=>o.is(an)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(n=>n.isPending&&!this.running.some(o=>o.active.source==n.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let n of i.transactions)n.isUserEvent("input.type")?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(We);for(let t of e.active)t.isPending&&!this.running.some(s=>s.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Me).updateSyncTime))}startQuery(i){let{state:e}=this.view,t=Es(e),s=new kS(e,t,i.explicit,this.view),r=new gD(i,s);this.running.push(r),Promise.resolve(i.source(s)).then(n=>{r.context.aborted||(r.done=n||null,this.scheduleAccept())},n=>{this.view.dispatch({effects:gi.of(null)}),Xe(this.view.state,n)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Me).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Me),s=this.view.state.field(We);for(let r=0;r<this.running.length;r++){let n=this.running[r];if(n.done===void 0)continue;if(this.running.splice(r--,1),n.done){let E=Es(n.updates.length?n.updates[0].startState:this.view.state),l=Math.min(E,n.done.from+(n.active.explicit?0:1)),a=new bs(n.active.source,n.active.explicit,l,n.done,n.done.from,(i=n.done.to)!==null&&i!==void 0?i:E);for(let T of n.updates)a=a.update(T,t);if(a.hasResult()){e.push(a);continue}}let o=s.active.find(E=>E.source==n.active.source);if(o&&o.isPending)if(n.done==null){let E=new tt(n.active.source,0);for(let l of n.updates)E=E.update(l,t);E.isPending||e.push(E)}else this.startQuery(o)}(e.length||s.open&&s.open.disabled)&&this.view.dispatch({effects:Il.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(We,!1);if(e&&e.tooltip&&this.view.state.facet(Me).closeOnBlur){let t=e.open&&mR(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:gi.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:an.of(!1)}),20),this.composing=0}}}),bD=typeof navigator=="object"&&/Win/.test(navigator.platform),BD=Os.highest(G.domEventHandlers({keydown(i,e){let t=e.state.field(We,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||i.key.length>1||i.ctrlKey&&!(bD&&i.altKey)||i.metaKey)return!1;let s=t.open.options[t.open.selected],r=t.active.find(o=>o.source==s.source),n=s.completion.commitCharacters||r.result.commitCharacters;return n&&n.indexOf(i.key)>-1&&fl(e,s),!1}})),GD=G.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Pi={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ns=Q.define({map(i,e){let t=e.mapPos(i,-1,Ye.TrackAfter);return t??void 0}}),ul=new class extends as{};ul.startSide=1;ul.endSide=-1;const QS=Ge.define({create(){return ee.empty},update(i,e){if(i=i.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:s=>s>=t.from&&s<=t.to})}for(let t of e.effects)t.is(ns)&&(i=i.update({add:[ul.range(t.value,t.value+1)]}));return i}});function yD(){return[HD,QS]}const Go="()[]{}<>«»»«［］｛｝";function qS(i){for(let e=0;e<Go.length;e+=2)if(Go.charCodeAt(e)==i)return Go.charAt(e+1);return kE(i<128?i:i+1)}function jS(i,e){return i.languageDataAt("closeBrackets",e)[0]||Pi}const xD=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),HD=G.inputHandler.of((i,e,t,s)=>{if((xD?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(s.length>2||s.length==2&&It(ke(s,0))==1||e!=r.from||t!=r.to)return!1;let n=vD(i.state,s);return n?(i.dispatch(n),!0):!1}),FD=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let s=jS(i,i.selection.main.head).brackets||Pi.brackets,r=null,n=i.changeByRange(o=>{if(o.empty){let E=wD(i.doc,o.head);for(let l of s)if(l==E&&Dn(i.doc,o.head)==qS(ke(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:p.cursor(o.head-l.length)}}return{range:r=o}});return r||e(i.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},YD=[{key:"Backspace",run:FD}];function vD(i,e){let t=jS(i,i.selection.main.head),s=t.brackets||Pi.brackets;for(let r of s){let n=qS(ke(r,0));if(e==r)return n==r?WD(i,r,s.indexOf(r+r+r)>-1,t):VD(i,r,n,t.before||Pi.before);if(e==n&&zS(i,i.selection.main.from))return kD(i,r,n)}return null}function zS(i,e){let t=!1;return i.field(QS).between(0,i.doc.length,s=>{s==e&&(t=!0)}),t}function Dn(i,e){let t=i.sliceString(e,e+2);return t.slice(0,It(ke(t,0)))}function wD(i,e){let t=i.sliceString(e-2,e);return It(ke(t,0))==t.length?t:t.slice(1)}function VD(i,e,t,s){let r=null,n=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:ns.of(o.to+e.length),range:p.range(o.anchor+e.length,o.head+e.length)};let E=Dn(i.doc,o.head);return!E||/\s/.test(E)||s.indexOf(E)>-1?{changes:{insert:e+t,from:o.head},effects:ns.of(o.head+e.length),range:p.cursor(o.head+e.length)}:{range:r=o}});return r?null:i.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function kD(i,e,t){let s=null,r=i.changeByRange(n=>n.empty&&Dn(i.doc,n.head)==t?{changes:{from:n.head,to:n.head+t.length,insert:t},range:p.cursor(n.head+t.length)}:s={range:n});return s?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function WD(i,e,t,s){let r=s.stringPrefixes||Pi.stringPrefixes,n=null,o=i.changeByRange(E=>{if(!E.empty)return{changes:[{insert:e,from:E.from},{insert:e,from:E.to}],effects:ns.of(E.to+e.length),range:p.range(E.anchor+e.length,E.head+e.length)};let l=E.head,a=Dn(i.doc,l),T;if(a==e){if(hh(i,l))return{changes:{insert:e+e,from:l},effects:ns.of(l+e.length),range:p.cursor(l+e.length)};if(zS(i,l)){let A=t&&i.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+A.length,insert:A},range:p.cursor(l+A.length)}}}else{if(t&&i.sliceDoc(l-2*e.length,l)==e+e&&(T=Ah(i,l-2*e.length,r))>-1&&hh(i,T))return{changes:{insert:e+e+e+e,from:l},effects:ns.of(l+e.length),range:p.cursor(l+e.length)};if(i.charCategorizer(l)(a)!=he.Word&&Ah(i,l,r)>-1&&!XD(i,l,e,r))return{changes:{insert:e+e,from:l},effects:ns.of(l+e.length),range:p.cursor(l+e.length)}}return{range:n=E}});return n?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function hh(i,e){let t=Ue(i).resolveInner(e+1);return t.parent&&t.from==e}function XD(i,e,t,s){let r=Ue(i).resolveInner(e,-1),n=s.reduce((o,E)=>Math.max(o,E.length),0);for(let o=0;o<5;o++){let E=i.sliceDoc(r.from,Math.min(r.to,r.from+t.length+n)),l=E.indexOf(t);if(!l||l>-1&&s.indexOf(E.slice(0,l))>-1){let T=r.firstChild;for(;T&&T.from==r.from&&T.to-T.from>t.length+l;){if(i.sliceDoc(T.to-t.length,T.to)==t)return!1;T=T.firstChild}return!0}let a=r.to==e&&r.parent;if(!a)break;r=a}return!1}function Ah(i,e,t){let s=i.charCategorizer(e);if(s(i.sliceDoc(e-1,e))!=he.Word)return e;for(let r of t){let n=e-r.length;if(i.sliceDoc(n,e)==r&&s(i.sliceDoc(n-1,n))!=he.Word)return n}return-1}function ZS(i={}){return[BD,We,Me.of(i),UD,KD,GD]}const ec=[{key:"Ctrl-Space",run:Bo},{mac:"Alt-`",run:Bo},{mac:"Alt-i",run:Bo},{key:"Escape",run:DD},{key:"ArrowDown",run:Cr(!0)},{key:"ArrowUp",run:Cr(!1)},{key:"PageDown",run:Cr(!0,"page")},{key:"PageUp",run:Cr(!1,"page")},{key:"Enter",run:mD}],KD=Os.highest(Fi.computeN([Me],i=>i.facet(Me).defaultKeymap?[ec]:[]));class Rh{constructor(e,t,s){this.from=e,this.to=t,this.diagnostic=s}}class is{constructor(e,t,s){this.diagnostics=e,this.panel=t,this.selected=s}static init(e,t,s){let r=s.facet(Mi).markerFilter;r&&(e=r(e,s));let n=e.slice().sort((R,S)=>R.from-S.from||R.to-S.to),o=new bt,E=[],l=0,a=s.doc.iter(),T=0,h=s.doc.length;for(let R=0;;){let S=R==n.length?null:n[R];if(!S&&!E.length)break;let c,O;if(E.length)c=l,O=E.reduce((_,g)=>Math.min(_,g.to),S&&S.from>c?S.from:1e8);else{if(c=S.from,c>h)break;O=S.to,E.push(S),R++}for(;R<n.length;){let _=n[R];if(_.from==c&&(_.to>_.from||_.to==c))E.push(_),R++,O=Math.min(_.to,O);else{O=Math.min(_.from,O);break}}O=Math.min(O,h);let f=!1;if(E.some(_=>_.from==c&&(_.to==O||O==h))&&(f=c==O,!f&&O-c<10)){let _=c-(T+a.value.length);_>0&&(a.next(_),T=c);for(let g=c;;){if(g>=O){f=!0;break}if(!a.lineBreak&&T+a.value.length>g)break;g=T+a.value.length,T+=a.value.length,a.next()}}let C=ng(E);if(f)o.add(c,c,V.widget({widget:new tg(C),diagnostics:E.slice()}));else{let _=E.reduce((g,m)=>m.markClass?g+" "+m.markClass:g,"");o.add(c,O,V.mark({class:"cm-lintRange cm-lintRange-"+C+_,diagnostics:E.slice(),inclusiveEnd:E.some(g=>g.to>O)}))}if(l=O,l==h)break;for(let _=0;_<E.length;_++)E[_].to<=l&&E.splice(_--,1)}let A=o.finish();return new is(A,t,Vs(A))}}function Vs(i,e=null,t=0){let s=null;return i.between(t,1e9,(r,n,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!s)s=new Rh(r,n,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(s.diagnostic)<0)return!1;s=new Rh(s.from,n,s.diagnostic)}}),s}function $D(i,e){let t=e.pos,s=e.end||t,r=i.state.facet(Mi).hideOn(i,t,s);if(r!=null)return r;let n=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(o=>o.is(tc))||i.changes.touchesRange(n.from,Math.max(n.to,s)))}function JD(i,e){return i.field(ze,!1)?e:e.concat(Q.appendConfig.of(og))}const tc=Q.define(),dl=Q.define(),sc=Q.define(),ze=Ge.define({create(){return new is(V.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let t=i.diagnostics.map(e.changes),s=null,r=i.panel;if(i.selected){let n=e.changes.mapPos(i.selected.from,1);s=Vs(t,i.selected.diagnostic,n)||Vs(t,null,n)}!t.size&&r&&e.state.facet(Mi).autoPanel&&(r=null),i=new is(t,r,s)}for(let t of e.effects)if(t.is(tc)){let s=e.state.facet(Mi).autoPanel?t.value.length?Ui.open:null:i.panel;i=is.init(t.value,s,e.state)}else t.is(dl)?i=new is(i.diagnostics,t.value?Ui.open:null,i.selected):t.is(sc)&&(i=new is(i.diagnostics,i.panel,t.value));return i},provide:i=>[_i.from(i,e=>e.panel),G.decorations.from(i,e=>e.diagnostics)]}),QD=V.mark({class:"cm-lintRange cm-lintRange-active"});function qD(i,e,t){let{diagnostics:s}=i.state.field(ze),r,n=-1,o=-1;s.between(e-(t<0?1:0),e+(t>0?1:0),(l,a,{spec:T})=>{if(e>=l&&e<=a&&(l==a||(e>l||t>0)&&(e<a||t<0)))return r=T.diagnostics,n=l,o=a,!1});let E=i.state.facet(Mi).tooltipFilter;return r&&E&&(r=E(r,i.state)),r?{pos:n,end:o,above:i.state.doc.lineAt(n).to<o,create(){return{dom:jD(i,r)}}}:null}function jD(i,e){return oe("ul",{class:"cm-tooltip-lint"},e.map(t=>rc(i,t,!1)))}const zD=i=>{let e=i.state.field(ze,!1);(!e||!e.panel)&&i.dispatch({effects:JD(i.state,[dl.of(!0)])});let t=Ci(i,Ui.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Sh=i=>{let e=i.state.field(ze,!1);return!e||!e.panel?!1:(i.dispatch({effects:dl.of(!1)}),!0)},ZD=i=>{let e=i.state.field(ze,!1);if(!e)return!1;let t=i.state.selection.main,s=e.diagnostics.iter(t.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==t.from&&s.to==t.to)?!1:(i.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},eg=[{key:"Mod-Shift-m",run:zD,preventDefault:!0},{key:"F8",run:ZD}],Mi=x.define({combine(i){return{sources:i.map(e=>e.source).filter(e=>e!=null),...pt(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:ch,tooltipFilter:ch,needsRefresh:(e,t)=>e?t?s=>e(s)||t(s):e:t,hideOn:(e,t)=>e?t?(s,r,n)=>e(s,r,n)||t(s,r,n):e:t,autoPanel:(e,t)=>e||t})}}});function ch(i,e){return i?e?(t,s)=>e(i(t,s),s):i:e}function ic(i){let e=[];if(i)e:for(let{name:t}of i){for(let s=0;s<t.length;s++){let r=t[s];if(/[a-zA-Z]/.test(r)&&!e.some(n=>n.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function rc(i,e,t){var s;let r=t?ic(e.actions):[];return oe("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},oe("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(s=e.actions)===null||s===void 0?void 0:s.map((n,o)=>{let E=!1,l=R=>{if(R.preventDefault(),E)return;E=!0;let S=Vs(i.state.field(ze).diagnostics,e);S&&n.apply(i,S.from,S.to)},{name:a}=n,T=r[o]?a.indexOf(r[o]):-1,h=T<0?a:[a.slice(0,T),oe("u",a.slice(T,T+1)),a.slice(T+1)],A=n.markClass?" "+n.markClass:"";return oe("button",{type:"button",class:"cm-diagnosticAction"+A,onclick:l,onmousedown:l,"aria-label":` Action: ${a}${T<0?"":` (access key "${r[o]})"`}.`},h)}),e.source&&oe("div",{class:"cm-diagnosticSource"},e.source))}class tg extends yt{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return oe("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Oh{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=rc(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ui{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Sh(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:n}=this.items[this.selectedIndex],o=ic(n.actions);for(let E=0;E<o.length;E++)if(o[E].toUpperCase().charCodeAt(0)==r.keyCode){let l=Vs(this.view.state.field(ze).diagnostics,n);l&&n.actions[E].apply(e,l.from,l.to)}}else return;r.preventDefault()},s=r=>{for(let n=0;n<this.items.length;n++)this.items[n].dom.contains(r.target)&&this.moveSelection(n)};this.list=oe("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:s}),this.dom=oe("div",{class:"cm-panel-lint"},this.list,oe("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Sh(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ze).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ze),s=0,r=!1,n=null,o=new Set;for(e.between(0,this.view.state.doc.length,(E,l,{spec:a})=>{for(let T of a.diagnostics){if(o.has(T))continue;o.add(T);let h=-1,A;for(let R=s;R<this.items.length;R++)if(this.items[R].diagnostic==T){h=R;break}h<0?(A=new Oh(this.view,T),this.items.splice(s,0,A),r=!0):(A=this.items[h],h>s&&(this.items.splice(s,h-s),r=!0)),t&&A.diagnostic==t.diagnostic?A.dom.hasAttribute("aria-selected")||(A.dom.setAttribute("aria-selected","true"),n=A):A.dom.hasAttribute("aria-selected")&&A.dom.removeAttribute("aria-selected"),s++}});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Oh(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:E,panel:l})=>{let a=l.height/this.list.offsetHeight;E.top<l.top?this.list.scrollTop-=(l.top-E.top)/a:E.bottom>l.bottom&&(this.list.scrollTop+=(E.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)t();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ze),s=Vs(t.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:sc.of(s)})}static open(e){return new Ui(e)}}function sg(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function _r(i){return sg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ig=G.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_r("#d11")},".cm-lintRange-warning":{backgroundImage:_r("orange")},".cm-lintRange-info":{backgroundImage:_r("#999")},".cm-lintRange-hint":{backgroundImage:_r("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function rg(i){return i=="error"?4:i=="warning"?3:i=="info"?2:1}function ng(i){let e="hint",t=1;for(let s of i){let r=rg(s.severity);r>t&&(t=r,e=s.severity)}return e}const og=[ze,G.decorations.compute([ze],i=>{let{selected:e,panel:t}=i.field(ze);return!e||!t||e.from==e.to?V.none:V.set([QD.range(e.from,e.to)])}),tL(qD,{hideOn:$D}),ig];var Nh=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,s=[];e.closeBracketsKeymap!==!1&&(s=s.concat(YD)),e.defaultKeymap!==!1&&(s=s.concat(BS)),e.searchKeymap!==!1&&(s=s.concat(rD)),e.historyKeymap!==!1&&(s=s.concat(nS)),e.foldKeymap!==!1&&(s=s.concat(tp)),e.completionKeymap!==!1&&(s=s.concat(ec)),e.lintKeymap!==!1&&(s=s.concat(eg));var r=[];return e.lineNumbers!==!1&&r.push(AL()),e.highlightActiveLineGutter!==!1&&r.push(cL()),e.highlightSpecialChars!==!1&&r.push(M_()),e.history!==!1&&r.push(bp()),e.foldGutter!==!1&&r.push(np()),e.drawSelection!==!1&&r.push(f_()),e.dropCursor!==!1&&r.push(L_()),e.allowMultipleSelections!==!1&&r.push(z.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(KL()),e.syntaxHighlighting!==!1&&r.push(Tl(ap,{fallback:!0})),e.bracketMatching!==!1&&r.push(Op()),e.closeBrackets!==!1&&r.push(yD()),e.autocompletion!==!1&&r.push(ZS()),e.rectangularSelection!==!1&&r.push(W_()),t!==!1&&r.push($_()),e.highlightActiveLine!==!1&&r.push(x_()),e.highlightSelectionMatches!==!1&&r.push(Ym()),e.tabSize&&typeof e.tabSize=="number"&&r.push(un.of(" ".repeat(e.tabSize))),r.concat([Fi.of(s.flat())]).filter(Boolean)};const Eg="#e5c07b",Ih="#e06c75",lg="#56b6c2",ag="#ffffff",Fr="#abb2bf",HE="#7d8799",Tg="#61afef",hg="#98c379",fh="#d19a66",Ag="#c678dd",Rg="#21252b",uh="#2c313a",dh="#282c34",yo="#353a42",Sg="#3E4451",Ch="#528bff",cg=G.theme({"&":{color:Fr,backgroundColor:dh},".cm-content":{caretColor:Ch},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ch},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Sg},".cm-panels":{backgroundColor:Rg,color:Fr},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:dh,color:HE,border:"none"},".cm-activeLineGutter":{backgroundColor:uh},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:yo},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:yo,borderBottomColor:yo},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:uh,color:Fr}}},{dark:!0}),Og=Xs.define([{tag:u.keyword,color:Ag},{tag:[u.name,u.deleted,u.character,u.propertyName,u.macroName],color:Ih},{tag:[u.function(u.variableName),u.labelName],color:Tg},{tag:[u.color,u.constant(u.name),u.standard(u.name)],color:fh},{tag:[u.definition(u.name),u.separator],color:Fr},{tag:[u.typeName,u.className,u.number,u.changed,u.annotation,u.modifier,u.self,u.namespace],color:Eg},{tag:[u.operator,u.operatorKeyword,u.url,u.escape,u.regexp,u.link,u.special(u.string)],color:lg},{tag:[u.meta,u.comment],color:HE},{tag:u.strong,fontWeight:"bold"},{tag:u.emphasis,fontStyle:"italic"},{tag:u.strikethrough,textDecoration:"line-through"},{tag:u.link,color:HE,textDecoration:"underline"},{tag:u.heading,fontWeight:"bold",color:Ih},{tag:[u.atom,u.bool,u.special(u.variableName)],color:fh},{tag:[u.processingInstruction,u.string,u.inserted],color:hg},{tag:u.invalid,color:ag}]),Ng=[cg,Tl(Og)];var Ig=G.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),fg=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:s=!0,readOnly:r=!1,theme:n="light",placeholder:o="",basicSetup:E=!0}=e,l=[];switch(t&&l.unshift(Fi.of([Bm])),E&&(typeof E=="boolean"?l.unshift(Nh()):l.unshift(Nh(E))),o&&l.unshift(v_(o)),n){case"light":l.push(Ig);break;case"dark":l.push(Ng);break;case"none":break;default:l.push(n);break}return s===!1&&l.push(G.editable.of(!1)),r&&l.push(z.readOnly.of(!0)),[...l]},ug=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(e=>i.state.sliceDoc(e.from,e.to)),selectedText:i.state.selection.ranges.some(e=>!e.empty)});class dg{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(t=>{try{t()}catch(s){console.error("TimeoutLatch callback error:",s)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class _h{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var xo=null,Cg=()=>typeof window>"u"?new _h:(xo||(xo=new _h),xo),Lh=Lt.define(),_g=200,Lg=[];function pg(i){var{value:e,selection:t,onChange:s,onStatistics:r,onCreateEditor:n,onUpdate:o,extensions:E=Lg,autoFocus:l,theme:a="light",height:T=null,minHeight:h=null,maxHeight:A=null,width:R=null,minWidth:S=null,maxWidth:c=null,placeholder:O="",editable:f=!0,readOnly:C=!1,indentWithTab:_=!0,basicSetup:g=!0,root:m,initialState:U}=i,[b,W]=F.useState(),[v,q]=F.useState(),[X,w]=F.useState(),K=F.useState(()=>({current:null}))[0],$=F.useState(()=>({current:null}))[0],Z=G.theme({"&":{height:T,minHeight:h,maxHeight:A,width:R,minWidth:S,maxWidth:c},"& .cm-scroller":{height:"100% !important"}}),Re=G.updateListener.of(se=>{if(se.docChanged&&typeof s=="function"&&!se.transactions.some(pe=>pe.annotation(Lh))){K.current?K.current.reset():(K.current=new dg(()=>{if($.current){var pe=$.current;$.current=null,pe()}K.current=null},_g),Cg().add(K.current));var Ae=se.state.doc,ue=Ae.toString();s(ue,se)}r&&r(ug(se))}),ne=fg({theme:a,editable:f,readOnly:C,placeholder:O,indentWithTab:_,basicSetup:g}),fe=[Re,Z,...ne];return o&&typeof o=="function"&&fe.push(G.updateListener.of(o)),fe=fe.concat(E),F.useLayoutEffect(()=>{if(b&&!X){var se={doc:e,selection:t,extensions:fe},Ae=U?z.fromJSON(U.json,se,U.fields):z.create(se);if(w(Ae),!v){var ue=new G({state:Ae,parent:b,root:m});q(ue),n&&n(ue,Ae)}}return()=>{v&&(w(void 0),q(void 0))}},[b,X]),F.useEffect(()=>{i.container&&W(i.container)},[i.container]),F.useEffect(()=>()=>{v&&(v.destroy(),q(void 0)),K.current&&(K.current.cancel(),K.current=null)},[v]),F.useEffect(()=>{l&&v&&v.focus()},[l,v]),F.useEffect(()=>{v&&v.dispatch({effects:Q.reconfigure.of(fe)})},[a,E,T,h,A,R,S,c,O,f,C,_,g,s,o]),F.useEffect(()=>{if(e!==void 0){var se=v?v.state.doc.toString():"";if(v&&e!==se){var Ae=K.current&&!K.current.isDone,ue=()=>{v&&e!==v.state.doc.toString()&&v.dispatch({changes:{from:0,to:v.state.doc.toString().length,insert:e||""},annotations:[Lh.of(!0)]})};Ae?$.current=ue:ue()}}},[e,v]),{state:X,setState:w,view:v,setView:q,container:b,setContainer:W}}var mg=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],nc=F.forwardRef((i,e)=>{var{className:t,value:s="",selection:r,extensions:n=[],onChange:o,onStatistics:E,onCreateEditor:l,onUpdate:a,autoFocus:T,theme:h="light",height:A,minHeight:R,maxHeight:S,width:c,minWidth:O,maxWidth:f,basicSetup:C,placeholder:_,indentWithTab:g,editable:m,readOnly:U,root:b,initialState:W}=i,v=tO(i,mg),q=F.useRef(null),{state:X,view:w,container:K,setContainer:$}=pg({root:b,value:s,autoFocus:T,theme:h,height:A,minHeight:R,maxHeight:S,width:c,minWidth:O,maxWidth:f,basicSetup:C,placeholder:_,indentWithTab:g,editable:m,readOnly:U,selection:r,onChange:o,onStatistics:E,onCreateEditor:l,onUpdate:a,extensions:n,initialState:W});F.useImperativeHandle(e,()=>({editor:q.current,state:X,view:w}),[q,K,X,w]);var Z=F.useCallback(ne=>{q.current=ne,$(ne)},[$]);if(typeof s!="string")throw new Error("value must be typeof string but got "+typeof s);var Re=typeof h=="string"?"cm-theme-"+h:"cm-theme";return N.jsx("div",sO({ref:Z,className:""+Re+(t?" "+t:"")},v))});nc.displayName="CodeMirror";var ph={};class hn{constructor(e,t,s,r,n,o,E,l,a,T=0,h){this.p=e,this.stack=t,this.state=s,this.reducePos=r,this.pos=n,this.score=o,this.buffer=E,this.bufferBase=l,this.curContext=a,this.lookAhead=T,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,s=0){let r=e.parser.context;return new hn(e,[],t,s,s,0,[],0,r?new mh(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let s=e>>19,r=e&65535,{parser:n}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),E=n.dynamicPrecedence(r);if(E&&(this.score+=E),s==0){this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(s-1)*3-(e&262144?6:0),a=l?this.stack[l-2]:this.p.ranges[0].from,T=this.reducePos-a;T>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=T):this.p.lastBigReductionSize<T&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=T));let h=l?this.stack[l-1]:0,A=this.bufferBase+this.buffer.length-h;if(r<n.minRepeatTerm||e&131072){let R=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,R,A+4,!0)}if(e&262144)this.state=this.stack[l];else{let R=this.stack[l-3];this.state=n.getGoto(R,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,s,r=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,E=this.buffer.length;if(E==0&&o.parent&&(E=o.bufferBase-o.parent.bufferBase,o=o.parent),E>0&&o.buffer[E-4]==0&&o.buffer[E-1]>-1){if(t==s)return;if(o.buffer[E-2]>=t){o.buffer[E-2]=s;return}}}if(!n||this.pos==s)this.buffer.push(e,t,s,r);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let E=!1;for(let l=o;l>0&&this.buffer[l-2]>s;l-=4)if(this.buffer[l-1]>=0){E=!0;break}if(E)for(;o>0&&this.buffer[o-2]>s;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=s,this.buffer[o+3]=r}}shift(e,t,s,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,s),this.shiftContext(t,s),t<=o.maxNode&&this.buffer.push(t,s,r,4)}else this.pos=r,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,r,4)}apply(e,t,s,r){e&65536?this.reduce(e):this.shift(e,t,s,r)}useNode(e,t){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=e)&&(this.p.reused.push(e),s++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(s,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let s=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new hn(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let s=e<=this.p.parser.maxNode;s&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,s?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Dg(this);;){let s=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(s==0)return!1;if((s&65536)==0)return!0;t.reduce(s)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n=0,o;n<t.length;n+=2)(o=t[n+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[n],o);if(this.stack.length<120)for(let n=0;r.length<8&&n<t.length;n+=2){let o=t[n+1];r.some((E,l)=>l&1&&E==o)||r.push(t[n],o)}t=r}let s=[];for(let r=0;r<t.length&&s.length<4;r+=2){let n=t[r+1];if(n==this.state)continue;let o=this.split();o.pushState(n,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,s.push(o)}return s}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let s=t>>19,r=t&65535,n=this.stack.length-s*3;if(n<0||e.getGoto(this.stack[n],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],s=(r,n)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let E=(o>>19)-n;if(E>1){let l=o&65535,a=this.stack.length-E*3;if(a>=0&&e.getGoto(this.stack[a],l,!1)>=0)return E<<19|65536|l}}else{let E=s(o,n+1);if(E!=null)return E}})};return s(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new mh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class mh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Dg{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,s=e>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class An{constructor(e,t,s){this.stack=e,this.pos=t,this.index=s,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new An(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new An(this.stack,this.pos,this.index)}}function Lr(i,e=Uint16Array){if(typeof i!="string")return i;let t=null;for(let s=0,r=0;s<i.length;){let n=0;for(;;){let o=i.charCodeAt(s++),E=!1;if(o==126){n=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,E=!0),n+=l,E)break;n*=46}t?t[r++]=n:t=new e(n)}return t}class Yr{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Dh=new Yr;class gg{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Dh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let s=this.range,r=this.rangeIndex,n=this.pos+e;for(;n<s.from;){if(!r)return null;let o=this.ranges[--r];n-=s.from-o.to,s=o}for(;t<0?n>s.to:n>=s.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];n+=o.from-s.to,s=o}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,s,r;if(t>=0&&t<this.chunk.length)s=this.pos+e,r=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(s=n,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let o=this.rangeIndex,E=this.range;for(;E.to<=s;)E=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>E.to&&(this.chunk2=this.chunk2.slice(0,E.to-s)),r=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),r}acceptToken(e,t=0){let s=t?this.resolveOffset(t,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=s}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Dh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let s="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(s+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return s}}class Bs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:s}=t.p;Mg(this.data,e,t,this.id,s.data,s.tokenPrecTable)}}Bs.prototype.contextual=Bs.prototype.fallback=Bs.prototype.extend=!1;Bs.prototype.fallback=Bs.prototype.extend=!1;class Pg{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Mg(i,e,t,s,r,n){let o=0,E=1<<s,{dialect:l}=t.p.parser;e:for(;(E&i[o])!=0;){let a=i[o+1];for(let R=o+3;R<a;R+=2)if((i[R+1]&E)>0){let S=i[R];if(l.allows(S)&&(e.token.value==-1||e.token.value==S||Ug(S,e.token.value,r,n))){e.acceptToken(S);break}}let T=e.next,h=0,A=i[o+2];if(e.next<0&&A>h&&i[a+A*3-3]==65535){o=i[a+A*3-1];continue e}for(;h<A;){let R=h+A>>1,S=a+R+(R<<1),c=i[S],O=i[S+1]||65536;if(T<c)A=R;else if(T>=O)h=R+1;else{o=i[S+2],e.advance();continue e}}break}}function gh(i,e,t){for(let s=e,r;(r=i[s])!=65535;s++)if(r==t)return s-e;return-1}function Ug(i,e,t,s){let r=gh(t,s,e);return r<0||gh(t,s,i)<r}const qe=typeof iO<"u"&&ph&&/\bparse\b/.test(ph.LOG);let Ho=null;function Ph(i,e,t){let s=i.cursor(Pe.IncludeAnonymous);for(s.moveTo(e);;)if(!(t<0?s.childBefore(e):s.childAfter(e)))for(;;){if((t<0?s.to<e:s.from>e)&&!s.type.isError)return t<0?Math.max(0,Math.min(s.to-1,e-25)):Math.min(i.length,Math.max(s.from+1,e+25));if(t<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return t<0?0:i.length}}class bg{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Ph(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Ph(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let s=this.trees[t],r=this.index[t];if(r==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=s.children[r],o=this.start[t]+s.positions[r];if(o>e)return this.nextStart=o,null;if(n instanceof Ie){if(o==e){if(o<this.safeFrom)return null;let E=o+n.length;if(E<=this.safeTo){let l=n.prop(j.lookAhead);if(!l||E+l<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class Bg{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(s=>new Yr)}getActions(e){let t=0,s=null,{parser:r}=e.p,{tokenizers:n}=r,o=r.stateSlot(e.state,3),E=e.curContext?e.curContext.hash:0,l=0;for(let a=0;a<n.length;a++){if((1<<a&o)==0)continue;let T=n[a],h=this.tokens[a];if(!(s&&!T.fallback)&&((T.contextual||h.start!=e.pos||h.mask!=o||h.context!=E)&&(this.updateCachedToken(h,T,e),h.mask=o,h.context=E),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let A=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!T.extend&&(s=h,t>A))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!s&&e.pos==this.stream.end&&(s=new Yr,s.value=e.p.parser.eofTerm,s.start=s.end=e.pos,t=this.addActions(e,s.value,s.end,t)),this.mainToken=s,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Yr,{pos:s,p:r}=e;return t.start=s,t.end=Math.min(s+1,r.stream.end),t.value=s==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,s){let r=this.stream.clipPos(s.pos);if(t.token(this.stream.reset(r,e),s),e.value>-1){let{parser:n}=s.p;for(let o=0;o<n.specialized.length;o++)if(n.specialized[o]==e.value){let E=n.specializers[o](this.stream.read(e.start,e.end),s);if(E>=0&&s.p.parser.dialect.allows(E>>1)){(E&1)==0?e.value=E>>1:e.extended=E>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,s,r){for(let n=0;n<r;n+=3)if(this.actions[n]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=s,r}addActions(e,t,s,r){let{state:n}=e,{parser:o}=e.p,{data:E}=o;for(let l=0;l<2;l++)for(let a=o.stateSlot(n,l?2:1);;a+=3){if(E[a]==65535)if(E[a+1]==1)a=gt(E,a+2);else{r==0&&E[a+1]==2&&(r=this.putAction(gt(E,a+2),t,s,r));break}E[a]==t&&(r=this.putAction(gt(E,a+1),t,s,r))}return r}}class Gg{constructor(e,t,s,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new gg(t,r),this.tokens=new Bg(e,this.stream),this.topTerm=e.top[1];let{from:n}=r[0];this.stacks=[hn.start(this,e.top[0],n)],this.fragments=s.length&&this.stream.end-n>e.bufferLength*4?new bg(s,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,s=this.stacks=[],r,n;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let E=e[o];for(;;){if(this.tokens.mainToken=null,E.pos>t)s.push(E);else{if(this.advanceStack(E,s,e))continue;{r||(r=[],n=[]),r.push(E);let l=this.tokens.getMainToken(E);n.push(l.value,l.end)}}break}}if(!s.length){let o=r&&xg(r);if(o)return qe&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw qe&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,n,s);if(o)return qe&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(s.length>o)for(s.sort((E,l)=>l.score-E.score);s.length>o;)s.pop();s.some(E=>E.reducePos>t)&&this.recovering--}else if(s.length>1){e:for(let o=0;o<s.length-1;o++){let E=s[o];for(let l=o+1;l<s.length;l++){let a=s[l];if(E.sameState(a)||E.buffer.length>500&&a.buffer.length>500)if((E.score-a.score||E.buffer.length-a.buffer.length)>0)s.splice(l--,1);else{s.splice(o--,1);continue e}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let o=1;o<s.length;o++)s[o].pos<this.minStackPos&&(this.minStackPos=s[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,s){let r=e.pos,{parser:n}=this,o=qe?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let a=e.curContext&&e.curContext.tracker.strict,T=a?e.curContext.hash:0;for(let h=this.fragments.nodeAt(r);h;){let A=this.parser.nodeSet.types[h.type.id]==h.type?n.getGoto(e.state,h.type.id):-1;if(A>-1&&h.length&&(!a||(h.prop(j.contextHash)||0)==T))return e.useNode(h,A),qe&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(h.type.id)})`),!0;if(!(h instanceof Ie)||h.children.length==0||h.positions[0]>0)break;let R=h.children[0];if(R instanceof Ie&&h.positions[0]==0)h=R;else break}}let E=n.stateSlot(e.state,4);if(E>0)return e.reduce(E),qe&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(E&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let a=0;a<l.length;){let T=l[a++],h=l[a++],A=l[a++],R=a==l.length||!s,S=R?e:e.split(),c=this.tokens.mainToken;if(S.apply(T,h,c?c.start:S.pos,A),qe&&console.log(o+this.stackID(S)+` (via ${(T&65536)==0?"shift":`reduce of ${n.getName(T&65535)}`} for ${n.getName(h)} @ ${r}${S==e?"":", split"})`),R)return!0;S.pos>r?t.push(S):s.push(S)}return!1}advanceFully(e,t){let s=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>s)return Mh(e,t),!0}}runRecovery(e,t,s){let r=null,n=!1;for(let o=0;o<e.length;o++){let E=e[o],l=t[o<<1],a=t[(o<<1)+1],T=qe?this.stackID(E)+" -> ":"";if(E.deadEnd&&(n||(n=!0,E.restart(),qe&&console.log(T+this.stackID(E)+" (restarted)"),this.advanceFully(E,s))))continue;let h=E.split(),A=T;for(let R=0;R<10&&h.forceReduce()&&(qe&&console.log(A+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,s));R++)qe&&(A=this.stackID(h)+" -> ");for(let R of E.recoverByInsert(l))qe&&console.log(T+this.stackID(R)+" (via recover-insert)"),this.advanceFully(R,s);this.stream.end>E.pos?(a==E.pos&&(a++,l=0),E.recoverByDelete(l,a),qe&&console.log(T+this.stackID(E)+` (via recover-delete ${this.parser.getName(l)})`),Mh(E,s)):(!r||r.score<E.score)&&(r=E)}return r}stackToTree(e){return e.close(),Ie.build({buffer:An.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Ho||(Ho=new WeakMap)).get(e);return t||Ho.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Mh(i,e){for(let t=0;t<e.length;t++){let s=e[t];if(s.pos==i.pos&&s.sameState(i)){e[t].score<i.score&&(e[t]=i);return}}e.push(i)}class yg{constructor(e,t,s){this.source=e,this.flags=t,this.disabled=s}allows(e){return!this.disabled||this.disabled[e]==0}}class Rn extends GR{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let E=0;E<e.repeatNodeCount;E++)t.push("");let s=Object.keys(e.topRules).map(E=>e.topRules[E][1]),r=[];for(let E=0;E<t.length;E++)r.push([]);function n(E,l,a){r[E].push([l,l.deserialize(String(a))])}if(e.nodeProps)for(let E of e.nodeProps){let l=E[0];typeof l=="string"&&(l=j[l]);for(let a=1;a<E.length;){let T=E[a++];if(T>=0)n(T,l,E[a++]);else{let h=E[a+-T];for(let A=-T;A>0;A--)n(E[a++],l,h);a++}}}this.nodeSet=new rl(t.map((E,l)=>$e.define({name:l>=this.minRepeatTerm?void 0:E,id:l,props:r[l],top:s.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=MR;let o=Lr(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let E=0;E<this.specializerSpecs.length;E++)this.specialized[E]=this.specializerSpecs[E].term;this.specializers=this.specializerSpecs.map(Uh),this.states=Lr(e.states,Uint32Array),this.data=Lr(e.stateData),this.goto=Lr(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(E=>typeof E=="number"?new Bs(o,E):E),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,s){let r=new Gg(this,e,t,s);for(let n of this.wrappers)r=n(r,e,t,s);return r}getGoto(e,t,s=!1){let r=this.goto;if(t>=r[0])return-1;for(let n=r[t+1];;){let o=r[n++],E=o&1,l=r[n++];if(E&&s)return l;for(let a=n+(o>>1);n<a;n++)if(r[n]==e)return l;if(E)return-1}}hasAction(e,t){let s=this.data;for(let r=0;r<2;r++)for(let n=this.stateSlot(e,r?2:1),o;;n+=3){if((o=s[n])==65535)if(s[n+1]==1)o=s[n=gt(s,n+2)];else{if(s[n+1]==2)return gt(s,n+2);break}if(o==t||o==0)return gt(s,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,s=>s==t?!0:null)}allActions(e,t){let s=this.stateSlot(e,4),r=s?t(s):void 0;for(let n=this.stateSlot(e,1);r==null;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=gt(this.data,n+2);else break;r=t(gt(this.data,n+1))}return r}nextStates(e){let t=[];for(let s=this.stateSlot(e,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=gt(this.data,s+2);else break;if((this.data[s+2]&1)==0){let r=this.data[s+1];t.some((n,o)=>o&1&&n==r)||t.push(this.data[s],r)}}return t}configure(e){let t=Object.assign(Object.create(Rn.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let s=this.topRules[e.top];if(!s)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=s}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(s=>{let r=e.tokenizers.find(n=>n.from==s);return r?r.to:s})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((s,r)=>{let n=e.specializers.find(E=>E.from==s.external);if(!n)return s;let o=Object.assign(Object.assign({},s),{external:n.to});return t.specializers[r]=Uh(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),s=t.map(()=>!1);if(e)for(let n of e.split(" ")){let o=t.indexOf(n);o>=0&&(s[o]=!0)}let r=null;for(let n=0;n<t.length;n++)if(!s[n])for(let o=this.dialects[t[n]],E;(E=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[E]=1;return new yg(e,s,r)}static deserialize(e){return new Rn(e)}}function gt(i,e){return i[e]|i[e+1]<<16}function xg(i){let e=null;for(let t of i){let s=t.p.stoppedAt;(t.pos==t.p.stream.end||s!=null&&t.pos>s)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Uh(i){if(i.external){let e=i.extend?1:0;return(t,s)=>i.external(t,s)<<1|e}return i.get}const Hg=36,bh=1,Fg=2,ds=3,Fo=4,Yg=5,vg=6,wg=7,Vg=8,kg=9,Wg=10,Xg=11,Kg=12,$g=13,Jg=14,Qg=15,qg=16,jg=17,Bh=18,zg=19,oc=20,Ec=21,Gh=22,Zg=23,eP=24;function FE(i){return i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57}function tP(i){return i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70}function ts(i,e,t){for(let s=!1;;){if(i.next<0)return;if(i.next==e&&!s){i.advance();return}s=t&&!s&&i.next==92,i.advance()}}function sP(i,e){e:for(;;){if(i.next<0)return;if(i.next==36){i.advance();for(let t=0;t<e.length;t++){if(i.next!=e.charCodeAt(t))continue e;i.advance()}if(i.next==36){i.advance();return}}else i.advance()}}function iP(i,e){let t="[{<(".indexOf(String.fromCharCode(e)),s=t<0?e:"]}>)".charCodeAt(t);for(;;){if(i.next<0)return;if(i.next==s&&i.peek(1)==39){i.advance(2);return}i.advance()}}function YE(i,e){for(;!(i.next!=95&&!FE(i.next));)e!=null&&(e+=String.fromCharCode(i.next)),i.advance();return e}function rP(i){if(i.next==39||i.next==34||i.next==96){let e=i.next;i.advance(),ts(i,e,!1)}else YE(i)}function yh(i,e){for(;i.next==48||i.next==49;)i.advance();e&&i.next==e&&i.advance()}function xh(i,e){for(;;){if(i.next==46){if(e)break;e=!0}else if(i.next<48||i.next>57)break;i.advance()}if(i.next==69||i.next==101)for(i.advance(),(i.next==43||i.next==45)&&i.advance();i.next>=48&&i.next<=57;)i.advance()}function Hh(i){for(;!(i.next<0||i.next==10);)i.advance()}function zt(i,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==i)return!0;return!1}const Yo=` 	\r
`;function lc(i,e,t){let s=Object.create(null);s.true=s.false=Yg,s.null=s.unknown=vg;for(let r of i.split(" "))r&&(s[r]=oc);for(let r of e.split(" "))r&&(s[r]=Ec);for(let r of(t||"").split(" "))r&&(s[r]=eP);return s}const ac="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Tc="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",vE={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:lc(Tc,ac)};function nP(i,e,t,s){let r={};for(let n in vE)r[n]=(i.hasOwnProperty(n)?i:vE)[n];return e&&(r.words=lc(e,t||"",s)),r}function hc(i){return new Pg(e=>{var t;let{next:s}=e;if(e.advance(),zt(s,Yo)){for(;zt(e.next,Yo);)e.advance();e.acceptToken(Hg)}else if(s==36&&i.doubleDollarQuotedStrings){let r=YE(e,"");e.next==36&&(e.advance(),sP(e,r),e.acceptToken(ds))}else if(s==39||s==34&&i.doubleQuotedStrings)ts(e,s,i.backslashEscapes),e.acceptToken(ds);else if(s==35&&i.hashComments||s==47&&e.next==47&&i.slashComments)Hh(e),e.acceptToken(bh);else if(s==45&&e.next==45&&(!i.spaceAfterDashes||e.peek(1)==32))Hh(e),e.acceptToken(bh);else if(s==47&&e.next==42){e.advance();for(let r=1;;){let n=e.next;if(e.next<0)break;if(e.advance(),n==42&&e.next==47){if(r--,e.advance(),!r)break}else n==47&&e.next==42&&(r++,e.advance())}e.acceptToken(Fg)}else if((s==101||s==69)&&e.next==39)e.advance(),ts(e,39,!0),e.acceptToken(ds);else if((s==110||s==78)&&e.next==39&&i.charSetCasts)e.advance(),ts(e,39,i.backslashEscapes),e.acceptToken(ds);else if(s==95&&i.charSetCasts)for(let r=0;;r++){if(e.next==39&&r>1){e.advance(),ts(e,39,i.backslashEscapes),e.acceptToken(ds);break}if(!FE(e.next))break;e.advance()}else if(i.plsqlQuotingMechanism&&(s==113||s==81)&&e.next==39&&e.peek(1)>0&&!zt(e.peek(1),Yo)){let r=e.peek(1);e.advance(2),iP(e,r),e.acceptToken(ds)}else if(zt(s,i.identifierQuotes)){const r=s==91?93:s;ts(e,r,!1),e.acceptToken(zg)}else if(s==40)e.acceptToken(wg);else if(s==41)e.acceptToken(Vg);else if(s==123)e.acceptToken(kg);else if(s==125)e.acceptToken(Wg);else if(s==91)e.acceptToken(Xg);else if(s==93)e.acceptToken(Kg);else if(s==59)e.acceptToken($g);else if(i.unquotedBitLiterals&&s==48&&e.next==98)e.advance(),yh(e),e.acceptToken(Gh);else if((s==98||s==66)&&(e.next==39||e.next==34)){const r=e.next;e.advance(),i.treatBitsAsBytes?(ts(e,r,i.backslashEscapes),e.acceptToken(Zg)):(yh(e,r),e.acceptToken(Gh))}else if(s==48&&(e.next==120||e.next==88)||(s==120||s==88)&&e.next==39){let r=e.next==39;for(e.advance();tP(e.next);)e.advance();r&&e.next==39&&e.advance(),e.acceptToken(Fo)}else if(s==46&&e.next>=48&&e.next<=57)xh(e,!0),e.acceptToken(Fo);else if(s==46)e.acceptToken(Jg);else if(s>=48&&s<=57)xh(e,!1),e.acceptToken(Fo);else if(zt(s,i.operatorChars)){for(;zt(e.next,i.operatorChars);)e.advance();e.acceptToken(Qg)}else if(zt(s,i.specialVar))e.next==s&&e.advance(),rP(e),e.acceptToken(jg);else if(s==58||s==44)e.acceptToken(qg);else if(FE(s)){let r=YE(e,String.fromCharCode(s));e.acceptToken(e.next==46||e.peek(-r.length-1)==46?Bh:(t=i.words[r.toLowerCase()])!==null&&t!==void 0?t:Bh)}})}const Ac=hc(vE),oP=Rn.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,Ac],topRules:{Script:[0,25]},tokenPrec:0});function wE(i){let e=i.cursor().moveTo(i.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function bi(i,e){let t=i.sliceString(e.from,e.to),s=/^([`'"\[])(.*)([`'"\]])$/.exec(t);return s?s[2]:t}function Sn(i){return i&&(i.name=="Identifier"||i.name=="QuotedIdentifier")}function EP(i,e){if(e.name=="CompositeIdentifier"){let t=[];for(let s=e.firstChild;s;s=s.nextSibling)Sn(s)&&t.push(bi(i,s));return t}return[bi(i,e)]}function Fh(i,e){for(let t=[];;){if(!e||e.name!=".")return t;let s=wE(e);if(!Sn(s))return t;t.unshift(bi(i,s)),e=wE(s)}}function lP(i,e){let t=Ue(i).resolveInner(e,-1),s=TP(i.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?i.doc.sliceString(t.from,t.from+1):null,parents:Fh(i.doc,wE(t)),aliases:s}:t.name=="."?{from:e,quoted:null,parents:Fh(i.doc,t),aliases:s}:{from:e,quoted:null,parents:[],empty:!0,aliases:s}}const aP=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function TP(i,e){let t;for(let r=e;!t;r=r.parent){if(!r)return null;r.name=="Statement"&&(t=r)}let s=null;for(let r=t.firstChild,n=!1,o=null;r;r=r.nextSibling){let E=r.name=="Keyword"?i.sliceString(r.from,r.to).toLowerCase():null,l=null;if(!n)n=E=="from";else if(E=="as"&&o&&Sn(r.nextSibling))l=bi(i,r.nextSibling);else{if(E&&aP.has(E))break;o&&Sn(r)&&(l=bi(i,r))}l&&(s||(s=Object.create(null)),s[l]=EP(i,o)),o=/Identifier$/.test(r.name)?r:null}return s}function hP(i,e,t){return t.map(s=>({...s,label:s.label[0]==i?s.label:i+s.label+e,apply:void 0}))}const AP=/^\w*$/,RP=/^[`'"\[]?\w*[`'"\]]?$/;function Yh(i){return i.self&&typeof i.self.label=="string"}class Cl{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),s=t[e];return s||(e&&!this.list.some(r=>r.label==e)&&this.list.push(vh(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new Cl(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(s=>s.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?vh(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):Yh(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let s=e[t],r=null,n=t.replace(/\\?\./g,E=>E=="."?"\0":E).split("\0"),o=this;Yh(s)&&(r=s.self,s=s.children);for(let E=0;E<n.length;E++)r&&E==n.length-1&&o.addCompletion(r),o=o.child(n[E].replace(/\\\./g,"."));o.addNamespace(s)}}}function vh(i,e,t,s){return new RegExp("^[a-z_][a-z_\\d]*$",s?"i":"").test(i)?{label:i,type:e}:{label:i,type:e,apply:t+i+Rc(t)}}function Rc(i){return i==="["?"]":i}function SP(i,e,t,s,r,n){var o;let E=((o=n?.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',l=new Cl(E,!!n?.spec.caseInsensitiveIdentifiers),a=r?l.child(r):null;return l.addNamespace(i),e&&(a||l).addCompletions(e),t&&l.addCompletions(t),a&&l.addCompletions(a.list),s&&l.addCompletions((a||l).child(s).list),T=>{let{parents:h,from:A,quoted:R,empty:S,aliases:c}=lP(T.state,T.pos);if(S&&!T.explicit)return null;c&&h.length==1&&(h=c[h[0]]||h);let O=l;for(let C of h){for(;!O.children||!O.children[C];)if(O==l&&a)O=a;else if(O==a&&s)O=O.child(s);else return null;let _=O.maybeChild(C);if(!_)return null;O=_}let f=O.list;if(O==l&&c&&(f=f.concat(Object.keys(c).map(C=>({label:C,type:"constant"})))),R){let C=R[0],_=Rc(C),g=T.state.sliceDoc(T.pos,T.pos+1)==_;return{from:A,to:g?T.pos+1:void 0,options:hP(C,_,f),validFor:RP}}else return{from:A,options:f,validFor:AP}}}function cP(i){return i==Ec?"type":i==oc?"keyword":"variable"}function OP(i,e,t){let s=Object.keys(i).map(r=>t(e?r.toUpperCase():r,cP(i[r])));return aD(["QuotedIdentifier","String","LineComment","BlockComment","."],WS(s))}let NP=oP.configure({props:[YR.add({Statement:WL()}),wR.add({Statement(i,e){return{from:Math.min(i.from+100,e.doc.lineAt(i.from).to),to:i.to}},BlockComment(i){return{from:i.from+2,to:i.to-2}}}),yR({Keyword:u.keyword,Type:u.typeName,Builtin:u.standard(u.name),Bits:u.number,Bytes:u.string,Bool:u.bool,Null:u.null,Number:u.number,String:u.string,Identifier:u.name,QuotedIdentifier:u.special(u.string),SpecialVar:u.special(u.name),LineComment:u.lineComment,BlockComment:u.blockComment,Operator:u.operator,"Semi Punctuation":u.punctuation,"( )":u.paren,"{ }":u.brace,"[ ]":u.squareBracket})]});class Bi{constructor(e,t,s){this.dialect=e,this.language=t,this.spec=s}get extension(){return this.language.extension}configureLanguage(e,t){return new Bi(this.dialect,this.language.configure(e,t),this.spec)}static define(e){let t=nP(e,e.keywords,e.types,e.builtin),s=jr.define({name:"sql",parser:NP.configure({tokenizers:[{from:Ac,to:hc(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Bi(t,s,e)}}function IP(i,e){return{label:i,type:e,boost:-1}}function fP(i,e=!1,t){return OP(i.dialect.words,e,t||IP)}function uP(i){return i.schema?SP(i.schema,i.tables,i.schemas,i.defaultTable,i.defaultSchema,i.dialect||_l):()=>null}function dP(i){return i.schema?(i.dialect||_l).language.data.of({autocomplete:uP(i)}):[]}function CP(i={}){let e=i.dialect||_l;return new yL(e.language,[dP(i),e.language.data.of({autocomplete:fP(e,i.upperCaseKeywords,i.keywordCompletion)})])}const _l=Bi.define({}),_P=Bi.define({keywords:Tc+"abort accept access add all alter and any arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body by case cast char_base check close cluster clusters colauth column comment commit compress connected constant constraint crash create current currval cursor data_base database dba deallocate debugoff debugon declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry exception exception_init exchange exclusive exists external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base of off offline on online only option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw rebuild record ref references refresh rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work",builtin:"appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define echo editfile embedded feedback flagger flush heading headsep instance linesize lno loboffset logsource longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar repfooter repheader serveroutput shiftinout show showmode spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout timing trimout trimspool ttitle underline verify version wrap",types:ac+"ascii bfile bfilename bigserial bit blob dec long number nvarchar nvarchar2 serial smallint string text uid varchar2 xml",operatorChars:"*/+-%<>!=~",doubleQuotedStrings:!0,charSetCasts:!0,plsqlQuotingMechanism:!0});var LP=i=>{var{theme:e,settings:t={},styles:s=[]}=i,r={".cm-gutters":{}},n={};t.background&&(n.backgroundColor=t.background),t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.foreground&&(n.color=t.foreground),t.fontSize&&(n.fontSize=t.fontSize),(t.background||t.foreground)&&(r["&"]=n),t.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(r[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(r[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(r[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(r[".cm-content"]={caretColor:t.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var o={};t.gutterActiveForeground&&(o.color=t.gutterActiveForeground),t.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:t.lineHighlight},o.backgroundColor=t.lineHighlight),r[".cm-activeLineGutter"]=o,t.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var E=G.theme(r,{dark:e==="dark"}),l=Xs.define(s),a=[E,Tl(l)];return a};const Zt={keywords:["!","!=","$","%","&","(",")","*","+",",","-",".","/",":",";","<","<<","<=","=","=>",">",">=","?","@","A","ABORT","ABS","ABSENT","ACCESS","ACCESSED","ACCOUNT","ACL","ACOS","ACROSS","ACTION","ACTIONS","ACTIVATE","ACTIVE","ACTIVE_COMPONENT","ACTIVE_DATA","ACTIVE_FUNCTION","ACTIVE_TAG","ACTIVITY","ADAPTIVE_PLAN","ADD","ADD_COLUMN","ADD_GROUP","ADD_MONTHS","ADG_REDIRECT_DML","ADG_REDIRECT_PLSQL","ADJ_DATE","ADMIN","ADMINISTER","ADMINISTRATOR","ADVANCED","ADVISE","ADVISOR","AFD_DISKSTRING","AFFINITY","AFTER","AGGREGATE","AGGREGATES","ALGORITHM","ALIAS","ALL","ALLOCATE","ALLOW","ALL_ROWS","ALTER","ALTERNATE","ALWAYS","ANALYTIC","ANALYZE","ANCESTOR","ANCILLARY","AND","AND_EQUAL","ANOMALY","ANSI_REARCH","ANSWER_QUERY_USING_STATS","ANTIJOIN","ANY","ANYSCHEMA","ANY_VALUE","APPEND","APPENDCHILDXML","APPEND_VALUES","APPLICATION","APPLY","APPROX_COUNT","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_AGG","APPROX_COUNT_DISTINCT_DETAIL","APPROX_MEDIAN","APPROX_PERCENTILE","APPROX_PERCENTILE_AGG","APPROX_PERCENTILE_DETAIL","APPROX_RANK","APPROX_SUM","ARCHIVAL","ARCHIVE","ARCHIVED","ARCHIVELOG","ARRAY","ARRAYS","AS","ASC","ASCII","ASCIISTR","ASIN","ASIS","ASSEMBLY","ASSIGN","ASSOCIATE","ASYNC","ASYNCHRONOUS","AS_JSON","AT","ATAN","ATAN2","ATTRIBUTE","ATTRIBUTES","AUDIT","AUTHENTICATED","AUTHENTICATION","AUTHID","AUTHORIZATION","AUTO","AUTOALLOCATE","AUTOEXTEND","AUTOMATIC","AUTO_LOGIN","AUTO_REOPTIMIZE","AVAILABILITY","AVCACHE_OP","AVERAGE_RANK","AVG","AVMDX_OP","AVRO","AV_CACHE","AW","BACKGROUND","BACKUP","BAND_JOIN","BASIC","BASICFILE","BATCH","BATCHSIZE","BATCH_TABLE_ACCESS_BY_ROWID","BECOME","BEFORE","BEGIN","BEGINNING","BEGIN_OUTLINE_DATA","BEHALF","BEQUEATH","BETWEEN","BFILE","BFILENAME","BIGFILE","BINARY","BINARY_DOUBLE","BINARY_DOUBLE_INFINITY","BINARY_DOUBLE_NAN","BINARY_FLOAT","BINARY_FLOAT_INFINITY","BINARY_FLOAT_NAN","BINDING","BIND_AWARE","BIN_TO_NUM","BITAND","BITMAP","BITMAPS","BITMAP_AND","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITMAP_TREE","BITS","BLOB","BLOCK","BLOCKCHAIN","BLOCKS","BLOCKSIZE","BLOCK_RANGE","BODY","BOTH","BOUND","BRANCH","BREADTH","BROADCAST","BSON","BUFFER","BUFFER_CACHE","BUFFER_POOL","BUILD","BULK","BUSHY_JOIN","BY","BYPASS_RECURSIVE_CHECK","BYPASS_UJVC","BYTE","CACHE","CACHE_CB","CACHE_INSTANCES","CACHE_TEMP_TABLE","CACHING","CALCULATED","CALL","CALLBACK","CANCEL","CAPACITY","CAPTION","CARDINALITY","CASCADE","CASE","CAST","CATEGORY","CDB$DEFAULT","CDB_HTTP_HANDLER","CEIL","CELLMEMORY","CELL_FLASH_CACHE","CERTIFICATE","CFILE","CHAINED","CHANGE","CHANGE_DUPKEY_ERROR_INDEX","CHAR","CHARACTER","CHARTOROWID","CHAR_CS","CHECK","CHECKPOINT","CHECK_ACL_REWRITE","CHILD","CHOOSE","CHR","CHUNK","CLASS","CLASSIFICATION","CLASSIFIER","CLAUSE","CLEAN","CLEANUP","CLEAR","CLIENT","CLOB","CLONE","CLOSE","CLOSEST","CLOSE_CACHED_OPEN_CURSORS","CLUSTER","CLUSTERING","CLUSTERING_FACTOR","CLUSTER_BY_ROWID","CLUSTER_DETAILS","CLUSTER_DISTANCE","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","COALESCE","COALESCE_SQ","COARSE","COLD","COLLATE","COLLATION","COLLECT","COLUMN","COLUMNAR","COLUMNS","COLUMN_AUTHORIZATION_INDICATOR","COLUMN_AUTH_INDICATOR","COLUMN_STATS","COLUMN_VALUE","COMMENT","COMMIT","COMMITTED","COMMON","COMMON_DATA_MAP","COMPACT","COMPATIBILITY","COMPILE","COMPLETE","COMPLIANCE","COMPONENT","COMPONENTS","COMPOSE","COMPOSITE","COMPOSITE_LIMIT","COMPOUND","COMPRESS","COMPUTATION","COMPUTE","CONCAT","CONDITION","CONDITIONAL","CONFIRM","CONFORMING","CONNECT","CONNECT_BY_CB_WHR_ONLY","CONNECT_BY_COMBINE_SW","CONNECT_BY_COST_BASED","CONNECT_BY_ELIM_DUPS","CONNECT_BY_FILTERING","CONNECT_BY_ISCYCLE","CONNECT_BY_ISLEAF","CONNECT_BY_ROOT","CONNECT_TIME","CONSIDER","CONSISTENT","CONST","CONSTANT","CONSTRAINT","CONSTRAINTS","CONTAINER","CONTAINERS","CONTAINERS_DEFAULT","CONTAINER_DATA","CONTAINER_DATA_ADMIT_NULL","CONTAINER_MAP","CONTAINER_MAP_OBJECT","CONTENT","CONTENTS","CONTEXT","CONTINUE","CONTROLFILE","CONVERSION","CONVERT","CON_DBID_TO_ID","CON_GUID_TO_ID","CON_ID","CON_ID_FILTER","CON_ID_TO_CON_NAME","CON_ID_TO_DBID","CON_NAME_TO_ID","CON_UID_TO_ID","COOKIE","COPY","CORR","CORRUPTION","CORRUPT_XID","CORRUPT_XID_ALL","CORR_K","CORR_S","COS","COSH","COST","COST_XML_QUERY_REWRITE","COUNT","COVAR_POP","COVAR_SAMP","CO_AUTH_IND","CPU_COSTING","CPU_COUNT","CPU_PER_CALL","CPU_PER_SESSION","CPU_TIME","CRASH","CREATE","CREATE_FILE_DEST","CREATE_STORED_OUTLINES","CREATION","CREDENTIAL","CREDENTIALS","CRITICAL","CROSS","CROSSEDITION","CSCONVERT","CUBE","CUBE_AJ","CUBE_GB","CUBE_SJ","CUME_DIST","CUME_DISTM","CURRENT","CURRENTV","CURRENT_DATE","CURRENT_INSTANCE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","CURSOR_SHARING_EXACT","CURSOR_SPECIFIC_SEGMENT","CV","CYCLE","D","DANGLING","DATA","DATABASE","DATAFILE","DATAFILES","DATAMOVEMENT","DATAOBJNO","DATAOBJ_TO_MAT_PARTITION","DATAOBJ_TO_PARTITION","DATAPUMP","DATASTORE","DATA_LINK_DML","DATA_SECURITY_REWRITE_LIMIT","DATA_VALIDATE","DATE","DATE_MODE","DAY","DAYS","DBA","DBA_RECYCLEBIN","DBMS_STATS","DBSTR2UTF8","DBTIMEZONE","DB_ROLE_CHANGE","DB_UNIQUE_NAME","DB_VERSION","DDL","DEALLOCATE","DEBUG","DEBUGGER","DEC","DECIMAL","DECLARE","DECODE","DECOMPOSE","DECOMPRESS","DECORRELATE","DECR","DECREMENT","DECRYPT","DEDUPLICATE","DEFAULT","DEFAULTS","DEFAULT_COLLATION","DEFAULT_PDB_HINT","DEFERRABLE","DEFERRED","DEFINE","DEFINED","DEFINER","DEFINITION","DEGREE","DELAY","DELEGATE","DELETE","DELETEXML","DELETE_ALL","DEMAND","DENSE_RANK","DENSE_RANKM","DEPENDENT","DEPTH","DEQUEUE","DEREF","DEREF_NO_REWRITE","DESC","DESCENDANT","DESCRIPTION","DESTROY","DETACHED","DETERMINED","DETERMINES","DETERMINISTIC","DG_GATHER_STATS","DICTIONARY","DIGEST","DIMENSION","DIMENSIONS","DIRECTORY","DIRECT_LOAD","DIRECT_PATH","DISABLE","DISABLE_ALL","DISABLE_CONTAINERS_DEFAULT","DISABLE_CONTAINER_MAP","DISABLE_PARALLEL_DML","DISABLE_PRESET","DISABLE_RPKE","DISALLOW","DISASSOCIATE","DISCARD","DISCONNECT","DISK","DISKGROUP","DISKS","DISMOUNT","DISTINCT","DISTINGUISHED","DISTRIBUTE","DISTRIBUTED","DIST_AGG_PROLLUP_PUSHDOWN","DML","DML_UPDATE","DOCFIDELITY","DOCUMENT","DOMAIN_INDEX_FILTER","DOMAIN_INDEX_NO_SORT","DOMAIN_INDEX_SORT","DOUBLE","DOWNGRADE","DRIVING_SITE","DROP","DROP_COLUMN","DROP_GROUP","DST_UPGRADE_INSERT_CONV","DUMP","DUPLICATE","DUPLICATED","DV","DYNAMIC","DYNAMIC_SAMPLING","DYNAMIC_SAMPLING_EST_CDN","E","EACH","EDITION","EDITIONABLE","EDITIONING","EDITIONS","ELAPSED_TIME","ELEMENT","ELIMINATE_JOIN","ELIMINATE_OBY","ELIMINATE_OUTER_JOIN","ELIMINATE_SQ","ELIM_GROUPBY","ELSE","EM","EMPTY","EMPTY_BLOB","EMPTY_CLOB","ENABLE","ENABLE_ALL","ENABLE_PARALLEL_DML","ENABLE_PRESET","ENCODE","ENCODING","ENCRYPT","ENCRYPTION","END","END_OUTLINE_DATA","ENFORCE","ENFORCED","ENQUEUE","ENTERPRISE","ENTITYESCAPING","ENTRY","EQUIPART","ERROR","ERRORS","ERROR_ARGUMENT","ERROR_ON_OVERLAP_TIME","ESCAPE","ESTIMATE","EVAL","EVALNAME","EVALUATE","EVALUATION","EVENTS","EVERY","EXCEPT","EXCEPTIONS","EXCHANGE","EXCLUDE","EXCLUDING","EXCLUSIVE","EXECUTE","EXEMPT","EXISTING","EXISTS","EXISTSNODE","EXP","EXPAND","EXPAND_GSET_TO_UNION","EXPAND_TABLE","EXPIRE","EXPLAIN","EXPLOSION","EXPORT","EXPRESS","EXPR_CORR_CHECK","EXTEND","EXTENDED","EXTENDS","EXTENT","EXTENTS","EXTERNAL","EXTERNALLY","EXTRA","EXTRACT","EXTRACTCLOBXML","EXTRACTVALUE","FACILITY","FACT","FACTOR","FACTORIZE_JOIN","FAILED","FAILED_LOGIN_ATTEMPTS","FAILGROUP","FAILOVER","FAILURE","FALSE","FAMILY","FAR","FAST","FBTSCAN","FEATURE","FEATURE_COMPARE","FEATURE_DETAILS","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","FEDERATION","FETCH","FILE","FILEGROUP","FILESYSTEM_LIKE_LOGGING","FILE_NAME_CONVERT","FILTER","FINAL","FINE","FINISH","FIRST","FIRSTM","FIRST_ROWS","FIRST_VALUE","FIXED_VIEW_DATA","FLAGGER","FLASHBACK","FLASH_CACHE","FLEX","FLOAT","FLOB","FLOOR","FLUSH","FOLDER","FOLLOWING","FOLLOWS","FOR","FORCE","FORCE_SPATIAL","FORCE_XML_QUERY_REWRITE","FOREIGN","FOREVER","FORMAT","FORWARD","FRAGMENT_NUMBER","FREE","FREELIST","FREELISTS","FREEPOOLS","FRESH","FRESH_MV","FROM","FROM_TZ","FTP","FULL","FULL_OUTER_JOIN_TO_OUTER","FUNCTION","FUNCTIONS","G","GATHER_OPTIMIZER_STATISTICS","GATHER_PLAN_STATISTICS","GBY_CONC_ROLLUP","GBY_PUSHDOWN","GENERATED","GET","GLOBAL","GLOBALLY","GLOBAL_NAME","GLOBAL_TOPIC_ENABLED","GRANT","GRANTED","GRANULAR","GREATEST","GROUP","GROUPING","GROUPING_ID","GROUPS","GROUP_BY","GROUP_ID","GUARANTEE","GUARANTEED","GUARD","H","HALF_YEARS","HASH","HASHING","HASHKEYS","HASH_AJ","HASH_SJ","HAVING","HEADER","HEAP","HELP","HEXTORAW","HEXTOREF","HIDDEN","HIDE","HIERARCHICAL","HIERARCHIES","HIERARCHY","HIER_ANCESTOR","HIER_ANCESTORS","HIER_CAPTION","HIER_CHILDREN","HIER_CHILD_COUNT","HIER_COLUMN","HIER_CONDITION","HIER_COUNT","HIER_DEPTH","HIER_DESCENDANTS","HIER_DESCRIPTION","HIER_DISTINCT","HIER_EXPAND","HIER_FILTER","HIER_FIRST","HIER_HAS_CHILDREN","HIER_INTERSECT","HIER_LAG","HIER_LAST","HIER_LEAD","HIER_LEVEL","HIER_LEVEL_MEMBERS","HIER_LISTAGG","HIER_MEMBER_AT","HIER_MEMBER_NAME","HIER_MEMBER_SET","HIER_MEMBER_UNIQUE_NAME","HIER_MINUS","HIER_ORDER","HIER_PARENT","HIER_POSITION","HIER_RANGE","HIER_SIBLINGS","HIER_SORT","HIER_UNION","HIER_UNION_ALL","HIER_WINDOW","HIGH","HINTSET_BEGIN","HINTSET_END","HOST","HOT","HOUR","HOURS","HTTP","HWM_BROKERED","HYBRID","ID","IDENTIFIED","IDENTIFIER","IDENTITY","IDGENERATORS","IDLE","IDLE_TIME","IF","IGNORE","IGNORE_OPTIM_EMBEDDED_HINTS","IGNORE_ROW_ON_DUPKEY_INDEX","IGNORE_WHERE_CLAUSE","ILM","IMMEDIATE","IMMUTABLE","IMPACT","IMPORT","IN","INACTIVE","INACTIVE_ACCOUNT_TIME","INCLUDE","INCLUDES","INCLUDE_VERSION","INCLUDING","INCR","INCREMENT","INCREMENTAL","INDENT","INDEX","INDEXED","INDEXES","INDEXING","INDEXTYPE","INDEXTYPES","INDEX_ASC","INDEX_COMBINE","INDEX_DESC","INDEX_FFS","INDEX_FILTER","INDEX_JOIN","INDEX_ROWS","INDEX_RRS","INDEX_RS","INDEX_RS_ASC","INDEX_RS_DESC","INDEX_SCAN","INDEX_SKIP_SCAN","INDEX_SS","INDEX_SS_ASC","INDEX_SS_DESC","INDEX_STATS","INDICATOR","INFINITE","INFORMATIONAL","INHERIT","INITCAP","INITIAL","INITIALIZED","INITIALLY","INITRANS","INLINE","INLINE_XMLTYPE_NT","INLINE_XT","INMEMORY","INMEMORY_PRUNING","INNER","INPLACE","INSENSITIVE","INSERT","INSERTCHILDXML","INSERTCHILDXMLAFTER","INSERTCHILDXMLBEFORE","INSERTXMLAFTER","INSERTXMLBEFORE","INSTALL","INSTANCE","INSTANCES","INSTANTIABLE","INSTANTLY","INSTEAD","INSTR","INSTR2","INSTR4","INSTRB","INSTRC","INT","INTEGER","INTERLEAVED","INTERMEDIATE","INTERNAL_CONVERT","INTERNAL_USE","INTERPRETED","INTERSECT","INTERVAL","INTO","INTRA_CDB","INVALIDATE","INVALIDATION","INVISIBLE","IN_MEMORY_METADATA","IN_XQUERY","IOSEEKTIM","IOTFRSPEED","IO_LOGICAL","IO_MEGABYTES","IO_REQUESTS","IS","ISOLATE","ISOLATION","ISOLATION_LEVEL","ITERATE","ITERATION_NUMBER","JAVA","JOB","JOIN","JSON","JSONGET","JSONPARSE","JSONTOXML","JSON_ARRAY","JSON_ARRAYAGG","JSON_EQUAL","JSON_EXISTS","JSON_EXISTS2","JSON_HASH","JSON_LENGTH","JSON_MERGEPATCH","JSON_OBJECT","JSON_OBJECTAGG","JSON_PATCH","JSON_QUERY","JSON_SERIALIZE","JSON_TABLE","JSON_TEXTCONTAINS","JSON_TEXTCONTAINS2","JSON_TRANSFORM","JSON_VALUE","K","KEEP","KEEP_DUPLICATES","KERBEROS","KEY","KEYS","KEYSIZE","KEYSTORE","KEY_LENGTH","KILL","LABEL","LAG","LAG_DIFF","LAG_DIFF_PERCENT","LANGUAGE","LAST","LAST_DAY","LAST_VALUE","LATERAL","LAX","LAYER","LDAP_REGISTRATION","LDAP_REGISTRATION_ENABLED","LDAP_REG_SYNC_INTERVAL","LEAD","LEADING","LEAD_CDB","LEAD_CDB_URI","LEAD_DIFF","LEAD_DIFF_PERCENT","LEAF","LEAST","LEAVES","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LENGTHC","LESS","LEVEL","LEVELS","LIBRARY","LIFE","LIFECYCLE","LIFETIME","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LINEAR","LINK","LIST","LISTAGG","LN","LNNVL","LOAD","LOB","LOBNVL","LOBS","LOCAL","LOCALTIME","LOCALTIMESTAMP","LOCAL_INDEXES","LOCATION","LOCATOR","LOCK","LOCKDOWN","LOCKED","LOCKING","LOG","LOGFILE","LOGFILES","LOGGING","LOGICAL","LOGICAL_READS_PER_CALL","LOGICAL_READS_PER_SESSION","LOGMINING","LOGOFF","LOGON","LOG_READ_ONLY_VIOLATIONS","LONG","LOST","LOW","LOWER","LPAD","LTRIM","M","MAIN","MAKE_REF","MANAGE","MANAGED","MANAGEMENT","MANAGER","MANUAL","MAP","MAPPER","MAPPING","MASTER","MATCH","MATCHED","MATCHES","MATCH_NUMBER","MATCH_RECOGNIZE","MATERIALIZE","MATERIALIZED","MATRIX","MAX","MAXARCHLOGS","MAXDATAFILES","MAXEXTENTS","MAXIMIZE","MAXINSTANCES","MAXLOGFILES","MAXLOGHISTORY","MAXLOGMEMBERS","MAXSIZE","MAXTRANS","MAXVALUE","MAX_AUDIT_SIZE","MAX_DIAG_SIZE","MAX_PDB_SNAPSHOTS","MAX_SHARED_TEMP_SIZE","MBRC","MEASURE","MEASURES","MEDIAN","MEDIUM","MEMBER","MEMCOMPRESS","MEMOPTIMIZE","MEMOPTIMIZE_WRITE","MEMORY","MERGE","MERGE$ACTIONS","MERGE_AJ","MERGE_CONST_ON","MERGE_SJ","METADATA","METADATA_SOURCE_PDB","METHOD","MIGRATE","MIGRATE_CROSS_CON","MIGRATION","MIN","MINEXTENTS","MINIMIZE","MINIMUM","MINING","MINUS","MINUS_NULL","MINUTE","MINUTES","MINVALUE","MIRROR","MIRRORCOLD","MIRRORHOT","MISMATCH","MISSING","MLSLABEL","MOD","MODE","MODEL","MODEL_COMPILE_SUBQUERY","MODEL_DONTVERIFY_UNIQUENESS","MODEL_DYNAMIC_SUBQUERY","MODEL_MIN_ANALYSIS","MODEL_NB","MODEL_NO_ANALYSIS","MODEL_PBY","MODEL_PUSH_REF","MODEL_SV","MODIFICATION","MODIFY","MODIFY_COLUMN_TYPE","MODULE","MONITOR","MONITORING","MONTH","MONTHS","MONTHS_BETWEEN","MOUNT","MOUNTPATH","MOVE","MOVEMENT","MULTIDIMENSIONAL","MULTISET","MV_MERGE","NAME","NAMED","NAMESPACE","NAN","NANVL","NATIONAL","NATIVE","NATIVE_FULL_OUTER_JOIN","NATURAL","NAV","NCHAR","NCHAR_CS","NCHR","NCLOB","NEEDED","NEG","NESTED","NESTED_TABLE_FAST_INSERT","NESTED_TABLE_GET_REFS","NESTED_TABLE_ID","NESTED_TABLE_SET_REFS","NESTED_TABLE_SET_SETID","NETWORK","NEVER","NEW","NEW_TIME","NEXT","NEXT_DAY","NLJ_BATCHING","NLJ_INDEX_FILTER","NLJ_INDEX_SCAN","NLJ_PREFETCH","NLSSORT","NLS_CALENDAR","NLS_CHARACTERSET","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","NLS_COLLATION_ID","NLS_COLLATION_NAME","NLS_COMP","NLS_CURRENCY","NLS_DATE_FORMAT","NLS_DATE_LANGUAGE","NLS_INITCAP","NLS_ISO_CURRENCY","NLS_LANG","NLS_LANGUAGE","NLS_LENGTH_SEMANTICS","NLS_LOWER","NLS_NCHAR_CONV_EXCP","NLS_NUMERIC_CHARACTERS","NLS_SORT","NLS_SPECIAL_CHARS","NLS_TERRITORY","NLS_UPPER","NL_AJ","NL_SJ","NO","NOAPPEND","NOARCHIVELOG","NOAUDIT","NOCACHE","NOCOMPRESS","NOCOPY","NOCPU_COSTING","NOCYCLE","NODELAY","NOENTITYESCAPING","NOEXTEND","NOFORCE","NOGUARANTEE","NOKEEP","NOLOCAL","NOLOGGING","NOMAPPING","NOMAXVALUE","NOMINIMIZE","NOMINVALUE","NOMONITORING","NONBLOCKING","NONE","NONEDITIONABLE","NONPARTITIONED","NONSCHEMA","NOORDER","NOOVERRIDE","NOPARALLEL","NOPARALLEL_INDEX","NORELOCATE","NORELY","NOREPAIR","NOREPLAY","NORESETLOGS","NOREVERSE","NOREWRITE","NORMAL","NOROWDEPENDENCIES","NOSCALE","NOSCHEMACHECK","NOSEGMENT","NOSHARD","NOSORT","NOSTRICT","NOSWITCH","NOT","NOTHING","NOTIFICATION","NOVALIDATE","NOW","NOWAIT","NO_ACCESS","NO_ADAPTIVE_PLAN","NO_ANSI_REARCH","NO_ANSWER_QUERY_USING_STATS","NO_AUTO_REOPTIMIZE","NO_BAND_JOIN","NO_BASETABLE_MULTIMV_REWRITE","NO_BATCH_TABLE_ACCESS_BY_ROWID","NO_BIND_AWARE","NO_BUFFER","NO_BUSHY_JOIN","NO_CARTESIAN","NO_CHECK_ACL_REWRITE","NO_CLUSTERING","NO_CLUSTER_BY_ROWID","NO_COALESCE_SQ","NO_COMMON_DATA","NO_CONNECT_BY_CB_WHR_ONLY","NO_CONNECT_BY_COMBINE_SW","NO_CONNECT_BY_COST_BASED","NO_CONNECT_BY_ELIM_DUPS","NO_CONNECT_BY_FILTERING","NO_CONTAINERS","NO_COST_XML_QUERY_REWRITE","NO_CPU_COSTING","NO_CROSS_CONTAINER","NO_DATA_SECURITY_REWRITE","NO_DECORRELATE","NO_DIST_AGG_PROLLUP_PUSHDOWN","NO_DOMAIN_INDEX_FILTER","NO_DST_UPGRADE_INSERT_CONV","NO_ELIMINATE_JOIN","NO_ELIMINATE_OBY","NO_ELIMINATE_OUTER_JOIN","NO_ELIMINATE_SQ","NO_ELIM_GROUPBY","NO_EXPAND","NO_EXPAND_GSET_TO_UNION","NO_EXPAND_TABLE","NO_FACT","NO_FACTORIZE_JOIN","NO_FILTERING","NO_FULL_OUTER_JOIN_TO_OUTER","NO_GATHER_OPTIMIZER_STATISTICS","NO_GBY_PUSHDOWN","NO_INDEX","NO_INDEX_FFS","NO_INDEX_SS","NO_INMEMORY","NO_INMEMORY_PRUNING","NO_LOAD","NO_MERGE","NO_MODEL_PUSH_REF","NO_MONITOR","NO_MONITORING","NO_MULTIMV_REWRITE","NO_NATIVE_FULL_OUTER_JOIN","NO_NLJ_BATCHING","NO_NLJ_PREFETCH","NO_OBJECT_LINK","NO_ORDER_ROLLUPS","NO_OR_EXPAND","NO_OUTER_JOIN_TO_ANTI","NO_OUTER_JOIN_TO_INNER","NO_PARALLEL","NO_PARALLEL_INDEX","NO_PARTIAL_COMMIT","NO_PARTIAL_JOIN","NO_PARTIAL_OSON_UPDATE","NO_PARTIAL_ROLLUP_PUSHDOWN","NO_PLACE_DISTINCT","NO_PLACE_GROUP_BY","NO_PQ_CONCURRENT_UNION","NO_PQ_EXPAND_TABLE","NO_PQ_MAP","NO_PQ_REPLICATE","NO_PQ_SKEW","NO_PRUNE_GSETS","NO_PULL_PRED","NO_PUSH_HAVING_TO_GBY","NO_PUSH_PRED","NO_PUSH_SUBQ","NO_PX_FAULT_TOLERANCE","NO_PX_JOIN_FILTER","NO_QKN_BUFF","NO_QUERY_TRANSFORMATION","NO_REF_CASCADE","NO_REORDER_WIF","NO_RESULT_CACHE","NO_REWRITE","NO_ROOT_SW_FOR_LOCAL","NO_SEMIJOIN","NO_SEMI_TO_INNER","NO_SET_GBY_PUSHDOWN","NO_SET_TO_JOIN","NO_SQL_TRANSLATION","NO_SQL_TUNE","NO_STAR_TRANSFORMATION","NO_STATEMENT_QUEUING","NO_STATS_GSETS","NO_SUBQUERY_PRUNING","NO_SUBSTRB_PAD","NO_SWAP_JOIN_INPUTS","NO_TABLE_LOOKUP_BY_NL","NO_TEMP_TABLE","NO_TRANSFORM_DISTINCT_AGG","NO_UNNEST","NO_USE_CUBE","NO_USE_DAGG_UNION_ALL_GSETS","NO_USE_HASH","NO_USE_HASH_AGGREGATION","NO_USE_HASH_GBY_FOR_DAGGPSHD","NO_USE_HASH_GBY_FOR_PUSHDOWN","NO_USE_INVISIBLE_INDEXES","NO_USE_MERGE","NO_USE_NL","NO_USE_PARTITION_WISE_DISTINCT","NO_USE_PARTITION_WISE_GBY","NO_USE_PARTITION_WISE_WIF","NO_USE_SCALABLE_GBY_INVDIST","NO_USE_VECTOR_AGGREGATION","NO_VECTOR_TRANSFORM","NO_VECTOR_TRANSFORM_DIMS","NO_VECTOR_TRANSFORM_FACT","NO_XDB_FASTPATH_INSERT","NO_XMLINDEX_REWRITE","NO_XMLINDEX_REWRITE_IN_SELECT","NO_XML_DML_REWRITE","NO_XML_QUERY_REWRITE","NO_ZONEMAP","NTH_VALUE","NTILE","NULL","NULLIF","NULLS","NUMBER","NUMERIC","NUMTODSINTERVAL","NUMTOYMINTERVAL","NUM_INDEX_KEYS","NVARCHAR2","NVL","NVL2","OBJECT","OBJECT2XML","OBJNO","OBJNO_REUSE","OBJ_ID","OCCURENCES","OCCURRENCES","OF","OFF","OFFLINE","OFFSET","OID","OIDINDEX","OLAP","OLD","OLD_PUSH_PRED","OLS","OLTP","OMIT","ON","ONE","ONLINE","ONLY","OPAQUE","OPAQUE_TRANSFORM","OPAQUE_XCANONICAL","OPCODE","OPEN","OPERATIONS","OPERATOR","OPTIMAL","OPTIMIZE","OPTIMIZER_FEATURES_ENABLE","OPTIMIZER_GOAL","OPTION","OPT_ESTIMATE","OPT_PARAM","OR","ORADEBUG","ORA_BRANCH","ORA_CHECK_ACL","ORA_CHECK_PRIVILEGE","ORA_CHECK_SYS_PRIVILEGE","ORA_CLUSTERING","ORA_CONCAT_RWKEY","ORA_DM_PARTITION_NAME","ORA_DST_AFFECTED","ORA_DST_CONVERT","ORA_DST_ERROR","ORA_GET_ACLIDS","ORA_GET_PRIVILEGES","ORA_HASH","ORA_INVOKING_USER","ORA_INVOKING_USERID","ORA_INVOKING_XS_USER","ORA_INVOKING_XS_USER_GUID","ORA_PARTITION_VALIDATION","ORA_RAWCOMPARE","ORA_RAWCONCAT","ORA_ROWSCN","ORA_ROWSCN_RAW","ORA_ROWVERSION","ORA_SEARCH_RWKEY","ORA_SHARD_ID","ORA_TABVERSION","ORA_WRITE_TIME","ORDER","ORDERED","ORDERED_PREDICATES","ORDER_KEY_VECTOR_USE","ORDER_SUBQ","ORDINALITY","ORGANIZATION","OR_EXPAND","OR_PREDICATES","OSON","OTHER","OUTER","OUTER_JOIN_TO_ANTI","OUTER_JOIN_TO_INNER","OUTLINE","OUTLINE_LEAF","OUT_OF_LINE","OVER","OVERFLOW","OVERFLOW_NOMOVE","OVERLAPS","OWN","OWNER","OWNERSHIP","P","PACKAGE","PACKAGES","PARALLEL","PARALLEL_INDEX","PARAM","PARAMETERS","PARENT","PARITY","PART$NUM$INST","PARTIAL","PARTIALLY","PARTIAL_JOIN","PARTIAL_ROLLUP_PUSHDOWN","PARTITION","PARTITIONING","PARTITIONS","PARTITIONSET","PARTITION_CONTAINED","PARTITION_HASH","PARTITION_LIST","PARTITION_RANGE","PASSING","PASSWORD","PASSWORDFILE_METADATA_CACHE","PASSWORD_GRACE_TIME","PASSWORD_LIFE_TIME","PASSWORD_LOCK_TIME","PASSWORD_REUSE_MAX","PASSWORD_REUSE_TIME","PASSWORD_ROLLOVER_TIME","PASSWORD_VERIFY_FUNCTION","PAST","PATCH","PATH","PATHS","PATH_PREFIX","PATTERN","PBL_HS_BEGIN","PBL_HS_END","PCTFREE","PCTINCREASE","PCTTHRESHOLD","PCTUSED","PCTVERSION","PDB_LOCAL_ONLY","PENDING","PER","PERCENT","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PERCENT_RANKM","PERFORMANCE","PERIOD","PERMANENT","PERMISSION","PERMUTE","PERSISTABLE","PFILE","PHV","PHYSICAL","PIKEY","PIVOT","PIV_GB","PIV_SSF","PLACE_DISTINCT","PLACE_GROUP_BY","PLAN","PLSCOPE_SETTINGS","PLSQL_CCFLAGS","PLSQL_CODE_TYPE","PLSQL_DEBUG","PLSQL_OPTIMIZE_LEVEL","PLSQL_WARNINGS","PLUGGABLE","POINT","POLICY","POOL_16K","POOL_2K","POOL_32K","POOL_4K","POOL_8K","PORT","POSITION","POST_TRANSACTION","POWER","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","PQ_CONCURRENT_UNION","PQ_DISTRIBUTE","PQ_DISTRIBUTE_WINDOW","PQ_EXPAND_TABLE","PQ_FILTER","PQ_MAP","PQ_NOMAP","PQ_REPLICATE","PQ_SKEW","PREBUILT","PRECEDES","PRECEDING","PRECISION","PRECOMPUTE_SUBQUERY","PREDICATE_REORDERS","PREDICTION","PREDICTION_BOUNDS","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","PRELOAD","PREPARE","PRESENT","PRESENTNNV","PRESENTV","PRESERVE","PRESERVE_OID","PRETTY","PREV","PREVIOUS","PRIMARY","PRINTBLOBTOCLOB","PRIOR","PRIORITY","PRIVATE","PRIVATE_SGA","PRIVILEGE","PRIVILEGED","PRIVILEGES","PROCEDURAL","PROCEDURE","PROCESS","PROFILE","PROGRAM","PROJECT","PROPAGATE","PROPERTY","PROTECTED","PROTECTION","PROTOCOL","PROXY","PRUNING","PUBLIC","PULL_PRED","PURGE","PUSH_HAVING_TO_GBY","PUSH_PRED","PUSH_SUBQ","PX_FAULT_TOLERANCE","PX_GRANULE","PX_JOIN_FILTER","QB_NAME","QUALIFY","QUARANTINE","QUARTERS","QUERY","QUERY_BLOCK","QUEUE","QUEUE_CURR","QUEUE_ROWP","QUIESCE","QUORUM","QUOTA","QUOTAGROUP","RANDOM","RANDOM_LOCAL","RANGE","RANK","RANKM","RAPIDLY","RATIO_TO_REPORT","RAW","RAWTOHEX","RAWTONHEX","RAWTOREF","RBA","RBO_OUTLINE","RDBA","READ","READS","READ_OR_WRITE","REAL","REALM","REBALANCE","REBUILD","RECONNECT","RECORDS_PER_BLOCK","RECOVER","RECOVERABLE","RECOVERY","RECYCLE","RECYCLEBIN","REDACTION","REDEFINE","REDO","REDUCED","REDUNDANCY","REF","REFERENCE","REFERENCED","REFERENCES","REFERENCING","REFRESH","REFTOHEX","REFTORAW","REF_CASCADE_CURSOR","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGISTER","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGULAR","REJECT","REKEY","RELATIONAL","RELATIVE","RELOCATE","RELY","REMAINDER","REMOTE","REMOTE_MAPPED","REMOVE","RENAME","REORDER_WIF","REPAIR","REPEAT","REPLACE","REPLICATION","REQUIRED","RESERVOIR_SAMPLING","RESET","RESETLOGS","RESIZE","RESOLVE","RESOLVER","RESOURCE","RESPECT","RESTART","RESTORE","RESTORE_AS_INTERVALS","RESTRICT","RESTRICTED","RESTRICT_ALL_REF_CONS","RESULT_CACHE","RESUMABLE","RESUME","RETENTION","RETRY_ON_ROW_CHANGE","RETURN","RETURNING","REUSE","REVERSE","REVOKE","REWRITE","REWRITE_OR_ERROR","RIGHT","RLS_FORCE","ROLE","ROLES","ROLESET","ROLLBACK","ROLLING","ROLLOVER","ROLLUP","ROOT","ROUND","ROUND_TIES_TO_EVEN","ROW","ROWDEPENDENCIES","ROWID","ROWIDTOCHAR","ROWIDTONCHAR","ROWID_MAPPING_TABLE","ROWNUM","ROWS","ROW_LENGTH","ROW_NUMBER","RPAD","RTRIM","RULE","RULES","RUNNING","SALT","SAMPLE","SAVE","SAVEPOINT","SAVE_AS_INTERVALS","SB4","SCALE","SCALE_ROWS","SCAN","SCAN_INSTANCES","SCHEDULER","SCHEMA","SCHEMACHECK","SCN","SCN_ASCENDING","SCOPE","SCRUB","SDO_GEOM_KEY","SDO_GEOM_MAX_X","SDO_GEOM_MAX_Y","SDO_GEOM_MAX_Z","SDO_GEOM_MBB","SDO_GEOM_MBR","SDO_GEOM_MIN_X","SDO_GEOM_MIN_Y","SDO_GEOM_MIN_Z","SDO_TOLERANCE","SD_ALL","SD_INHIBIT","SD_SHOW","SEARCH","SECOND","SECONDS","SECRET","SECUREFILE","SECUREFILE_DBA","SECURITY","SEED","SEGMENT","SEG_BLOCK","SEG_FILE","SELECT","SELECTIVITY","SELF","SEMIJOIN","SEMIJOIN_DRIVER","SEMI_TO_INNER","SENSITIVE","SEQUENCE","SEQUENCED","SEQUENTIAL","SERIAL","SERIALIZABLE","SERVERERROR","SERVICE","SERVICES","SERVICE_NAME_CONVERT","SESSION","SESSIONS_PER_USER","SESSIONTIMEZONE","SESSIONTZNAME","SESSION_CACHED_CURSORS","SET","SETS","SETTINGS","SET_GBY_PUSHDOWN","SET_TO_JOIN","SEVERE","SHARD","SHARDED","SHARDS","SHARDSPACE","SHARE","SHARED","SHARED_POOL","SHARE_OF","SHARING","SHELFLIFE","SHOW","SHRINK","SHUTDOWN","SIBLING","SIBLINGS","SID","SIGN","SIGNAL_COMPONENT","SIGNAL_FUNCTION","SIMPLE","SIN","SINGLE","SINGLETASK","SINH","SITE","SIZE","SKIP","SKIP_EXT_OPTIMIZER","SKIP_PROXY","SKIP_UNQ_UNUSABLE_IDX","SKIP_UNUSABLE_INDEXES","SMALLFILE","SMALLINT","SNAPSHOT","SOME","SORT","SOUNDEX","SOURCE","SOURCE_FILE_DIRECTORY","SOURCE_FILE_NAME_CONVERT","SPACE","SPECIFICATION","SPFILE","SPLIT","SPREADSHEET","SQL","SQLLDR","SQL_SCOPE","SQL_TRACE","SQL_TRANSLATION_PROFILE","SQRT","STALE","STANDALONE","STANDARD_HASH","STANDBY","STANDBYS","STANDBY_MAX_DATA_DELAY","STAR","START","STARTUP","STAR_TRANSFORMATION","STATE","STATEMENT","STATEMENTS","STATEMENT_ID","STATEMENT_QUEUING","STATIC","STATISTICS","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","STOP","STORAGE","STORAGE_INDEX","STORE","STREAM","STREAMS","STRICT","STRING","STRIP","STRIPE_COLUMNS","STRIPE_WIDTH","STRUCTURE","SUBMULTISET","SUBPARTITION","SUBPARTITIONING","SUBPARTITIONS","SUBPARTITION_REL","SUBQUERIES","SUBQUERY_PRUNING","SUBSCRIBE","SUBSET","SUBSTITUTABLE","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRC","SUCCESS","SUCCESSFUL","SUM","SUMMARY","SUPPLEMENTAL","SUPPRESS_LOAD","SUSPEND","SWAP_JOIN_INPUTS","SWITCH","SWITCHOVER","SYNC","SYNCHRONOUS","SYNONYM","SYSASM","SYSAUX","SYSBACKUP","SYSDATE","SYSDBA","SYSDG","SYSGUID","SYSKM","SYSOBJ","SYSOPER","SYSRAC","SYSTEM","SYSTEM_DEFINED","SYSTEM_STATS","SYSTIMESTAMP","SYS_AUDIT","SYS_CHECKACL","SYS_CHECK_PRIVILEGE","SYS_CONNECT_BY_PATH","SYS_CONTEXT","SYS_CTXINFOPK","SYS_CTX_CONTAINS2","SYS_CTX_MKIVIDX","SYS_DBURIGEN","SYS_DL_CURSOR","SYS_DM_RXFORM_CHR","SYS_DM_RXFORM_LAB","SYS_DM_RXFORM_NUM","SYS_DOM_COMPARE","SYS_DST_PRIM2SEC","SYS_DST_SEC2PRIM","SYS_ET_BFILE_TO_RAW","SYS_ET_BLOB_TO_IMAGE","SYS_ET_IMAGE_TO_BLOB","SYS_ET_RAW_TO_BFILE","SYS_EXTPDTXT","SYS_EXTRACT_UTC","SYS_FBT_INSDEL","SYS_FILTER_ACLS","SYS_FNMATCHES","SYS_FNREPLACE","SYS_GETTOKENID","SYS_GETXTIVAL","SYS_GET_ACLIDS","SYS_GET_COL_ACLIDS","SYS_GET_PRIVILEGES","SYS_GUID","SYS_MAKEXML","SYS_MAKE_XMLNODEID","SYS_MKXMLATTR","SYS_MKXTI","SYS_OPTLOBPRBSC","SYS_OPTXICMP","SYS_OPTXQCASTASNQ","SYS_OP_ADT2BIN","SYS_OP_ADTCONS","SYS_OP_ALSCRVAL","SYS_OP_ATG","SYS_OP_BIN2ADT","SYS_OP_BITVEC","SYS_OP_BL2R","SYS_OP_BLOOM_FILTER","SYS_OP_BLOOM_FILTER_LIST","SYS_OP_C2C","SYS_OP_CAST","SYS_OP_CEG","SYS_OP_CL2C","SYS_OP_COMBINED_HASH","SYS_OP_COMP","SYS_OP_CONVERT","SYS_OP_COUNTCHG","SYS_OP_CSCONV","SYS_OP_CSCONVTEST","SYS_OP_CSR","SYS_OP_CSX_PATCH","SYS_OP_CYCLED_SEQ","SYS_OP_DECOMP","SYS_OP_DESCEND","SYS_OP_DISTINCT","SYS_OP_DRA","SYS_OP_DSB_DESERIALIZE","SYS_OP_DSB_SERIALIZE","SYS_OP_DUMP","SYS_OP_DV_CHECK","SYS_OP_ENFORCE_NOT_NULL$","SYS_OP_EXTRACT","SYS_OP_GROUPING","SYS_OP_GUID","SYS_OP_HASH","SYS_OP_HCS_TABLE","SYS_OP_IIX","SYS_OP_ITR","SYS_OP_KEY_VECTOR_CREATE","SYS_OP_KEY_VECTOR_FILTER","SYS_OP_KEY_VECTOR_FILTER_LIST","SYS_OP_KEY_VECTOR_PAYLOAD","SYS_OP_KEY_VECTOR_SUCCEEDED","SYS_OP_KEY_VECTOR_USE","SYS_OP_LBID","SYS_OP_LOBLOC2BLOB","SYS_OP_LOBLOC2CLOB","SYS_OP_LOBLOC2ID","SYS_OP_LOBLOC2NCLOB","SYS_OP_LOBLOC2TYP","SYS_OP_LSVI","SYS_OP_LVL","SYS_OP_MAKEOID","SYS_OP_MAP_NONNULL","SYS_OP_MSR","SYS_OP_NICOMBINE","SYS_OP_NIEXTRACT","SYS_OP_NII","SYS_OP_NIX","SYS_OP_NOEXPAND","SYS_OP_NTCIMG$","SYS_OP_NUMTORAW","SYS_OP_OIDVALUE","SYS_OP_OPNSIZE","SYS_OP_PAR","SYS_OP_PARGID","SYS_OP_PARGID_1","SYS_OP_PART_ID","SYS_OP_PAR_1","SYS_OP_PIVOT","SYS_OP_R2O","SYS_OP_RAWTONUM","SYS_OP_RDTM","SYS_OP_REF","SYS_OP_RMTD","SYS_OP_ROWIDTOOBJ","SYS_OP_RPB","SYS_OP_TOSETID","SYS_OP_TPR","SYS_OP_TRTB","SYS_OP_UNDESCEND","SYS_OP_VECAND","SYS_OP_VECBIT","SYS_OP_VECOR","SYS_OP_VECTOR_GROUP_BY","SYS_OP_VECXOR","SYS_OP_VERSION","SYS_OP_VREF","SYS_OP_VVD","SYS_OP_XMLCONS_FOR_CSX","SYS_OP_XPTHATG","SYS_OP_XPTHIDX","SYS_OP_XPTHOP","SYS_OP_XTNN","SYS_OP_XTXT2SQLT","SYS_OP_ZONE_ID","SYS_ORDERKEY_DEPTH","SYS_ORDERKEY_MAXCHILD","SYS_ORDERKEY_PARENT","SYS_PARALLEL_TXN","SYS_PATHID_IS_ATTR","SYS_PATHID_IS_NMSPC","SYS_PATHID_LASTNAME","SYS_PATHID_LASTNMSPC","SYS_PATH_REVERSE","SYS_PLSQL_COUNT","SYS_PLSQL_CPU","SYS_PLSQL_IO","SYS_PXQEXTRACT","SYS_RAW_TO_XSID","SYS_REMAP_XMLTYPE","SYS_RID_ORDER","SYS_ROW_DELTA","SYS_SC_2_XMLT","SYS_SYNRCIREDO","SYS_TYPEID","SYS_UMAKEXML","SYS_XMLANALYZE","SYS_XMLCONTAINS","SYS_XMLCONV","SYS_XMLEXNSURI","SYS_XMLGEN","SYS_XMLINSTR","SYS_XMLI_LOC_ISNODE","SYS_XMLI_LOC_ISTEXT","SYS_XMLLOCATOR_GETSVAL","SYS_XMLNODEID","SYS_XMLNODEID_GETCID","SYS_XMLNODEID_GETLOCATOR","SYS_XMLNODEID_GETOKEY","SYS_XMLNODEID_GETPATHID","SYS_XMLNODEID_GETPTRID","SYS_XMLNODEID_GETRID","SYS_XMLNODEID_GETSVAL","SYS_XMLNODEID_GETTID","SYS_XMLTRANSLATE","SYS_XMLTYPE2SQL","SYS_XMLT_2_SC","SYS_XQBASEURI","SYS_XQCASTABLEERRH","SYS_XQCODEP2STR","SYS_XQCODEPEQ","SYS_XQCON2SEQ","SYS_XQCONCAT","SYS_XQDELETE","SYS_XQDFLTCOLATION","SYS_XQDOC","SYS_XQDOCURI","SYS_XQDURDIV","SYS_XQED4URI","SYS_XQENDSWITH","SYS_XQERR","SYS_XQERRH","SYS_XQESHTMLURI","SYS_XQEXLOBVAL","SYS_XQEXSTWRP","SYS_XQEXTRACT","SYS_XQEXTRREF","SYS_XQEXVAL","SYS_XQFB2STR","SYS_XQFNBOOL","SYS_XQFNCMP","SYS_XQFNDATIM","SYS_XQFNLNAME","SYS_XQFNNM","SYS_XQFNNSURI","SYS_XQFNPREDTRUTH","SYS_XQFNQNM","SYS_XQFNROOT","SYS_XQFORMATNUM","SYS_XQFTCONTAIN","SYS_XQFUNCR","SYS_XQGETCONTENT","SYS_XQINDXOF","SYS_XQINSERT","SYS_XQINSPFX","SYS_XQIRI2URI","SYS_XQLANG","SYS_XQLLNMFRMQNM","SYS_XQMKNODEREF","SYS_XQNILLED","SYS_XQNODENAME","SYS_XQNORMSPACE","SYS_XQNORMUCODE","SYS_XQNSP4PFX","SYS_XQNSPFRMQNM","SYS_XQPFXFRMQNM","SYS_XQPOLYABS","SYS_XQPOLYADD","SYS_XQPOLYCEL","SYS_XQPOLYCST","SYS_XQPOLYCSTBL","SYS_XQPOLYDIV","SYS_XQPOLYFLR","SYS_XQPOLYMOD","SYS_XQPOLYMUL","SYS_XQPOLYRND","SYS_XQPOLYSQRT","SYS_XQPOLYSUB","SYS_XQPOLYUMUS","SYS_XQPOLYUPLS","SYS_XQPOLYVEQ","SYS_XQPOLYVGE","SYS_XQPOLYVGT","SYS_XQPOLYVLE","SYS_XQPOLYVLT","SYS_XQPOLYVNE","SYS_XQREF2VAL","SYS_XQRENAME","SYS_XQREPLACE","SYS_XQRESVURI","SYS_XQRNDHALF2EVN","SYS_XQRSLVQNM","SYS_XQRYENVPGET","SYS_XQRYVARGET","SYS_XQRYWRP","SYS_XQSEQ2CON","SYS_XQSEQ2CON4XC","SYS_XQSEQDEEPEQ","SYS_XQSEQINSB","SYS_XQSEQRM","SYS_XQSEQRVS","SYS_XQSEQSUB","SYS_XQSEQTYPMATCH","SYS_XQSTARTSWITH","SYS_XQSTATBURI","SYS_XQSTR2CODEP","SYS_XQSTRJOIN","SYS_XQSUBSTRAFT","SYS_XQSUBSTRBEF","SYS_XQTOKENIZE","SYS_XQTREATAS","SYS_XQXFORM","SYS_XQ_ASQLCNV","SYS_XQ_ATOMCNVCHK","SYS_XQ_NRNG","SYS_XQ_PKSQL2XML","SYS_XQ_UPKXML2SQL","SYS_XSID_TO_RAW","SYS_ZMAP_FILTER","SYS_ZMAP_REFRESH","T","TABLE","TABLES","TABLESPACE","TABLESPACE_NO","TABLE_LOOKUP_BY_NL","TABLE_STATS","TABNO","TAG","TAN","TANH","TARGET","TBL$OR$IDX$PART$NUM","TEMPFILE","TEMPLATE","TEMPORARY","TEMP_TABLE","TENANT_ID","TEST","TEXT","THAN","THE","THEN","THREAD","THROUGH","TIER","TIES","TIME","TIMEOUT","TIMES","TIMESTAMP","TIMESTAMP_TO_NUMBER","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_OFFSET","TIMEZONE_REGION","TIME_ZONE","TIV_GB","TIV_SSF","TO","TOKEN","TOPLEVEL","TO_ACLID","TO_APPROX_COUNT_DISTINCT","TO_APPROX_PERCENTILE","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_BLOB","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIME","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_TIME_TZ","TO_UTC_TIMESTAMP_TZ","TO_YMINTERVAL","TRACE","TRACING","TRACKING","TRAILING","TRANSACTION","TRANSFORM_DISTINCT_AGG","TRANSITION","TRANSITIONAL","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIGGERS","TRIM","TRUE","TRUNC","TRUNCATE","TRUST","TRUSTED","TUNING","TX","TYPE","TYPENAME","TYPES","TZ_OFFSET","U","UB2","UBA","UCS2","UID","UNARCHIVED","UNBOUND","UNBOUNDED","UNCONDITIONAL","UNDER","UNDO","UNDROP","UNIFORM","UNINSTALL","UNION","UNIQUE","UNISTR","UNITE","UNIXTIME","UNLIMITED","UNLOAD","UNLOCK","UNMATCHED","UNNEST","UNNEST_INNERJ_DISTINCT_VIEW","UNNEST_NOSEMIJ_NODISTINCTVIEW","UNNEST_SEMIJ_VIEW","UNPACKED","UNPIVOT","UNPLUG","UNPROTECTED","UNQUIESCE","UNRECOVERABLE","UNRESTRICTED","UNSUBSCRIBE","UNTIL","UNUSABLE","UNUSED","UPDATABLE","UPDATE","UPDATED","UPDATEXML","UPD_INDEXES","UPD_JOININDEX","UPGRADE","UPPER","UPSERT","UROWID","USABLE","USAGE","USE","USER","USERENV","USERGROUP","USERS","USER_DATA","USER_DEFINED","USER_RECYCLEBIN","USER_TABLESPACES","USE_ANTI","USE_CONCAT","USE_CUBE","USE_DAGG_UNION_ALL_GSETS","USE_HASH","USE_HASH_AGGREGATION","USE_HASH_GBY_FOR_DAGGPSHD","USE_HASH_GBY_FOR_PUSHDOWN","USE_HIDDEN_PARTITIONS","USE_INVISIBLE_INDEXES","USE_MERGE","USE_MERGE_CARTESIAN","USE_NL","USE_NL_WITH_INDEX","USE_PARTITION_WISE_DISTINCT","USE_PARTITION_WISE_GBY","USE_PARTITION_WISE_WIF","USE_PRIVATE_OUTLINES","USE_SCALABLE_GBY_INVDIST","USE_SEMI","USE_STORED_OUTLINES","USE_TTT_FOR_GSETS","USE_VECTOR_AGGREGATION","USE_WEAK_NAME_RESL","USING","USING_NO_EXPAND","UTF16BE","UTF16LE","UTF32","UTF8","V1","V2","VALIDATE","VALIDATE_CONVERSION","VALIDATION","VALID_TIME_END","VALUE","VALUES","VARCHAR","VARCHAR2","VARIANCE","VARRAY","VARRAYS","VARYING","VAR_POP","VAR_SAMP","VECTOR","VECTOR_ENCODE","VECTOR_READ","VECTOR_READ_TRACE","VECTOR_TRANSFORM","VECTOR_TRANSFORM_DIMS","VECTOR_TRANSFORM_FACT","VERIFIER","VERIFY","VERSION","VERSIONING","VERSIONS","VERSIONS_ENDSCN","VERSIONS_ENDTIME","VERSIONS_OPERATION","VERSIONS_STARTSCN","VERSIONS_STARTTIME","VERSIONS_XID","VIEW","VIOLATION","VIRTUAL","VISIBILITY","VISIBLE","VOLUME","VSIZE","WAIT","WALLET","WEEK","WEEKS","WELLFORMED","WHEN","WHENEVER","WHERE","WHITESPACE","WIDTH_BUCKET","WITH","WITHIN","WITHOUT","WITH_EXPRESSION","WITH_PLSQL","WORK","WRAPPED","WRAPPER","WRITE","XDB_FASTPATH_INSERT","XID","XML","XML2OBJECT","XMLATTRIBUTES","XMLCAST","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLDIFF","XMLELEMENT","XMLEXISTS","XMLEXISTS2","XMLFOREST","XMLINDEX_REWRITE","XMLINDEX_REWRITE_IN_SELECT","XMLINDEX_SEL_IDX_TBL","XMLISNODE","XMLISVALID","XMLNAMESPACES","XMLPARSE","XMLPATCH","XMLPI","XMLQUERY","XMLQUERYVAL","XMLROOT","XMLSCHEMA","XMLSERIALIZE","XMLTABLE","XMLTOJSON","XMLTOKENSET","XMLTRANSFORM","XMLTRANSFORMBLOB","XMLTSET_DML_ENABLE","XMLTYPE","XML_DML_RWT_STMT","XPATHTABLE","XS","XS_SYS_CONTEXT","X_DYN_PRUNE","YEAR","YEARS","YES","ZONE","ZONEMAP","[","]","^","{","|","}",null,null],system_vars:["SQLERRM","SQLCODE","SYSDATE","USER","UID"]},vo={light:{id:"light",name:"Light V3",type:"light",colors:{bg:"#ffffff",fg:"#334155",caret:"#2563eb",selection:"#bfdbfe",lineHighlight:"#f1f5f9",gutterBg:"#ffffff",gutterFg:"#94a3b8"},syntax:{keyword:"#2563eb",keywordWeight:"bold",comment:"#94a3b8",string:"#059669",number:"#d97706",variable:"#7c3aed",function:"#db2777",operator:"#64748b"},ui:{"--bg-main":"#f9fafb","--bg-panel":"#ffffff","--bg-content":"#ffffff","--bg-header":"rgba(255,255,255,0.8)","--bg-hover":"#f8fafc","--bg-active":"#eff6ff","--text-primary":"#1e293b","--text-secondary":"#64748b","--text-muted":"#94a3b8","--border-main":"#e2e8f0","--border-sub":"#f1f5f9","--accent-primary":"#2563eb","--accent-secondary":"#4338ca","--selection-bg":"#dbeafe","--row-even":"#ffffff","--row-odd":"#fcfbfc","--row-hover":"rgba(239, 246, 255, 0.5)","--shadow-color":"rgba(0,0,0,0.05)"}},obsidian:{id:"obsidian",name:"Obsidian",type:"dark",colors:{bg:"#0F111A",fg:"#E6E6E6",caret:"#FF5252",selection:"#402c2c",lineHighlight:"#1A1D29",gutterBg:"#0F111A",gutterFg:"#4B5563"},syntax:{keyword:"#FF5252",keywordWeight:"bold",comment:"#6B7280",string:"#a5d6ff",number:"#FCD34D",variable:"#60A5FA",function:"#FF5252",operator:"#9CA3AF"},ui:{"--bg-main":"#090a10","--bg-panel":"#0F111A","--bg-content":"#0F111A","--bg-header":"rgba(15, 17, 26, 0.8)","--bg-hover":"#1A1D29","--bg-active":"rgba(255, 82, 82, 0.1)","--text-primary":"#E6E6E6","--text-secondary":"#9CA3AF","--text-muted":"#6B7280","--border-main":"#1F2937","--border-sub":"#1A1D29","--accent-primary":"#FF5252","--accent-secondary":"#EF4444","--selection-bg":"#402c2c","--row-even":"#0F111A","--row-odd":"#131520","--row-hover":"rgba(255, 82, 82, 0.05)","--shadow-color":"rgba(0,0,0,0.4)"}},vscode:{id:"vscode",name:"VS Dark",type:"dark",colors:{bg:"#1E1E1E",fg:"#D4D4D4",caret:"#007ACC",selection:"#264F78",lineHighlight:"#2D2D30",gutterBg:"#1E1E1E",gutterFg:"#858585"},syntax:{keyword:"#569CD6",keywordWeight:"normal",comment:"#6A9955",string:"#CE9178",number:"#B5CEA8",variable:"#9CDCFE",function:"#DCDCAA",operator:"#D4D4D4"},ui:{"--bg-main":"#1e1e1e","--bg-panel":"#252526","--bg-content":"#1E1E1E","--bg-header":"rgba(30, 30, 30, 0.8)","--bg-hover":"#2a2d2e","--bg-active":"#37373d","--text-primary":"#D4D4D4","--text-secondary":"#A6A6A6","--text-muted":"#606060","--border-main":"#333333","--border-sub":"#252526","--accent-primary":"#007ACC","--accent-secondary":"#005f9e","--selection-bg":"#264F78","--row-even":"#1E1E1E","--row-odd":"#252526","--row-hover":"#2a2d2e","--shadow-color":"rgba(0,0,0,0.3)"}},standard_light:{id:"standard_light",name:"Standard Light",type:"light",colors:{bg:"#FFFFFF",fg:"#24292e",caret:"#24292e",selection:"#BBDFFF",lineHighlight:"#F1F8FF",gutterBg:"#FFFFFF",gutterFg:"#D1D5DA"},syntax:{keyword:"#005CC5",keywordWeight:"bold",comment:"#6A737D",string:"#22863A",number:"#D73A49",variable:"#24292e",function:"#6F42C1",operator:"#5F6368"},ui:{"--bg-main":"#F6F8FA","--bg-panel":"#FFFFFF","--bg-content":"#FFFFFF","--bg-header":"rgba(255,255,255,0.9)","--bg-hover":"#F1F8FF","--bg-active":"#E1E4E8","--text-primary":"#24292e","--text-secondary":"#586069","--text-muted":"#6A737D","--border-main":"#e1e4e8","--border-sub":"#eaecef","--accent-primary":"#0366d6","--accent-secondary":"#005CC5","--selection-bg":"#BBDFFF","--row-even":"#FFFFFF","--row-odd":"#FAFBFC","--row-hover":"#F1F8FF","--shadow-color":"rgba(0,0,0,0.05)"}},dracula_plus:{id:"dracula_plus",name:"Dracula Plus",type:"dark",colors:{bg:"#282A36",fg:"#F8F8F2",caret:"#FF79C6",selection:"#44475A",lineHighlight:"#44475A",gutterBg:"#282A36",gutterFg:"#6272A4"},syntax:{keyword:"#FF79C6",keywordWeight:"bold",comment:"#6272A4",string:"#F1FA8C",number:"#BD93F9",variable:"#F8F8F2",function:"#8BE9FD",operator:"#50FA7B"},ui:{"--bg-main":"#21222C","--bg-panel":"#282A36","--bg-content":"#282A36","--bg-header":"rgba(40, 42, 54, 0.9)","--bg-hover":"#44475A","--bg-active":"#6272A4","--text-primary":"#F8F8F2","--text-secondary":"#BD93F9","--text-muted":"#6272A4","--border-main":"#44475A","--border-sub":"#21222C","--accent-primary":"#FF79C6","--accent-secondary":"#BD93F9","--selection-bg":"#44475A","--row-even":"#282A36","--row-odd":"#262831","--row-hover":"#44475A","--shadow-color":"rgba(0,0,0,0.4)"}}},pP=i=>{const e=LP({theme:i.type,settings:{background:i.colors.bg,foreground:i.colors.fg,caret:i.colors.caret,selection:i.colors.selection,selectionMatch:i.colors.selection,lineHighlight:i.colors.lineHighlight,gutterBackground:i.colors.gutterBg,gutterForeground:i.colors.gutterFg},styles:[{tag:u.keyword,color:i.syntax.keyword,fontWeight:i.syntax.keywordWeight},{tag:u.comment,color:i.syntax.comment,fontStyle:"italic"},{tag:u.string,color:i.syntax.string},{tag:u.number,color:i.syntax.number},{tag:u.definition(u.variableName),color:i.syntax.variable},{tag:u.function(u.variableName),color:i.syntax.function,fontWeight:"bold"},{tag:u.operator,color:i.syntax.operator},{tag:u.punctuation,color:i.syntax.operator}]}),t=G.theme({"& .cm-selectionLayer .cm-selectionBackground, & .cm-content ::selection":{backgroundColor:`${i.colors.selection} !important`},".cm-selectionMatch":{backgroundColor:`${i.colors.selection}44 !important`}},{dark:i.type==="dark"});return[e,t]},mP=({index:i,style:e,data:t})=>{const{rows:s,columnOrder:r,visibleColumns:n,columnWidths:o}=t,E=s[i];if(!E)return N.jsx("div",{style:e});const l=a=>{if(a==null)return"";if(typeof a!="string")return a;if(/^\d{4}-\d{2}-\d{2}/.test(a)){const h=new Date(a);if(!isNaN(h.getTime())){const A=String(h.getDate()).padStart(2,"0"),R=String(h.getMonth()+1).padStart(2,"0"),S=h.getFullYear(),c=String(h.getHours()).padStart(2,"0"),O=String(h.getMinutes()).padStart(2,"0"),f=String(h.getSeconds()).padStart(2,"0");return c==="00"&&O==="00"&&f==="00"?`${A}/${R}/${S}`:`${A}/${R}/${S} ${c}:${O}:${f}`}}return a};return N.jsx("div",{style:{...e,backgroundColor:i%2===0?"var(--row-even)":"var(--row-odd)",borderColor:"var(--border-sub)"},className:"flex border-b transition-colors group items-center hover:bg-[var(--row-hover)]",children:r.map(a=>{if(!n[a])return null;const T=t.metaData?t.metaData.findIndex(S=>S.name===a):-1,h=o&&o[a]||150,A=E[T],R=l(A);return N.jsx("div",{className:"px-4 py-2 text-[13px] font-mono overflow-hidden text-ellipsis whitespace-nowrap border-r border-transparent group-hover:border-[var(--border-sub)] transition-colors text-[var(--text-secondary)]",style:{width:`${h}px`,minWidth:`${h}px`,maxWidth:`${h}px`},title:String(A||""),children:A===null?N.jsx("span",{className:"opacity-40 text-xs select-none",children:"null"}):R},a)})})},DP=({isVisible:i,tabs:e,setTabs:t,activeTabId:s,setActiveTabId:r,savedQueries:n,setSavedQueries:o,onDisconnect:E,connection:l})=>{const{theme:a}=F.useContext(rO),{apiUrl:T}=nO(),[h,A]=F.useState(null),R=e.find(I=>I.id===s)||e[0];F.useEffect(()=>{R&&!R.connection&&l&&Je({connection:l})},[s,l]);const[S,c]=F.useState(100),[O,f]=F.useState(""),[C,_]=F.useState(!1),[g,m]=F.useState(!1),[U,b]=F.useState(!0),[W,v]=F.useState(!1),[q,X]=F.useState("saved"),[w,K]=F.useState([]),[$,Z]=F.useState(""),[Re,ne]=F.useState(!1),[fe,se]=F.useState({}),[Ae,ue]=F.useState(null),[pe,Ve]=F.useState(!1),[At,mt]=F.useState(!1),[Ns,Is]=F.useState(null),[gn,Ll]=F.useState(""),[pl,ki]=F.useState(!1),[Wi,Xi]=F.useState({user:"",password:"",connectString:"localhost/XEPDB1"}),[Ki,Sc]=F.useState("light"),[ml,Pn]=F.useState(!1);F.useEffect(()=>{const I=vo[Ki];if(!I)return;const P=Mn.current;P&&Object.entries(I.ui).forEach(([M,H])=>{P.style.setProperty(M,H)})},[Ki]);const cc=I=>{Is(I.id),Ll(I.title)},Oc=(I,P)=>{I.key==="Enter"?Dl(P):I.key==="Escape"&&Is(null)},Dl=I=>{gn.trim()&&t(P=>P.map(M=>M.id===I?{...M,title:gn.trim()}:M)),Is(null)},Js=F.useRef(null),Qs=F.useRef(null);F.useRef(null);const Mn=F.useRef(null),[qs,Nc]=F.useState(null),me=(I,P="success",M=3e3)=>{A({message:I,type:P}),setTimeout(()=>A(null),M)},Je=I=>{t(P=>P.map(M=>M.id===s?{...M,...I}:M))},[Ic,fc]=F.useState(""),[uc,dc]=F.useState([]),[$i,gl]=F.useState(null),[Pl,Ml]=F.useState([]),[gP,Ul]=F.useState(!1),[Qt,bl]=F.useState({}),Cc=oO.useMemo(()=>({...Qt}),[Qt]),_c=I=>{let P=I.matchBefore(/[\w\.$]*/);if(!P||P.from===P.to&&!I.explicit)return null;const M=[];return Zt&&(Zt.keywords&&M.push(...Zt.keywords.map(H=>({label:H,type:"keyword",boost:-1}))),Zt.system_vars&&M.push(...Zt.system_vars.map(H=>({label:H,type:"variable"}))),Zt.functions&&M.push(...Zt.functions.map(H=>({label:H,type:"function"})))),{from:P.from,options:M}},[Bl,Lc]=F.useState({}),[Ji,Gl]=F.useState([]),[Qi,pc]=F.useState({}),[qi,mc]=F.useState(!1),[yl,PP]=F.useState(!1),[ji,xl]=F.useState(null),Dc=I=>{if(!I||!I.metaData||!I.rows)return{};const P={},M=400,H=100,ie=8;return I.metaData.forEach((J,le)=>{let de=J.name.length;(I.rows||[]).slice(0,50).forEach(wl=>{if(!wl)return;const Bn=wl[le];if(Bn!=null){const Vl=String(Bn).length;Vl>de&&(de=Vl)}});const jc=Math.min(M,Math.max(H,de*ie+30));P[J.name]=jc}),P},gc=I=>{if(!R.results)return;const P=R.results.metaData.findIndex(J=>J.name===I);if(P===-1)return;let M=I.length;(R.results.rows||[]).forEach(J=>{if(!J)return;const le=J[P];if(le!=null){const de=String(le).length;de>M&&(M=de)}});const ie=Math.min(800,Math.max(100,M*8+30));se(J=>({...J,[I]:ie}))};F.useEffect(()=>{if(R.results&&R.results.metaData){const I={},P=R.results.metaData.map(H=>H.name);R.results.metaData.forEach(H=>I[H.name]=!0),Lc(I),Gl(P);const M=Dc(R.results);se(M)}},[R.results]);const js=()=>{const I=R.connection||l;return I?{"x-db-connection":JSON.stringify(I)}:{}},Pc=async(I="")=>{Ul(!0);try{const M=await(await fetch(`${T}/api/tables?search=${encodeURIComponent(I)}`,{headers:js()})).json();dc(M);const H={...Qt};M.forEach(ie=>{H[ie]||(H[ie]=[])}),bl(H)}catch(P){console.error("Failed to fetch schema tables",P)}finally{Ul(!1)}},Mc=async I=>{if($i===I){gl(null),Ml([]);return}gl(I);try{const M=await(await fetch(`${T}/api/columns/${encodeURIComponent(I)}`,{headers:js()})).json();Ml(M),bl(H=>({...H,[I]:M.map(ie=>ie.name)}))}catch(P){console.error("Failed to fetch columns",P)}},Uc=I=>{Je({sqlContent:R.sqlContent+" "+I}),Qs.current&&Qs.current.focus()},bc=()=>{document.fullscreenElement?(document.exitFullscreen(),v(!1)):(Mn.current.requestFullscreen().catch(I=>{console.error(`Error attempting to enable fullscreen: ${I.message}`)}),v(!0))};F.useEffect(()=>{const I=()=>{document.fullscreenElement||v(!1)};return document.addEventListener("fullscreenchange",I),()=>document.removeEventListener("fullscreenchange",I)},[]);const zs=F.useRef(null),Hl=()=>{const I=Qs.current;if(!I)return R.sqlContent;const{state:P}=I,{selection:M}=P;if(!M.main.empty)return P.sliceDoc(M.main.from,M.main.to);const H=P.doc.toString(),ie=M.main.head;let J=0;for(let Oe=ie-1;Oe>=0;Oe--)if(H[Oe]===";"){J=Oe+1;break}let le=H.length;for(let Oe=ie;Oe<H.length;Oe++)if(H[Oe]===";"){le=Oe;break}return H.slice(J,le).trim()||R.sqlContent},Fl=async()=>{Je({loading:!0,error:null,results:null,totalRecords:void 0}),zs.current&&zs.current.abort(),zs.current=new AbortController;const I=zs.current.signal;try{const M=Hl().trim().replace(/;+\s*$/,"");if(!M)return me("Nenhum comando SQL encontrado.","warning");const H=R.connection||l,J=await(await fetch("http://127.0.0.1:3001/api/query",{method:"POST",headers:{"Content-Type":"application/json",...js()},body:JSON.stringify({sql:M,limit:S,filter:yl?Qi:null,connection:H}),signal:I})).json();if(J.error)throw new Error(J.error);const le={...J,rows:Array.isArray(J.rows)?J.rows:[],metaData:Array.isArray(J.metaData)?J.metaData:[]};J.rowsAffected!==void 0?me(`Sucesso. Linhas afetadas: ${J.rowsAffected}`):!J.rows&&!J.metaData&&me("Comando executado com sucesso."),Je({results:le,loading:!1});try{const Oe=await(await fetch("http://127.0.0.1:3001/api/query/count",{method:"POST",headers:{"Content-Type":"application/json",...js()},body:JSON.stringify({sql:M,connection:H}),signal:I})).json();Oe.count!==void 0&&Je({totalRecords:Oe.count})}catch{}}catch(P){P.name!=="AbortError"&&Je({error:P.message,loading:!1})}finally{zs.current=null}},Bc=async()=>{const P=Hl().trim().replace(/;+\s*$/,"");if(!P)return me("Selecione uma query para explicar.","warning");mt(!0);try{const M=R.connection||l,ie=await(await fetch(`${T}/api/explain`,{method:"POST",headers:{"Content-Type":"application/json",...js()},body:JSON.stringify({sql:P,connection:M})})).json();if(ie.error)throw new Error(ie.error);ue(ie.lines),Ve(!0)}catch(M){me("Erro ao gerar Explain Plan: "+M.message,"error")}finally{mt(!1)}},Yl=()=>{if(!O)return alert("Por favor, insira um nome para a query.");const I={id:Date.now(),name:O,title:O,sql:R.sqlContent};o([...n,I]),_(!1),f(""),me("Query salva!")},Gc=I=>{window.confirm("Tem certeza que deseja excluir esta query?")&&o(n.filter(P=>P.id!==I))},yc=I=>{Je({sqlContent:I.sql}),f(I.name)},xc=()=>{const I=Date.now();t([...e,{id:I,title:`Query ${e.length+1}`,sqlContent:"",results:null,connection:l}]),r(I)},Hc=(I,P)=>{if(I.stopPropagation(),e.length===1)return t([{...e[0],sqlContent:"",results:null,error:null}]);const M=e.filter(H=>H.id!==P);t(M),s===P&&r(M[M.length-1].id)},Un=(()=>{if(!R.results)return[];const I=Qi||{};let P=!1;for(const M in I)if(Object.prototype.hasOwnProperty.call(I,M)&&I[M]&&String(I[M]).trim()!==""){P=!0;break}return!P||yl?R.results.rows||[]:(R.results.rows||[]).filter(M=>Ji.every((H,ie)=>{const J=I[H];if(!J||!R.results.metaData)return!0;const le=R.results.metaData.findIndex(Oe=>Oe.name===H);return le===-1?!0:String(M[le]||"").toLowerCase().includes(String(J).toLowerCase())}))})(),Fc=()=>{const I=new Date,P=I.getFullYear(),M=String(I.getMonth()+1).padStart(2,"0"),H=String(I.getDate()).padStart(2,"0"),ie=String(I.getHours()).padStart(2,"0"),J=String(I.getMinutes()).padStart(2,"0"),le=String(I.getSeconds()).padStart(2,"0");return`${P}-${M}-${H}_${ie}-${J}-${le}`},Yc=I=>{if(I==null)return"";if(typeof I!="string")return I;if(/^\d{4}-\d{2}-\d{2}/.test(I)){const M=new Date(I);if(!isNaN(M.getTime())){const H=String(M.getDate()).padStart(2,"0"),ie=String(M.getMonth()+1).padStart(2,"0"),J=M.getFullYear(),le=String(M.getHours()).padStart(2,"0"),de=String(M.getMinutes()).padStart(2,"0"),Oe=String(M.getSeconds()).padStart(2,"0");return le==="00"&&de==="00"&&Oe==="00"?`${H}/${ie}/${J}`:`${H}/${ie}/${J} ${le}:${de}:${Oe}`}}return I},vc=async(I,P,M)=>{if(window.electronAPI&&window.electronAPI.saveFile){const H=await window.electronAPI.saveFile({filename:I,content:P,type:M});H&&(me("Arquivo salvo!"),window.electronAPI.showItemInFolder(H))}else{let H;H=new Blob([P],{type:"text/csv;charset=utf-8"}),OO.saveAs(H,I),me("Download concluído!")}},wc=async I=>{if(!R.results||!R.results.rows||R.results.rows.length===0)return alert("Sem dados.");me("Gerando arquivo...","info",0),setTimeout(async()=>{try{const P=R.results.metaData.map(de=>de.name),M=Un.map(de=>de.map(Oe=>Yc(Oe))),H=[P,...M],ie=`exportacao_${Fc()}.${I}`;let J;if(I!=="xlsx"){if(I==="csv"){const de=Ql.aoa_to_sheet(H);J=Ql.sheet_to_csv(de)}}const le=await vc(ie,J,I)}catch(P){me("Falha: "+P.message,"error")}},100)},Vc=(I,P)=>{xl(P),I.dataTransfer.effectAllowed="move"},kc=(I,P)=>{if(I.preventDefault(),!ji||ji===P)return;const M=[...Ji],H=M.indexOf(ji),ie=M.indexOf(P);M.splice(H,1),M.splice(ie,0,ji),Gl(M)},Wc=()=>xl(null),Xc=()=>{try{const I=Ad(R.sqlContent,{language:"plsql",keywordCase:"upper",linesBetweenQueries:2});Je({sqlContent:I})}catch{me("Erro ao formatar","error")}},Kc=async I=>{if(I&&I.preventDefault(),!$.trim())return;const P={role:"user",content:$};K(M=>[P,...M]),Z(""),ne(!0);try{const M=Object.keys(Qt||{}).reduce((J,le)=>(Qt&&Qt[le]&&(J[le]=Qt[le]),J),{}),ie=await(await fetch(`${T}/api/ai/sql/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:P.content,schemaContext:M})})).json();K(J=>[{role:"assistant",content:ie.text},...J])}catch{K(H=>[{role:"assistant",content:"Erro na comunicação."},...H])}finally{ne(!1)}},$c=async()=>{if(R.error){ne(!0);try{const P=await(await fetch(`${T}/api/ai/sql/fix`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:R.sqlContent,error:R.error})})).json(),M=P.text.match(/```sql\s*([\s\S]*?)\s*```/);M&&M[1]&&(Je({sqlContent:M[1].trim()}),me("SQL Corrigido!","success")),X("chat"),K(H=>[{role:"system",content:`**Sugestão de Correção:**

${P.text}`},...H])}catch{me("Falha ao corrigir","error")}finally{ne(!1)}}},Jc=async()=>{if(R.sqlContent){ne(!0);try{const P=await(await fetch(`${T}/api/ai/sql/explain`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:R.sqlContent})})).json();X("chat"),K(M=>[{role:"system",content:`**Explicação:**

${P.text}`},...M])}catch{me("Erro","error")}finally{ne(!1)}}},Qc=async()=>{if(R.sqlContent){ne(!0);try{const P=await(await fetch(`${T}/api/ai/sql/optimize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:R.sqlContent})})).json();let M=P.text;const H=P.text.match(/```sql\n([\s\S]+?)\n```/);H&&H[1]&&(M=H[1]),Je({sqlContent:M}),me("SQL Otimizado!","success")}catch{me("Erro","error")}finally{ne(!1)}}},qc=()=>!pe||!Ae?null:N.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[N.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>Ve(!1)}),N.jsxs(Zi.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col overflow-hidden relative",children:[N.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:N.jsx(ql,{size:20})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Visual Explain Plan"}),N.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Análise de execução da query"})]})]}),N.jsx("button",{onClick:()=>Ve(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-lg transition-colors",children:N.jsx(Gn,{size:20,className:"text-slate-500"})})]}),N.jsx("div",{className:"flex-1 overflow-auto p-6 bg-slate-100 dark:bg-slate-900 custom-scrollbar",children:N.jsx("div",{className:"space-y-2",children:Ae.map((I,P)=>{const M=I.includes("TABLE ACCESS FULL"),H=I.includes("CARTESIAN");return N.jsxs("div",{className:`
                                            font-mono text-xs px-4 py-2 border-l-4 rounded-r-md shadow-sm transition-all hover:translate-x-1
                                            ${M?"bg-red-50 dark:bg-red-900/10 border-red-500 text-red-900 dark:text-red-200":H?"bg-orange-50 dark:bg-orange-900/10 border-orange-500 text-orange-900 dark:text-orange-200":"bg-white dark:bg-slate-800 border-indigo-400 text-slate-700 dark:text-slate-300"}
                                        `,children:[N.jsx("div",{className:"whitespace-pre-wrap",children:I}),M&&N.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[10px] font-bold text-red-600 dark:text-red-400",children:[N.jsx(fO,{size:12})," ALERTA: Leitura Completa de Tabela detectada. Pode ser lento em grandes volumes."]})]},P)})})})]})]}),vl=I=>{Js.current&&(Js.current.scrollLeft=I.currentTarget.scrollLeft)};F.useEffect(()=>{if(qs)return Js.current&&(Js.current.scrollLeft=qs.scrollLeft),qs.addEventListener("scroll",vl),()=>qs.removeEventListener("scroll",vl)},[qs]);const[bn,Zs]=F.useState("unknown");return F.useEffect(()=>{let I=!0;return(async()=>{if(!R.connection){I&&Zs("unknown");return}try{Zs("connected")}catch{I&&Zs("error")}})(),()=>{I=!1}},[R.connection]),F.useEffect(()=>{R.error&&R.error.includes&&(R.error.includes("ORA-03113")||R.error.includes("Network"))&&Zs("error")},[R.error]),N.jsx(EO,{children:N.jsxs("div",{className:`space-y-4 relative h-full flex flex-col ${a.bg}`,children:[qc(),h&&N.jsxs("div",{className:`fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-xl z-[9999] animate-bounce-up text-white font-bold flex items-center ${h.type==="error"?"bg-red-500":"bg-emerald-500"}`,children:[h.type==="error"?"🚫":"✅"," ",N.jsx("span",{className:"ml-2",children:h.message})]}),Wi.showFullForm&&N.jsx("div",{className:"fixed inset-0 bg-black/60 z-[10000] flex items-center justify-center backdrop-blur-sm p-8",children:N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-5xl h-[80vh] overflow-hidden relative flex flex-col",children:[N.jsx("button",{onClick:()=>Xi({...Wi,showFullForm:!1}),className:"absolute top-4 right-4 z-50 p-2 bg-white/50 hover:bg-white rounded-full text-gray-500 hover:text-red-500 transition-all",children:N.jsx(Gn,{size:24})}),N.jsx(lO,{onConnect:I=>{Je({connection:I}),Xi({...Wi,showFullForm:!1}),me(`Conectado a ${I.connectionName||I.user}`)}})]})}),g&&N.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center backdrop-blur-sm",children:N.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center",children:[N.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent mb-4"}),N.jsx("p",{className:"text-gray-800 font-bold text-lg",children:"Exportando dados..."})]})}),N.jsx("div",{ref:Mn,className:"flex flex-col h-full bg-[var(--bg-main)] relative overflow-hidden",children:N.jsx("div",{className:`flex-1 overflow-hidden flex flex-col relative ${W?"p-0":"p-2"}`,children:N.jsx("div",{className:`bg-[var(--bg-panel)] shadow-[0_0_0_1px_var(--border-main)] flex-1 flex flex-col overflow-hidden relative ${W?"rounded-none border-0":"rounded-2xl"}`,children:N.jsxs(kl,{direction:"horizontal",className:"h-full",children:[N.jsx(zi,{defaultSize:80,minSize:30,className:"flex flex-col h-full overflow-hidden",children:N.jsxs("div",{className:"flex flex-col h-full",children:[N.jsxs("div",{className:"flex items-center w-full border-b border-[var(--border-main)] px-2 pt-2 gap-2",children:[N.jsxs("div",{className:"flex-1 flex items-end gap-1 overflow-x-auto no-scrollbar px-2 mask-linear-fade",children:[e.map(I=>N.jsxs("div",{onClick:()=>r(I.id),onDoubleClick:()=>cc(I),className:`
                                                            group relative flex items-center gap-2 px-5 py-3 text-xs font-bold rounded-t-2xl cursor-pointer transition-all select-none min-w-[140px] max-w-[240px] border-t border-x
                                                            ${s===I.id?"bg-[var(--bg-panel)] text-[var(--text-primary)] border-[var(--border-main)] border-b-[var(--bg-panel)] z-10 shadow-[0_-2px_10px_var(--shadow-color)] pt-3.5":"bg-[var(--bg-hover)] text-[var(--text-muted)] border-transparent hover:bg-[var(--bg-panel)] hover:text-[var(--text-secondary)] mb-0.5"}
                                                        `,children:[s===I.id&&N.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] rounded-t-full"}),I.loading?N.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent-primary)] animate-pulse"}):N.jsx("div",{className:`w-2 h-2 rounded-full ${s===I.id?"bg-[var(--accent-secondary)]":"bg-slate-300 group-hover:bg-slate-400"}`}),Ns===I.id?N.jsx("input",{autoFocus:!0,value:gn,onChange:P=>Ll(P.target.value),onKeyDown:P=>Oc(P,I.id),onBlur:()=>Dl(I.id),className:"bg-transparent outline-none w-full border-b border-[var(--accent-primary)] text-[var(--text-primary)]",onClick:P=>P.stopPropagation()}):N.jsx("span",{className:"truncate flex-1 font-medium",children:I.title}),N.jsx("button",{onClick:P=>Hc(P,I.id),className:`p-1 rounded-md hover:bg-red-50 hover:text-red-500 transition-all ${s===I.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:N.jsx(Gn,{size:12,strokeWidth:3})})]},I.id)),N.jsx("button",{onClick:xc,className:"p-2 mb-1.5 ml-1 text-[var(--text-muted)] hover:text-[var(--accent-primary)] hover:bg-[var(--bg-active)] rounded-xl transition-all",title:"Nova Aba",children:N.jsx(Wl,{size:18,strokeWidth:2.5})})]}),N.jsxs("div",{className:"flex items-center gap-3 pr-4 pb-1.5 pt-1",children:[N.jsxs("div",{className:"relative group/conn",children:[N.jsxs("button",{onClick:()=>{Xi(R.connection||l),ki(!pl)},className:`
                                                            flex items-center gap-2.5 px-4 py-2 text-xs font-bold rounded-full transition-all border ring-2 ring-transparent
                                                            ${bn==="error"?"bg-red-50 text-red-600 border-red-100 hover:bg-red-100":"bg-slate-50 text-slate-600 border-slate-100 hover:border-blue-200 hover:text-blue-700 hover:bg-white hover:shadow-sm"}
                                                        `,children:[N.jsx("div",{className:`p-1 rounded-md ${bn==="error"?"bg-red-200":"bg-white shadow-sm"}`,children:N.jsx(yn,{size:12,className:bn==="error"?"text-red-600":"text-blue-600"})}),N.jsx("span",{className:"truncate max-w-[120px]",children:R.connection?.connectionName||"Selecionar Banco"})]}),N.jsx(xn,{children:pl&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>ki(!1)}),N.jsxs(Zi.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute top-12 right-0 z-[100] w-72 bg-[var(--bg-panel)] backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_-10px_var(--shadow-color)] border border-[var(--border-main)] p-2",children:[N.jsx("div",{className:"px-3 py-2 text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-widest mb-1",children:"Meus Bancos"}),N.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:JSON.parse(localStorage.getItem("oracle_connections")||"[]").map((I,P)=>N.jsxs("button",{onClick:()=>{const M={...I,password:Xl(I.password),connectString:I.isDefault?Xl(I.connectString):I.connectString};Je({connection:M}),ki(!1),Zs("connected"),me(`Conectado a ${I.connectionName}`)},className:`w-full flex items-center gap-3 p-2.5 rounded-xl transition-all text-left group
                                                                                    ${R.connection?.id===I.id?"bg-[var(--bg-active)] text-[var(--accent-primary)]":"hover:bg-[var(--bg-hover)] text-[var(--text-secondary)]"}
                                                                                `,children:[N.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${R.connection?.id===I.id?"bg-[var(--bg-main)]":"bg-[var(--bg-main)] group-hover:bg-[var(--bg-panel)] group-hover:shadow-sm"}`,children:N.jsx(yn,{size:14})}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("div",{className:"font-bold text-xs truncate",children:I.connectionName}),N.jsx("div",{className:"text-[10px] opacity-70 truncate",children:I.user})]}),R.connection?.id===I.id&&N.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})]},I.id||P))}),N.jsx("div",{className:"border-t border-[var(--border-sub)] mt-2 pt-2",children:N.jsxs("button",{onClick:()=>{ki(!1),Xi({...Wi,showFullForm:!0})},className:"w-full py-2.5 rounded-xl border border-dashed border-[var(--border-sub)] text-[var(--text-muted)] hover:text-[var(--accent-primary)] hover:border-[var(--accent-primary)] hover:bg-[var(--bg-active)] text-xs font-bold transition-all flex items-center justify-center gap-2",children:[N.jsx(Wl,{size:14})," Nova Conexão"]})})]})]})})]}),N.jsx("button",{onClick:()=>b(!U),className:`p-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-main)] hover:bg-[var(--bg-hover)] border border-transparent hover:border-[var(--border-sub)] rounded-lg transition-all ${U?"":"text-[var(--accent-primary)] bg-[var(--bg-active)] border-[var(--border-sub)]"}`,title:U?"Ocultar Menu":"Mostrar Menu",children:U?N.jsx(_O,{size:16}):N.jsx(pO,{size:16})}),N.jsx("button",{onClick:bc,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-main)] hover:bg-[var(--bg-hover)] border border-transparent hover:border-[var(--border-main)] rounded-lg transition-all",children:W?N.jsx(dO,{size:16}):N.jsx(aO,{size:16})}),N.jsxs("div",{className:"relative",children:[N.jsx("button",{onClick:()=>Pn(!ml),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] bg-[var(--bg-main)] hover:bg-[var(--bg-hover)] border border-transparent hover:border-[var(--border-main)] rounded-lg transition-all",title:"Alterar Tema",children:N.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-[var(--accent-primary)] to-[var(--accent-secondary)]"})}),N.jsx(xn,{children:ml&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-[90]",onClick:()=>Pn(!1)}),N.jsx(Zi.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute top-10 right-0 z-[100] w-40 bg-[var(--bg-panel)] rounded-xl shadow-xl border border-[var(--border-main)] p-1 overflow-hidden",children:Object.values(vo).map(I=>N.jsxs("button",{onClick:()=>{Sc(I.id),Pn(!1)},className:`w-full text-left px-3 py-2 text-xs font-semibold rounded-lg flex items-center gap-2 transition-all ${Ki===I.id?"bg-[var(--bg-active)] text-[var(--accent-primary)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-primary)]"}`,children:[N.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:I.colors.caret}}),I.name]},I.id))})]})})]})]})]}),N.jsxs(kl,{direction:"vertical",className:"flex-1",children:[N.jsxs(zi,{defaultSize:45,minSize:20,className:"flex flex-col relative bg-[var(--bg-panel)] group/editor",children:[N.jsx("div",{className:"absolute inset-0 bg-grid-slate-50/[0.05] pointer-events-none"}),N.jsx("div",{className:"flex-1 relative font-mono text-[13px] overflow-hidden",onClick:()=>Qs.current?.focus(),children:i&&N.jsx(nc,{value:R.sqlContent,height:"100%",theme:pP(vo[Ki]),extensions:[CP({schema:Cc,dialect:_P,upperCaseKeywords:!0}),ZS({override:[_c]}),Fi.of([{key:"F8",run:()=>(Fl(),!0)},...BS,...nS])],onChange:I=>Je({sqlContent:I}),onCreateEditor:I=>{Qs.current=I},basicSetup:{drawSelection:!1,lineNumbers:!0,highlightActiveLineGutter:!0,highlightActiveLine:!0,foldGutter:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightSelectionMatches:!0}})}),N.jsx("div",{className:"absolute bottom-4 right-6 flex items-center gap-3 z-30 pointer-events-none",children:N.jsxs("div",{className:"bg-[var(--bg-header)] backdrop-blur-md shadow-[0_8px_30px_var(--shadow-color)] border border-[var(--border-sub)] p-1.5 rounded-2xl flex items-center gap-2 pointer-events-auto",children:[N.jsxs("button",{onClick:Fl,disabled:!R.sqlContent||R.loading,className:`
                                                                px-6 py-2.5 rounded-xl font-bold text-white shadow-lg text-xs tracking-wide flex items-center gap-2 transition-all active:scale-95
                                                                ${R.loading?"bg-[var(--bg-active)] cursor-wait opacity-70":"bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] hover:shadow-lg hover:-translate-y-0.5"}
                                                            `,children:[R.loading?N.jsx("span",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}):N.jsx(DO,{size:14,fill:"currentColor"}),N.jsx("span",{className:"mr-1",children:R.loading?"RODANDO...":"EXECUTAR"})]}),N.jsx("div",{className:"w-px h-6 bg-[var(--border-sub)] mx-1"}),N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx("button",{onClick:Xc,className:"p-2 text-[var(--text-muted)] hover:text-[#007acc] hover:bg-[var(--bg-active)] rounded-lg transition-colors",title:"Formatar (Beautify)",children:N.jsx("span",{className:"font-mono text-[10px] font-bold",children:"{}"})}),N.jsx("button",{onClick:Jc,className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-secondary)] hover:bg-[var(--bg-active)] rounded-lg transition-colors",title:"Explicar com IA",children:N.jsx(Kl,{size:16})}),N.jsx("button",{onClick:Qc,className:"p-2 text-[var(--text-muted)] hover:text-emerald-500 hover:bg-[var(--bg-active)] rounded-lg transition-colors",title:"Otimizar Query",children:N.jsx(jl,{size:16})}),N.jsx("button",{onClick:Bc,disabled:At,className:"p-2 text-[var(--text-muted)] hover:text-blue-500 hover:bg-[var(--bg-active)] rounded-lg transition-colors relative",title:"Visual Explain Plan",children:At?N.jsx("span",{className:"w-4 h-4 rounded-full border-2 border-blue-500 border-t-transparent animate-spin block"}):N.jsx(ql,{size:16})})]}),N.jsx("div",{className:"w-px h-6 bg-[var(--border-sub)] mx-1"}),N.jsxs("select",{value:S,onChange:I=>c(I.target.value==="all"?"all":Number(I.target.value)),className:"bg-transparent text-xs font-semibold text-[var(--text-secondary)] outline-none cursor-pointer hover:text-[var(--text-primary)] pr-2",children:[N.jsx("option",{value:100,className:"bg-[var(--bg-panel)]",children:"100 linhas"}),N.jsx("option",{value:500,className:"bg-[var(--bg-panel)]",children:"500 linhas"}),N.jsx("option",{value:1e3,className:"bg-[var(--bg-panel)]",children:"1k linhas"}),N.jsx("option",{value:"all",className:"bg-[var(--bg-panel)]",children:"Todas"})]})]})})]}),N.jsx($l,{className:"h-1.5 bg-[var(--bg-main)] hover:bg-[var(--bg-active)] transition-colors cursor-row-resize flex justify-center items-center group relative z-20",children:N.jsx("div",{className:"w-12 h-1 rounded-full bg-[var(--border-sub)] group-hover:bg-[var(--accent-primary)] transition-colors"})}),N.jsxs(zi,{defaultSize:55,minSize:20,className:"flex flex-col bg-[var(--bg-panel)] relative",children:[R.error&&N.jsx("div",{className:"absolute top-0 left-0 right-0 z-40 bg-red-50/95 backdrop-blur-sm border-b border-red-100 p-4 animate-in slide-in-from-top-2",children:N.jsxs("div",{className:"flex items-start gap-3",children:[N.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-lg shrink-0",children:N.jsx(jl,{size:18})}),N.jsxs("div",{className:"flex-1",children:[N.jsx("h4",{className:"font-bold text-red-900 text-sm",children:"Erro na Execução"}),N.jsx("p",{className:"font-mono text-xs text-red-700 mt-1",children:R.error})]}),N.jsx("button",{onClick:$c,className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg text-xs font-bold hover:bg-red-50 shadow-sm transition-all flex items-center gap-2",children:"✨ Corrigir"})]})}),N.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-[var(--bg-content)]",children:[N.jsxs("div",{className:"px-5 py-3 border-b border-[var(--border-main)] flex justify-between items-center bg-[var(--bg-panel)] z-10",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsxs("div",{className:"flex flex-col",children:[N.jsx("span",{className:"text-[10px] font-black text-[var(--text-muted)] uppercase tracking-widest",children:"Resultado"}),N.jsx("div",{className:"flex items-baseline gap-2",children:R.totalRecords!==void 0&&N.jsxs("span",{className:"text-[10px] font-bold text-[var(--text-secondary)] bg-[var(--bg-main)] px-1.5 py-0.5 rounded-md border border-[var(--border-sub)]",children:[R.totalRecords.toLocaleString()," registros"]})})]}),N.jsx("div",{className:"h-6 w-px bg-[var(--border-sub)]"}),N.jsxs("button",{onClick:()=>mc(!qi),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-2 ${qi?"bg-[var(--bg-active)] text-[var(--accent-primary)]":"text-[var(--text-muted)] hover:bg-[var(--bg-hover)] hover:text-[var(--text-secondary)]"}`,children:[N.jsx(Jl,{size:14})," Filtros"]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:()=>wc("csv"),className:"p-2 text-[var(--text-muted)] hover:text-[var(--accent-primary)] hover:bg-[var(--bg-active)] rounded-lg transition-all",title:"Baixar CSV",children:N.jsx(TO,{size:18})}),N.jsx("div",{className:"relative group/save",children:C?N.jsxs("div",{className:"flex items-center gap-1 bg-[var(--bg-main)] p-1 rounded-lg animate-in fade-in slide-in-from-right-4",children:[N.jsx("input",{autoFocus:!0,value:O,onChange:I=>f(I.target.value),placeholder:"Nome da Query...",className:"bg-transparent text-xs w-32 px-2 outline-none text-[var(--text-primary)] font-medium placeholder:text-[var(--text-muted)]",onKeyDown:I=>I.key==="Enter"&&Yl()}),N.jsx("button",{onClick:Yl,className:"p-1 rounded bg-[var(--bg-panel)] text-green-600 shadow-sm hover:text-green-700",children:N.jsx(Hn,{size:14})})]}):N.jsx("button",{onClick:()=>_(!0),className:"p-2 text-[var(--text-muted)] hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Salvar Query",children:N.jsx(Hn,{size:18})})})]})]}),R.results?R.results.metaData.length>0?N.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col bg-[var(--bg-content)]",children:[N.jsx("div",{ref:Js,className:"flex border-b border-[var(--border-sub)] bg-[var(--bg-header)] backdrop-blur-md overflow-hidden select-none sticky top-0 z-20 shadow-sm",style:{height:qi?"72px":"40px"},children:Ji.map(I=>{if(!Bl[I])return null;const P=fe[I]||150;return N.jsxs("div",{className:"flex-shrink-0 px-4 py-2 text-xs font-bold text-[var(--text-secondary)] relative hover:bg-[var(--bg-hover)] transition-colors group flex flex-col justify-center border-r border-transparent hover:border-[var(--border-sub)]",style:{width:`${P}px`},draggable:!0,onDragStart:M=>Vc(M,I),onDragOver:M=>kc(M,I),onDragEnd:Wc,children:[N.jsx("div",{className:"flex items-center justify-between mb-0.5",children:N.jsx("span",{className:"truncate",children:I})}),qi&&N.jsx("div",{className:"relative",children:N.jsx("input",{type:"text",placeholder:"Filtrar...",className:"w-full text-[10px] px-2 py-1 bg-[var(--bg-main)] border border-[var(--border-sub)] rounded-md focus:border-[var(--accent-primary)] focus:bg-[var(--bg-panel)] outline-none transition-all placeholder:text-[var(--text-muted)] text-[var(--text-primary)]",value:Qi[I]||"",onChange:M=>pc({...Qi,[I]:M.target.value})})}),N.jsx("div",{className:"absolute right-0 top-1 bottom-1 w-1 cursor-col-resize hover:bg-blue-400 rounded-full transition-colors opacity-0 group-hover:opacity-100",onDoubleClick:()=>gc(I)})]},I)})}),N.jsx("div",{className:"flex-1",children:N.jsx(hO,{children:({height:I,width:P})=>N.jsx(AO,{height:I,width:P,itemCount:Un.length,itemSize:38,outerRef:Nc,itemData:{rows:Un,columnOrder:Ji,visibleColumns:Bl,columnWidths:fe,metaData:R.results.metaData},children:mP})})})]}):N.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-[var(--text-muted)]",children:[N.jsx("div",{className:"w-20 h-20 bg-[var(--bg-panel)] text-emerald-500 rounded-2xl flex items-center justify-center mb-4 shadow-sm border border-[var(--border-sub)]",children:N.jsx("span",{className:"text-4xl",children:"✓"})}),N.jsx("p",{className:"font-bold text-[var(--text-primary)] text-lg",children:"Sucesso!"}),N.jsx("p",{className:"text-sm font-medium text-[var(--text-muted)] mt-1",children:"Comando executado sem retorno de dados."})]}):N.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 relative overflow-hidden",children:[N.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,var(--bg-hover)_0,rgba(0,0,0,0)_70%)]"}),N.jsxs("div",{className:"bg-[var(--bg-panel)] p-6 rounded-3xl shadow-[0_20px_50px_var(--shadow-color)] border border-[var(--border-sub)] flex flex-col items-center relative z-10",children:[N.jsx("div",{className:"w-16 h-16 bg-[var(--bg-main)] text-[var(--accent-primary)] rounded-2xl flex items-center justify-center mb-4 transform rotate-3",children:N.jsx(yn,{size:32,strokeWidth:1.5})}),N.jsx("p",{className:"text-[var(--text-primary)] font-bold text-lg mb-1",children:"Pronto para rodar"}),N.jsxs("p",{className:"text-[var(--text-muted)] text-xs text-center max-w-[200px] leading-relaxed",children:["Escreva sua query acima e pressione ",N.jsx("span",{className:"font-bold text-[var(--text-secondary)]",children:"Executar"})]})]})]})]})]})]})]})}),U&&N.jsxs(N.Fragment,{children:[N.jsx($l,{className:"w-px bg-slate-200 hover:bg-blue-400 hover:w-1 transition-all cursor-col-resize relative group z-20",children:N.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-8 bg-white border border-slate-200 rounded-full flex items-center justify-center shadow-sm group-hover:border-blue-300",children:N.jsx("div",{className:"w-0.5 h-3 bg-slate-300 group-hover:bg-blue-400 rounded-full"})})}),N.jsxs(zi,{defaultSize:20,minSize:15,maxSize:40,className:"flex flex-col bg-[var(--bg-panel)] border-l border-[var(--border-main)]",children:[N.jsx("div",{className:"flex p-1 bg-[var(--bg-main)] m-2 rounded-xl border border-[var(--border-sub)]",children:["saved","schema","chat"].map(I=>N.jsx("button",{onClick:()=>X(I),className:`
                                                            flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-lg transition-all
                                                            ${q===I?"bg-[var(--bg-panel)] text-[var(--accent-primary)] shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)]"}
                                                        `,children:I==="saved"?"Salvos":I==="schema"?"Dados":"IA Chat"},I))}),N.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 custom-scrollbar",children:[q==="saved"&&N.jsxs("div",{className:"space-y-3 pt-2",children:[n.map(I=>N.jsxs("div",{onClick:()=>yc(I),className:"group bg-[var(--bg-content)] p-3 rounded-xl border border-[var(--border- sub)] shadow-[0_2px_8px_var(--shadow-color)] hover:shadow-md hover:border-[var(--accent-primary)] cursor-pointer transition-all relative overflow-hidden",children:[N.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-transparent to-[var(--bg-hover)] rounded-bl-full -mr-8 -mt-8 pointer-events-none group-hover:to-[var(--bg-active)] transition-colors"}),N.jsxs("div",{className:"flex justify-between items-start mb-1 relative z-10",children:[N.jsx("h5",{className:"font-bold text-[var(--text-primary)] text-xs truncate flex-1 min-w-0 mr-2",title:I.name,children:I.name}),N.jsx("button",{onClick:P=>{P.stopPropagation(),Gc(I.id)},className:"text-[var(--text-muted)] hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:N.jsx(RO,{size:12})})]}),N.jsx("div",{className:"h-px w-full bg-[var(--border-sub)] my-1.5 group-hover:bg-[var(--accent-primary)]/20"}),N.jsx("p",{className:"text-[10px] text-[var(--text-secondary)] font-mono line-clamp-2 relative z-10",children:I.sql})]},I.id)),n.length===0&&N.jsxs("div",{className:"text-center py-8 text-[var(--text-muted)]",children:[N.jsx("div",{className:"w-12 h-12 bg-[var(--bg-main)] rounded-full flex items-center justify-center mx-auto mb-2",children:N.jsx(Hn,{size:18})}),N.jsx("p",{className:"text-xs",children:"Nenhuma query salva"})]})]}),q==="schema"&&N.jsxs("div",{className:"space-y-4 pt-2",children:[N.jsxs("div",{className:"relative group/search",children:[N.jsx(Jl,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-muted)] group-hover/search:text-[var(--accent-primary)] transition-colors"}),N.jsx("input",{className:"w-full pl-9 pr-3 py-2.5 text-xs bg-[var(--bg-content)] border border-[var(--border-sub)] rounded-xl outline-none focus:ring-2 focus:ring-[var(--accent-primary)]/20 focus:border-[var(--accent-primary)] transition-all font-medium placeholder:text-[var(--text-muted)] text-[var(--text-primary)]",placeholder:"Buscar tabelas...",value:Ic,onChange:I=>{fc(I.target.value),Pc(I.target.value)}})]}),N.jsx("div",{className:"space-y-1.5",children:uc.map(I=>N.jsxs("div",{className:"bg-[var(--bg-content)] rounded-xl border border-transparent hover:border-[var(--border-sub)] hover:shadow-sm transition-all overflow-hidden",children:[N.jsxs("button",{onClick:()=>Mc(I),className:`w-full text-left px-3 py-2.5 text-xs font-mono flex items-center justify-between transition-colors ${$i===I?"bg-[var(--bg-active)] text-[var(--accent-primary)] font-bold":"text-[var(--text-secondary)] hover:bg-[var(--bg-hover)]"}`,children:[N.jsx("span",{className:"truncate",children:I}),N.jsx("span",{className:`text-[10px] text-[var(--text-muted)] transition-transform duration-200 ${$i===I?"rotate-180":""}`,children:"▼"})]}),N.jsx(xn,{children:$i===I&&N.jsx(Zi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-[var(--border-sub)] bg-[var(--bg-main)]/50",children:Pl.length>0?N.jsx("div",{className:"space-y-0.5 p-1",children:Pl.map(P=>N.jsxs("div",{onClick:()=>Uc(P.name),className:"flex justify-between items-center px-3 py-1.5 hover:bg-[var(--bg-hover)] hover:shadow-sm rounded-lg cursor-pointer group text-[10px] transition-all",children:[N.jsx("span",{className:"text-[var(--text-muted)] group-hover:text-[var(--accent-primary)] font-medium truncate",children:P.name}),N.jsx("span",{className:"text-[var(--text-muted)] group-hover:text-[var(--accent-secondary)] text-[9px] uppercase",children:P.type})]},P.name))}):N.jsx("div",{className:"p-2 text-center text-[10px] text-[var(--text-muted)]",children:"Carregando..."})})})]},I))})]}),q==="chat"&&N.jsxs("div",{className:"flex flex-col h-full pt-1",children:[N.jsxs("div",{className:"flex-1 space-y-4 mb-4 overflow-y-auto custom-scrollbar pr-1",children:[w.length===0&&N.jsxs("div",{className:"text-center py-10 opacity-50",children:[N.jsx("div",{className:"w-16 h-16 bg-[var(--bg-main)] text-[var(--accent-primary)] rounded-2xl flex items-center justify-center mx-auto mb-3",children:N.jsx(Kl,{size:24})}),N.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)]",children:"Pergunte sobre seus dados"})]}),w.map((I,P)=>N.jsx("div",{className:`flex ${I.role==="user"?"justify-end":"justify-start"}`,children:N.jsx("div",{className:`max-w-[90%] rounded-2xl px-4 py-3 text-xs shadow-sm leading-relaxed ${I.role==="user"?"bg-[var(--accent-primary)] text-white rounded-br-none":"bg-[var(--bg-content)] border border-[var(--border-sub)] text-[var(--text-secondary)] rounded-bl-none"}`,children:N.jsx(SO,{components:{code:({node:M,inline:H,className:ie,children:J,...le})=>N.jsx("code",{className:`${ie} ${H?"bg-black/10 px-1 py-0.5 rounded":"block bg-[var(--bg-main)] text-[var(--text-primary)] border border-[var(--border-sub)] p-2 rounded-lg my-2 overflow-x-auto text-[10px]"}`,...le,children:J})},children:I.content})})},P)),Re&&N.jsx("div",{className:"flex justify-start",children:N.jsxs("div",{className:"bg-[var(--bg-content)] border border-[var(--border-sub)] rounded-2xl rounded-bl-none px-4 py-3 shadow-sm flex items-center space-x-1.5",children:[N.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent-primary)] rounded-full animate-bounce"}),N.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent-primary)] rounded-full animate-bounce delay-75"}),N.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent-primary)] rounded-full animate-bounce delay-150"})]})})]}),N.jsxs("form",{onSubmit:Kc,className:"relative mt-auto pt-2 bg-[var(--bg-panel)]",children:[N.jsx("input",{className:"w-full bg-[var(--bg-content)] border border-[var(--border-sub)] shadow-sm rounded-xl px-4 py-3 pr-10 text-xs outline-none focus:ring-2 focus:ring-[var(--accent-primary)]/20 focus:border-[var(--accent-primary)] transition-all placeholder:text-[var(--text-muted)] text-[var(--text-primary)]",placeholder:"Pergunte à IA...",value:$,onChange:I=>Z(I.target.value)}),N.jsx("button",{type:"submit",disabled:!$.trim()||Re,className:"absolute right-2 top-1/2 -translate-y-1/2 mt-1 p-1.5 bg-[var(--accent-primary)] text-white rounded-lg hover:bg-[var(--accent-secondary)] disabled:opacity-50 disabled:hover:bg-[var(--accent-primary)] transition-all shadow-md shadow-[var(--shadow-color)]",children:N.jsx(cO,{size:12,className:"rotate-90 -translate-y-px -translate-x-px"})})]})]})]})]})]})]})})})})]})})};DP.propTypes={isVisible:xt.bool,tabs:xt.array.isRequired,setTabs:xt.func.isRequired,activeTabId:xt.number.isRequired,setActiveTabId:xt.func.isRequired,savedQueries:xt.array.isRequired,setSavedQueries:xt.func.isRequired,onDisconnect:xt.func};export{DP as default};
